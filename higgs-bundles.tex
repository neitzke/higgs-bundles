\documentclass[12pt,letterpaper,reqno]{article}

% \usepackage{mathtools}
\usepackage{epsfig}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{indentfirst}
\usepackage{xspace}
\usepackage{multirow}
\usepackage{hyperref}
\usepackage{xcolor}
\usepackage{verbatim}
\usepackage[letterpaper,margin=1in,headheight=15pt]{geometry}
\usepackage{mathpazo}
\usepackage{tikz-cd}
\usepackage{booktabs}
\usepackage{framed}
\usepackage{float}
\usepackage{thmtools}
\usepackage{dashrule}
\usepackage[missing=]{gitinfo2}
\usepackage{fancyhdr}

\definecolor{darkblue}{rgb}{0.1,0.1,0.7}
\definecolor{darkred}{rgb}{0.5,0.1,0.1}
\definecolor{darkgreen}{rgb}{0.0,0.42,0.06}
\hypersetup{colorlinks=true,urlcolor=darkred,linkcolor=darkblue,citecolor=darkred}
\definecolor{shadecolor}{rgb}{0.85,0.85,0.85}

% Bibliography formatting
\usepackage[bibstyle=authoryear-comp,labeldate=false,defernumbers=true,maxnames=20,uniquename=init,dashed=false,backend=biber,sorting=none,bibencoding=utf8]{biblatex}

\DeclareNameAlias{sortname}{first-last}

\DeclareFieldFormat{url}{\url{#1}}
\DeclareFieldFormat[article]{pages}{#1}
\DeclareFieldFormat[inproceedings]{pages}{\lowercase{pp.}#1}
\DeclareFieldFormat[incollection]{pages}{\lowercase{pp.}#1}
\DeclareFieldFormat[article]{volume}{\textbf{#1}}
\DeclareFieldFormat[article]{number}{(#1)}
\DeclareFieldFormat[article]{title}{\MakeCapital{#1}}
\DeclareFieldFormat[inproceedings]{title}{#1}
\DeclareFieldFormat{shorthandwidth}{#1}

% Don't use "In:" in bibliography. Omit urls from journal articles.
\DeclareBibliographyDriver{article}{%
  \usebibmacro{bibindex}%
  \usebibmacro{begentry}%
  \usebibmacro{author/editor}%
  \setunit{\labelnamepunct}\newblock
  \MakeSentenceCase{\usebibmacro{title}}%
  \newunit
  \printlist{language}%
  \newunit\newblock
  \usebibmacro{byauthor}%
  \newunit\newblock
  \usebibmacro{byeditor+others}%
  \newunit\newblock
  \printfield{version}%
  \newunit\newblock
%  \usebibmacro{in:}%
  \usebibmacro{journal+issuetitle}%
  \newunit\newblock
  \printfield{note}%
  \setunit{\bibpagespunct}%
  \printfield{pages}
  \newunit\newblock
  \usebibmacro{eprint}
  \newunit\newblock
  \printfield{addendum}%
  \newunit\newblock
  \usebibmacro{pageref}%
  \usebibmacro{finentry}}

% Remove dot between volume and number in journal articles.
\renewbibmacro*{journal+issuetitle}{%
  \usebibmacro{journal}%
  \setunit*{\addspace}%
  \iffieldundef{series}
    {}
    {\newunit
     \printfield{series}%
     \setunit{\addspace}}%
  \printfield{volume}%
%  \setunit*{\adddot}%
  \printfield{number}%
  \setunit{\addcomma\space}%
  \printfield{eid}%
  \setunit{\addspace}%
  \usebibmacro{issue+date}%
  \newunit\newblock
  \usebibmacro{issue}%
  \newunit}


% Bibliography categories
\def\makebibcategory#1#2{\DeclareBibliographyCategory{#1}\defbibheading{#1}{\section*{#2}}}
\makebibcategory{books}{Books}
\makebibcategory{papers}{Refereed research papers}
\makebibcategory{chapters}{Book chapters}
\makebibcategory{conferences}{Papers in conference proceedings}
\makebibcategory{techreports}{Unpublished working papers}
\makebibcategory{bookreviews}{Book reviews}
\makebibcategory{editorials}{Editorials}
\makebibcategory{phd}{PhD thesis}
\makebibcategory{subpapers}{Submitted papers}
\makebibcategory{curpapers}{Current projects}

\setlength{\bibitemsep}{2.65pt}
\setlength{\bibhang}{.8cm}
\renewcommand{\bibfont}{\small}

\renewcommand*{\bibitem}{\addtocounter{papers}{1}\item \mbox{}\hskip-0.85cm\hbox to 0.85cm{\hfill\arabic{papers}.~~}}
\defbibenvironment{bibliography}
{\list{}
  {\setlength{\leftmargin}{\bibhang}%
   \setlength{\itemsep}{\bibitemsep}%
   \setlength{\parsep}{\bibparsep}}}
{\endlist}
{\bibitem}

\newenvironment{publications}{\section{\LARGE Publications}\label{papersstart}\vspace*{0.2cm}\small
\titlespacing{\section}{0pt}{1.5ex}{1ex}\itemsep=0.00cm
}{\label{papersend}\addtocounter{sumpapers}{-1}\refstepcounter{sumpapers}\label{sumpapers}}

\def\printbib#1{\printbibliography[category=#1,heading=#1]\lastref{sumpapers}}

% Counters for keeping track of papers
\newcounter{papers}\setcounter{papers}{0}
\newcounter{sumpapers}\setcounter{sumpapers}{0}
\def\lastref#1{\addtocounter{#1}{\value{papers}}\setcounter{papers}{0}}

% theorem environments
\declaretheoremstyle[spaceabove=0.25cm,spacebelow=0.25cm,notefont=\normalfont\bfseries, notebraces={(}{)}]{theorem}
\declaretheoremstyle[spaceabove=0.25cm,spacebelow=0.25cm,bodyfont=\normalfont,notefont=\normalfont\bfseries, notebraces={(}{)}]{noital}
\declaretheoremstyle[spaceabove=0.25cm,spacebelow=0.25cm,bodyfont=\normalfont\color{darkgreen},notefont=\normalfont\bfseries, notebraces={(}{)}]{green}
\declaretheoremstyle[spaceabove=0.25cm,spacebelow=0.25cm,bodyfont=\normalfont,notefont=\normalfont\bfseries,qed=$\qedsymbol$,notebraces={(}{)}]{proofstyle}

\declaretheorem[name=Theorem,numberwithin=section,style=theorem]{thm}
\declaretheorem[name=Proposition,sibling=thm,style=theorem]{prop}
\declaretheorem[name=Corollary,sibling=thm,style=theorem]{cor}
\declaretheorem[name=Lemma,sibling=thm,style=theorem]{lem}
\declaretheorem[name=Definition,sibling=thm,style=noital]{defn}
\declaretheorem[name=Example,sibling=thm,style=noital]{example}
\declaretheorem[name=Exercise,numberwithin=section,style=green]{exercise}
\declaretheorem[name=Proof,style=proofstyle,numbered=no]{pf}

\numberwithin{equation}{section}


% macros for convenience
\newcommand{\tops}{\texorpdfstring}

\newcommand{\nid}{\noindent}

\newcommand{\fa}{{\mathfrak a}}
\newcommand{\fp}{{\mathfrak p}}
\newcommand{\fk}{{\mathfrak k}}
\newcommand{\fg}{{\mathfrak g}}
\newcommand{\fh}{{\mathfrak h}}
\newcommand{\fn}{{\mathfrak n}}
\newcommand{\fq}{{\mathfrak q}}
\newcommand{\fm}{{\mathfrak m}}
\newcommand{\fr}{{\mathfrak r}}
\newcommand{\fu}{{\mathfrak u}}
\newcommand{\fG}{{\mathfrak G}}

\newcommand{\cC}{\ensuremath{\mathcal C}}
\newcommand{\cG}{\ensuremath{\mathcal G}}
\newcommand{\cB}{\ensuremath{\mathcal B}}
\newcommand{\cL}{\ensuremath{\mathcal L}}
\newcommand{\cS}{\ensuremath{\mathcal S}}
\newcommand{\cF}{\ensuremath{\mathcal F}}
\newcommand{\cK}{\ensuremath{\mathcal K}}
\newcommand{\cZ}{\ensuremath{\mathcal Z}}
\newcommand{\cM}{\ensuremath{\mathcal M}}
\newcommand{\cN}{\ensuremath{\mathcal N}}
\newcommand{\cO}{\ensuremath{\mathcal O}}
\newcommand{\cH}{\ensuremath{\mathcal H}}
\newcommand{\cX}{\ensuremath{\mathcal X}}
\newcommand{\cY}{\ensuremath{\mathcal Y}}
\newcommand{\cA}{\ensuremath{\mathcal A}}
\newcommand{\cI}{\ensuremath{\mathcal I}}

\newcommand{\R}{\ensuremath{\mathbb R}}
\newcommand{\C}{\ensuremath{\mathbb C}}
\newcommand{\PP}{\ensuremath{\mathbb P}}
\newcommand{\Z}{\ensuremath{\mathbb Z}}
\newcommand{\Q}{\ensuremath{\mathbb Q}}
\newcommand{\A}{\ensuremath{\mathbb A}}
\newcommand{\bbH}{\ensuremath{\mathbb H}}
\newcommand{\bbI}{\ensuremath{\mathbb I}}
\newcommand{\bS}{\ensuremath{\mathbb S}}

\newcommand{\half}{\ensuremath{\frac{1}{2}}}
\newcommand{\qtr}{\ensuremath{\frac{1}{4}}}
\newcommand{\bq}{{\mathbf q}}
\newcommand{\N}{{\mathcal N}}
\newcommand{\F}{{\mathcal F}}
\newcommand{\HH}{{\mathcal H}}
\newcommand{\LL}{{\mathcal L}}
\newcommand{\RR}{{\mathcal R}}
\newcommand{\V}{{\mathcal V}}
\newcommand{\dirac}{\!\!\not\!\partial}
\newcommand{\Dirac}{\!\!\not\!\!D}
\newcommand{\cE}{{\mathcal E}}
\newcommand{\vs}{\not\!v}
\newcommand{\kahler}{K\"ahler\xspace}
\newcommand{\kq}{/\!\!/}
\newcommand{\kql}[1]{/\!\!/\!\!_#1\,}
\newcommand{\hk}{hyperk\"ahler\xspace}
\newcommand{\Hk}{Hyperk\"ahler\xspace}
\newcommand{\hkq}{/\!\!/\!\!/\!\!/}
\newcommand{\hkql}[1]{/\!\!/\!\!/\!\!/\!\!_#1\,}
\newcommand{\del}{\ensuremath{\partial}}
\newcommand{\delbar}{\ensuremath{\overline{\partial}}}
\newcommand{\I}{{\mathrm i}}
\newcommand{\J}{{\mathrm j}}
\newcommand{\K}{{\mathrm k}}
\newcommand{\e}{{\mathrm e}}
\newcommand\bid{{\mathbf 1}}
\newcommand{\de}{\mathrm{d}}
\newcommand{\ab}{\mathrm{ab}}
\newcommand{\vol}{\mathrm{vol}}
\renewcommand{\sf}{\mathrm{sf}}
\newcommand{\inst}{\mathrm{inst}}
\newcommand{\eff}{\mathrm{eff}}
\newcommand{\dR}{\mathrm{dR}}
\newcommand{\closed}{\mathrm{closed}}
\newcommand{\exact}{\mathrm{exact}}

\newcommand{\abs}[1]{\lvert#1\rvert}
\newcommand{\norm}[1]{\lVert#1\rVert}
\newcommand{\IP}[1]{\langle#1\rangle}
\newcommand{\DIP}[1]{\langle\!\langle#1\rangle\!\rangle}
\newcommand{\dwrt}[1]{\frac{\partial}{\partial#1}}
\newcommand{\eps}{\epsilon}
\newcommand{\simarrow}{\xrightarrow\sim}

\newcommand{\mmaref}[1]{}

\newcommand{\ti}[1]{\textit{#1}}
\newcommand{\tb}[1]{\textbf{#1}}

\DeclareMathOperator{\ad}{ad}
\DeclareMathOperator{\im}{Im}
\DeclareMathOperator{\re}{Re}
\DeclareMathOperator{\Tr}{Tr}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Sym}{Sym}
\DeclareMathOperator{\Lie}{Lie}
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\Bun}{Bun}
\DeclareMathOperator{\Vect}{Vect}
\DeclareMathOperator{\Span}{Span}
\DeclareMathOperator{\grad}{grad}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\ind}{ind}
\DeclareMathOperator{\coker}{coker}
\DeclareMathOperator{\Jac}{Jac}
\DeclareMathOperator{\Hol}{Hol}
\DeclareMathOperator{\gr}{gr}

\newcommand{\insfig}[2]{

\medskip
\noindent
\begin{minipage}{\linewidth}

\makebox[\linewidth]{\includegraphics[keepaspectratio=true,scale=#2]{figures/#1-crop.pdf}}

\end{minipage}
\medskip

}


% \newcommand{\insfig}[2]{\begin{figure}[htbp] \centering \includegraphics[scale=#2]{figures/#1-crop.pdf} \label{fig:#1} \end{figure}}
% syntax: \insfig{name}{0.5}{caption}

\newcommand{\fixme}[1]{{\color{orange}{[#1]}}}
\newcommand{\currentposition}{{\color{blue} \noindent\makebox[\linewidth]{\hdashrule{\paperwidth}{1pt}{3mm}}}}

% \mathtoolsset{showonlyrefs}

\bibliography{higgs-bundles}

\begin{document}

\pagestyle{fancy}
\lhead{{\tiny \color{gray} \tt \gitAuthorIsoDate}}
\chead{\tiny \ti{Moduli of Higgs Bundles, \tb{preliminary} and \tb{incomplete} draft}}
\rhead{{\tiny \color{gray} \tt \gitAbbrevHash}}
\renewcommand{\headrulewidth}{0.5pt}


\begin{center}
\tb{Moduli of Higgs Bundles} \\
Andrew Neitzke \\
\tb{Preliminary} and \tb{incomplete} draft
\end{center}

{These are the notes for a Spring 2016
course at UT Austin. The lectures are now finished but the notes
are not: they are extremely incomplete, unreliable, full
of mistakes and omissions,
and still being updated. The latest PDF can be found
at
\begin{center}
\small \url{https://gauss.math.yale.edu/~an592/exports/higgs-metric.pdf}
\end{center}
Please send corrections/improvements to
\begin{center}
\small \tt\href{mailto:andrew.neitzke@yale.edu}{andrew.neitzke@yale.edu}
\end{center}
or as pull requests to the source repository hosted at
\begin{center}
\small \url{http://github.com/neitzke/higgs-bundles}
\end{center}
}

\tableofcontents
\renewcommand{\listtheoremname}{Quick reference}
\listoftheorems[onlynamed]

\newpage

%\setcounter{page}{1}


\section{Introductory motivation}

Suppose given a compact Riemann surface $C$
of genus $g \ge 2$ and a compact connected
Lie group $G$, e.g. $G = U(1)$, $G = SU(2)$.
Built from these data there is a
moduli space $$\cM = \cM^H(C,G)$$
It is \ti{almost} a manifold: it has some singularities, but also
some connected components without singularities, and
at first we can focus on the parts without singularities.
It can be seen in various ways:

\begin{itemize}
\item $\cM$ is the (twisted) \ti{character variety}, i.e. moduli space of
(twisted) irreducible representations
$\pi_1(C) \to G_\C$.
e.g. for $g=2$ and $G = SU(2)$,
this means
\begin{equation}
  \cM = \{ A_1,A_2,B_1,B_2 \in SL(2,\C): A_1 B_1 A_1^{-1} B_1^{-1} A_2 B_2 A_2^{-1} B_2^{-1} = \pm 1 \} / \sim
\end{equation}
\item $\cM$ is the moduli space parameterizing irreducible
\ti{flat $G_\C$-connections} (or complex Einstein connections)
over $C$. (Certain sheaves on this moduli space are
basic objects on ``$B$ side'' of the geometric Langlands correspondence.)
\item $\cM$ is a partial compactification of $T^* \Bun(C,G)$, where $\Bun(C,G)$ is the moduli space of semistable $G$-bundles on $C$. (Lagrangian submanifolds are related to \ti{D-modules} on $\Bun(C,G)$, basic objects on ``$A$ side''
of the geometric Langlands correspondence.)
\insfig{higgs-bundles-2}{0.55}
\item $\cM$ is a \ti{complex integrable system} \cite{MR88i:58068}, i.e. a holomorphic
symplectic space fibered over a complex base with Lagrangian
fibers, generic fiber a compact complex torus. \insfig{higgs-bundles-1}{0.8}
\item $\cM$ is a noncompact \ti{Calabi-Yau space}, i.e. a \kahler
space admitting a Ricci-flat metric, in some sense a close
cousin of the K3 surface; from this point of view
it is a paradigmatic example of the Strominger-Yau-Zaslow
philosophy \cite{Strominger:1996it},
which says that every Calabi-Yau space arises naturally
as a special Lagrangian \ti{torus fibration} over a complex base,
and that its \ti{mirror} can be obtained by a natural fiberwise duality
operation; moreover in this case the mirror is a space of the same kind,
namely $\cM^\vee = \cM^H(C,^L G)$ where
$^L G$ is the \ti{Langlands dual} group \cite{mlh,MR2957305}.
(The mirror symmetry
exchanges the two sides of the geometric Langlands correspondence.)
\item $\cM$ is a \ti{cluster variety}, built by gluing together
very simple pieces $(\C^\times)^n$ in an essentially \ti{combinatorial} way. (Almost: to make this precisely true, we have to include \ti{punctures} on $C$; but even without the punctures, some cluster-like
structure seems to persist.)
\item $\cM$ is the space of solutions of an interesting PDE, \ti{Hitchin's equations} \cite{MR89a:32021}, containing as special cases various sorts of harmonic maps (including \ti{uniformization} in the case $G = PSU(2)$).
\end{itemize}

How can one space $\cM$ be so many different things at once?

A partial answer comes from another structure $\cM$ carries, namely
the \ti{\hk} structure. This says in short that $\cM$ has a
metric compatible with many
different complex structures,
fitting together in a specific way; thus $\cM$ gives rise to
many complex manifolds which look quite different from one
another, but are nevertheless canonically diffeomorphic.
Loosely speaking, all these complex structures are generated
by two basic ones: one of these comes from the complex structure
of the Riemann surface $C$, the other comes from the complex
structure of $G_\C$.

A \hk structure is rather rigid and gives a lot of constraints, e.g.
it implies that the metric on $\cM$ is Ricci-flat, and even lets
us say some things about what the metric looks like (much
more than we can say for ``generic'' Ricci-flat metrics
or even Ricci-flat \kahler metrics);
it also allows us to study the \ti{topology} of $\cM$, e.g.
its Betti numbers.

Our first major aim is to understand this structure --- first
we will study some simpler ``baby'' examples of \hk geometry, then
we will study $\cM(C,G)$ for $G = U(1)$, finally we will
come to $\cM(C,G)$ for general $G$.

(A fuller answer should come from the way $\cM$
fits into supersymmetric quantum field theory; but this is
mostly beyond the scope of this course.)


\section{Local symplectic, complex and \kahler geometry: a quick review}

This section is only intended as a review, to fix notation, and to
give references for some facts we will need: we will not give
complete proofs here.

There are many references for the material on complex
and \kahler geometry: one
good one is \cite{MR2093043}.

In this section ``manifold'' will mean a finite-dimensional
manifold. (Later we will need to talk about
infinite-dimensional Banach manifolds, but then we will
always say ``Banach manifold'' instead of just ``manifold.'')

\subsection{Quotients}

\begin{defn}[Free action] \label{def:free} Suppose $X$ is a manifold
with a Lie group $G$ acting. We say the action is \ti{free} if
the stabilizers of all $x \in X$ are trivial.
\end{defn}

\begin{defn}[Proper action] \label{def:proper}
Suppose $X$ is a manifold
with a Lie group $G$ acting. We say the action is \ti{proper} if
inverse images of compact sets in $X$
are compact in $G \times X$.
\end{defn}

\begin{prop}[Compact group actions are proper]
If $G$ is compact, then any action of $G$ on a manifold is proper.
\end{prop}

\begin{defn}[Slice] \label{def:slice}
Suppose $X$ is a manifold with a Lie group $G$ acting freely,
and $x \in X$.
A \ti{slice at $x$} for this action is a
submanifold $S_x \subset X$, with $x \in S_x$,
such that for every $g \in G$ we have $g S_x \cap S_x = \emptyset$,
and the action map $G \times S_x \to X$ is a diffeomorphism
onto some neighborhood of $x$.
\end{defn}

\insfig{higgs-bundles-10}{1.1}

\begin{prop}[Free proper quotients are manifolds] \label{prop:free-proper-quotients-are-manifolds}
Suppose $X$ is a manifold with a Lie group $G$
acting properly and freely.
Let $\fg = \Lie G$ and let
\begin{equation}
\rho: \fg \to \Vect(X)
\end{equation}
be the infinitesimal action.
Then:
\begin{itemize}
\item The quotient $X / G$ (the set of $G$-orbits on $X$)
has a natural structure of manifold, compatible with
the quotient topology.
\item The differential of the projection $X \to X/G$
is surjective and gives an isomorphism
\begin{equation}
TX / \rho(\fg) \simeq T(X/G).
\end{equation}
\end{itemize}
\end{prop}

We do not review the proof here, but only comment that it
relies on the existence of a slice $S_x$ around any $x \in X$.
If $G$ is compact then this is relatively easy (choose a
$G$-invariant Riemannian metric on $X$ and then
let $S_x$ be the exponential of a small disc in the normal bundle
to the orbit $Gx$ at $x$). If $G$ is non-compact but still acts properly
then it is more difficult, but proven in \cite{MR0126506}.

Note that the requirement that the $G$-action be proper is
important. One
can easily construct non-Hausdorff quotients by letting $G$ be say
an infinite discrete group.
For a spectacularly bad example,
let $M$ be the torus $T^2 \simeq \R^2 / \Z^2$, and consider
the action of $\R$ by translations in an irrational direction,
e.g. let $t \in \R$ act by $(x,y) \mapsto (x+t,y+\sqrt{2}t)$.
Then the quotient $T^2 / \R$ has the indiscrete topology,
so it is definitely not a manifold.


\subsection{Symplectic manifolds}

\begin{defn}[Nondegenerate skew pairing] \label{def:nondegenerate-skew-pairing}
Suppose $V$ is a vector space over $\R$ or $\C$.
We say $\omega \in \wedge^2(V)$ is \ti{nondegenerate}
if the map
\begin{align}
  V &\to V^* \\
  v &\mapsto \iota_v \omega = \omega(v,\cdot)
\end{align}
is an isomorphism.
\end{defn}

\begin{prop}[Standard basis for a nondegenerate skew pairing]
\label{prop:standard-nondegenerate-skew-pairing}
If $V$ is a finite-dimensional vector space over $\R$ or $\C$, and
$\omega \in \wedge^2(V)$ is nondegenerate, then $V$ has
dimension $2n$ for some $n$, and there
exists a basis $\{e_1, \dots, e_n, f_1, \dots, f_n\}$ for $V$
such that
\begin{align}
\omega(e_i, f_j) &= \delta_{ij}, \\
\omega(e_i, e_j) &= 0, \\
\omega(f_i, f_j) &= 0.
\end{align}
\end{prop}

\begin{defn}[Symplectic manifold] \label{def:symplectic-manifold}
A \ti{symplectic manifold} is a pair $(X,\omega)$
where $X$ is a manifold and
$\omega \in \Omega^2(X)$, such that
\begin{equation}
  \de \omega = 0
\end{equation}
and $\omega(x)$ is nondegenerate for every $x \in X$.
\end{defn}

\begin{defn}[Exact symplectic manifold]
An \ti{exact symplectic manifold} is a tuple $(X,\omega,\lambda)$
where $(X,\omega)$ is a symplectic manifold and $\lambda \in \Omega^1(X)$ has $\de \lambda = \omega$.
\end{defn}

\begin{example}[Cotangent bundle is an exact symplectic manifold]
If $X$ is any manifold and $Y = T^* X$, then $Y$ carries a canonical
$1$-form (``Liouville form''), $\lambda \in \Omega^1(Y)$,
defined as follows:
\begin{equation}
  \lambda(x,p) \cdot v = p \cdot \pi_* v \qquad x \in X, p \in T^*_x X, v \in TY.
\end{equation}
Then there is a canonical symplectic form on $Y$ given by
\begin{equation}
\omega = \de \lambda.
\end{equation}
\end{example}

\begin{exercise}
Show that, in the canonical coordinate system $(p_i,q_i)$
on $T^* X$ induced by a coordinate system $(q_i)$ on $X$,
we have
$\lambda = \sum_{i=1}^n p_i \de q_i$, and
$\omega = \sum_{i=1}^n \de p_i \wedge \de q_i$.
\end{exercise}


\subsection{Symplectic quotients}

\begin{defn}[Moment map] \label{def:moment-map}
Suppose $X$ is a symplectic manifold, with symplectic form $\omega$,
acted on by a real Lie group $G$. Let $\fg = \Lie G$ and let
\begin{equation}
\rho: \fg \to \Vect(X)
\end{equation}
be the infinitesimal action.
Suppose given a function
\begin{equation} \label{eq:moment-map}
 \mu: X \to \fg^*
\end{equation}
and for $Z \in \fg$ write $\mu_Z = \mu \cdot Z$.
We say $\mu$ is a \ti{moment map} for the $G$-action if
for all $Z \in \fg$ we have
\begin{equation} \label{eq:moment-map-condition-3}
  \iota_{\rho(Z)} \omega = \de \mu_Z,
\end{equation}
and in addition the map \eqref{eq:moment-map} is $G$-equivariant
(for the $G$-action on $X$ and the coadjoint $G$-action on $\fg^*$).
\end{defn}
In particular, the moment map $\mu$
\ti{determines} the $G$-action.

Note that moment maps do not always exist.
At the very least, the existence of a moment
map requires that $\iota_{\rho(Z)} \omega$ is closed
for all $Z \in \fg$, by \eqref{eq:moment-map-condition-3}. Using
Cartan's ``magic formula''
\begin{equation} \label{eq:cartan-magic-formula}
  \cL_v \omega = \de (\iota_v \omega) + \iota_v (\de \omega)
\end{equation}
and the fact that $\de \omega = 0$,
this is equivalent to requiring $\cL_{\rho(Z)}\omega = 0$,
i.e. the $G$-action preserves $\omega$ infinitesimally.
But even if the $G$-action preserves $\omega$,
a moment map still may not exist.\footnote{When $G$ is compact,
moment maps exist at least
\ti{locally} on $X$, though maybe not globally. When $G$ is not
compact there can even be a local obstruction.}

Conversely, if a moment map $\mu$ does exist and $\fg$
has nontrivial center, we can get another moment map by taking
$\mu' = \mu + c$, where $c$ is fixed by the \ti{coadjoint}
action of $G$, i.e. $c \in [\fg,\fg]^\perp \subset \fg^*$.

\begin{exercise}
Suppose $X = \R^2$ with $\omega = \de x_1 \wedge \de x_2$, and
$G = SO(2) = U(1) = \{e^{\I \alpha}: \alpha \in \R \}$.
Then $\fu(1)$ is $1$-dimensional, spanned by $\partial_\alpha$.
Show that the counterclockwise rotation action of $U(1)$ on $X$,
given by the matrices
\begin{equation}
   \begin{pmatrix} \cos \alpha & - \sin \alpha \\ \sin \alpha & \cos \alpha \end{pmatrix},
 \end{equation}
has a moment map $\mu: \R^2 \to \fu(1)^*$, given by
\begin{equation}
  \mu(x_1,x_2) \cdot \partial_\alpha = -\half (x_1^2 + x_2^2).
\end{equation}
\end{exercise}
Thus if we identify $\fu(1) \simeq \R$ using the generator
$\partial_\alpha$, we can think of $\mu$ just as an $\R$-valued function
on $X$,
\begin{equation}
  \mu(x_1,x_2) = -\half (x_1^2 + x_2^2).
\end{equation}

\begin{exercise} \label{exc:cotangent-moment-map}
Suppose $X$ is any manifold, with a compact
group $G$ acting. Then $T^* X$ is a symplectic manifold
which also has a canonical action of $G$. Verify that
\begin{equation}
  \mu_Z(x,p) = -p \cdot (\rho(Z)(x)) \qquad x \in X, p \in T^*_x X
\end{equation}
gives a moment map for this action.
\end{exercise}

\begin{defn}[Symplectic quotient] \label{def:symplectic-quotient} \cite{MR0402819}
Suppose $X$ is a symplectic manifold, with a Lie group $G$
acting on it, with moment map $\mu$. Then the \ti{symplectic quotient}
is
\begin{equation}
  X \kq G = \mu^{-1}(0) / G.
\end{equation}
\end{defn}

More generally, for $c \in [\fg,\fg]^\perp$ we can define
\begin{equation}
  X \kql{c} G = \mu^{-1}(c) / G.
\end{equation}
This is equivalent to changing our choice of $\mu$ to $\mu' = \mu+c$,
so there is no essential loss of generality in always taking $c = 0$,
but sometimes one or the other description is more convenient.\footnote{Some authors define more generally for arbitrary
$c \in \fg^*$
\begin{equation}
  X \kq_c G = \mu^{-1}(c) / G_c
\end{equation}
where $G_c \subset G$ is the stabilizer of $c$. This construction
gives rise to many interesting symplectic manifolds; especially,
applying this to the $G$-action on $T^* G$ itself gives the
symplectic structures on coadjoint orbits \cite{MR0402819}.}

\begin{prop}[Symplectic quotient is symplectic] \label{prop:symplectic-quotient-is-symplectic}
Suppose $X$ is a symplectic manifold, with a compact group $G$
acting on it, with moment map $\mu$.
If $G$ acts freely
on $\mu^{-1}(0)$, then $X \kq G$ is a manifold,
\begin{equation}
  \dim (X \kq G) = \dim X - 2 \dim G,
\end{equation}
and there is a symplectic form $\omega_{X \kq G}$
on $X \kq G$,
with the property
\begin{equation} \label{eq:symplectic-quotient-form}
  \pi^* \omega_{X \kq G} = \iota^* \omega
\end{equation}
where $\iota: \mu^{-1}(0) \hookrightarrow X$ is the inclusion.
\end{prop}
\begin{pf}
Let $Y = \mu^{-1}(0)$.
We want to show that $0$ is a regular value of $\mu$,
i.e. that $\de \mu: T_x X \to \fg^*$ is surjective
whenever $x \in Y$. This
is equivalent to saying that for every $Z \in \fg$
we have $\de \mu_Z(x) \neq 0$.
But by \eqref{eq:moment-map-condition-3} this just means
that $\iota_{\rho(Z)} \omega \neq 0$,
which is true since $\rho(Z) \neq 0$ ($G$ acts freely)
and $\omega$ is nondegenerate.
Thus $Y$ is a submanifold of $X$,
with $\dim Y = \dim X - \dim G$.
$G$ is a compact group acting freely on $Y$.
Then by \autoref{prop:free-proper-quotients-are-manifolds},
$X \kq G = Y / G$ is also a manifold, of the desired
dimension, and $T(X \kq G) = T(Y/G) = TY / \rho(\fg)$.

It remains to check that $\omega$ descends to a
symplectic form $\omega_{X \kq G}$. According
to \eqref{eq:symplectic-quotient-form} we should define
$\omega_{X \kq G}(v,w) = \omega(\tilde v, \tilde w)$
where $\pi_* \tilde v = v$, $\pi_* \tilde w = w$,
and $\tilde v$, $\tilde w$ $\in TY$.
Then:
\begin{itemize}
\item $\omega_{X \kq G}$ is well defined
on $T(X \kq G) = T(Y/G)$: that means we want $\omega(v,w) = 0$
when $v = \rho(Z)$
for some $Z$, and $w \in TY$. This follows directly from
\eqref{eq:moment-map-condition-3}.
\item $\omega_{X \kq G}$ is nondegenerate on $T(X \kq G) = T(Y/G)$:
the symplectic orthogonal complement of $TY$ has dimension
$(\dim G)$, and contains $\rho(\fg)$ by
\eqref{eq:moment-map-condition-3}, so it must be equal
to $\rho(\fg)$. But this means that any vector which
annihilates all of $TY$ is zero in $T(Y/G)$, i.e.
$\omega$ is nondegenerate on $T(Y/G)$.
\item $\omega_{X \kq G}$ is closed on $Y/G$:
letting $\pi: Y \to Y/G$ be the quotient map,
on $Y$ we have $\iota^* \omega = \pi^* \omega_{X \kq G}$,
so that $\de (\pi^* \omega_{X \kq G}) = 0$,
ie $\pi^* \de \omega_{X \kq G} = 0$.
Since $\pi$ is a submersion this implies
$\de \omega_{X \kq G} = 0$ as desired.
\end{itemize}
\end{pf}

The next exercise gives (perhaps) some motivation
for the notion of symplectic quotient:

\begin{exercise} \label{exc:cotangent-symplectic-quotients}
Suppose $X$ is a manifold
with a compact group $G$ acting freely. Let $\mu$
be the moment map of \autoref{exc:cotangent-moment-map}.
Show that $G$ acts freely on $\mu^{-1}(0)$ and
\begin{equation}
T^*X \kq G \simeq T^*(X/G)
\end{equation}
as symplectic manifolds.
\end{exercise}


\subsection{Complex manifolds}
In this section $X$ is a manifold.

\begin{defn}[Almost complex structure]
An \ti{almost complex structure} on $X$ is a smooth section $I$ of $\End(TX)$ with $I^2 = -1$. An \ti{almost complex manifold} is a pair $(X,I)$ where $I$ is an almost complex structure.
If $X$ has real dimension $2n$, an almost complex
structure $I$ equips $TX$ with the structure of
\ti{complex} vector bundle over $X$, of rank $n$,
and we say the \ti{complex dimension} $\dim_\C X$ is
$n$.
\end{defn}

\begin{example}[Flat complex space] $\C^n$ has a canonical almost complex structure $I$, as follows. Each tangent space $T_p \C^n \simeq \C^n$ canonically; $I$ is multiplication by $\I$, thought of as an
endomorphism of the underlying $2n$-dimensional real vector space.
Writing $z_i = x_i + \I y_i$, and taking the coordinate basis
$\{\partial_{x_1}, \partial_{x_2}, \dots, \partial_{x_n}, \partial_{y_1}, \partial_{y_2}, \dots, \partial_{y_n}\}$ for for $T_p \C^n$, $I$ is represented by the matrix
\begin{equation}
   I = \begin{pmatrix} {\bf 0}_{n \times n} & -{\bf 1}_{n \times n} \\ {\bf 1}_{n \times n} & {\bf 0}_{n \times n} \end{pmatrix}.
\end{equation}
\end{example}

\begin{defn}[Holomorphic maps] \label{def:holomorphic-maps} If $(X,I_X)$ and $(Y,I_Y)$ are almost
complex manifolds, a \ti{holomorphic map} $\phi: X \to Y$
is one obeying
\begin{equation}
 I_Y \circ \de \phi = \de \phi \circ I_X.
\end{equation}
\end{defn}

\begin{exercise} Show that, if both $(X,I_X)$ and $(Y,I_Y)$ are $\C$ with its canonical
almost complex structure, \autoref{def:holomorphic-maps} becomes the standard
definition of holomorphic function (Cauchy-Riemann equations).
\end{exercise}

\begin{defn}[Antiholomorphic maps] \label{def:antiholomorphic-maps} If $(X,I_X)$ and $(Y,I_Y)$ are almost
complex manifolds, an \ti{antiholomorphic map} $\phi: X \to Y$
is a holomorphic map $(X,I_X) \to (Y,-I_Y)$.
\end{defn}

\begin{defn}[Complex structures] \label{def:complex-structures} An almost complex structure $I$ on $X$ is \ti{integrable},
or a \ti{complex structure}, if there is a covering of $X$ by open sets $U_\alpha$ with holomorphic diffeomorphisms $\phi_\alpha: U_\alpha \to V_\alpha \subset \C^n$ (where on $\C^n$ we take the
canonical almost complex structure.) A \ti{complex manifold} is an almost complex manifold $(X,I)$ with $I$ integrable.
\end{defn}

\begin{exercise} Show that \autoref{def:complex-structures} is equivalent to the usual definition of a complex manifold as a space
$X$ with a covering by charts $\phi_\alpha: U_\alpha \to \C^n$, where the transition maps are holomorphic (obey Cauchy-Riemann equations).
\end{exercise}

\begin{example}[Complex structure on $\C^n$] A tautological example is $X = \C^n$ itself with its
canonical almost complex structure: just take a single open set $U = \C^n$, and $\phi: U \to \C^n$ to be the identity map. So the canonical almost complex structure on $\C^n$ is, tautologically, a
complex structure.
\end{example}

There are various equivalent ways of formulating the integrability condition. One which will be useful for us is:
\begin{prop}[Integrability means vanishing of Nijenhuis tensor] Define the \ti{Nijenhuis tensor} $N_I \in \Omega^0(\wedge^2 T^*X \otimes TX)$ as a map
$T^*X \otimes T^*X \to TX$ by
\begin{equation}
N_I(v,w) = [\tilde v,\tilde w] + I[\tilde v,I \tilde w] + I[I \tilde v, \tilde w] - [I\tilde v,I\tilde w],
\end{equation}
where $\tilde v$ and $\tilde w$ are any vector fields extending $v$, $w$.
Then $I$ is integrable if and only if
\begin{equation}
N_I = 0.
\end{equation}
\end{prop}
\begin{pf} To show that integrability implies $N_I = 0$ is straightforward
by directly computing in a local holomorphic coordinate
chart. The other direction
is much harder --- it is the content of the Newlander-Nirenberg theorem.
\end{pf}

\subsection{Type decompositions}
Suppose $(X,I)$ is an almost complex manifold.
We have a decomposition
of $T_\C X = TX \otimes_\R \C$,
\begin{equation}
T_\C X = T^{1,0} X \oplus T^{0,1} X
  \end{equation}
where $T^{1,0} X$ and $T^{0,1} X$ are
respectively the
$+\I$ and $-\I$ eigenspaces of $I$.
Both $TX$ and $T^{1,0}X$ are complex vector bundles
of rank $n$; it is sometimes convenient to identify
them, by projection on the $(1,0)$ part.

\begin{exercise}
Show that this projection $\pi: TX \to T^{1,0}X$ indeed is an isomorphism
of complex vector bundles. (This reduces essentially
to a question of linear algebra, concerning
a vector space $V$ with complex structure $I$,
and its complexification $V_\C$.) If $X = \C$,
what are $\pi(\partial_x)$ and $\pi(\partial_y)$?
\end{exercise}

There is also a dual decomposition
\begin{equation}
T^*_\C X = (T^*)^{1,0} X \oplus (T^*)^{0,1} X,
  \end{equation}
where $(T^*)^{1,0} X$ is the annihilator of
$T^{0,1} X$, and $(T^*)^{0,1} X$ is the annihilator of
$T^{1,0} X$.
This decomposition induces
\begin{equation}
\wedge^* T^*_\C X = \bigoplus_{p,q=0}^n \wedge^{p,q} T^* X , \qquad \Omega^*_\C X = \bigoplus_{p,q=0}^n \Omega^{p,q}(X).
\end{equation}

\begin{prop}[Integrability versus type decompositions] \label{prop:integrability}
Suppose $(X,I)$ is an almost complex manifold. The following are equivalent:
\begin{itemize}
\item $I$ is integrable.
\item There is a decomposition
\begin{equation}
\de = \partial + \bar\partial, \quad \partial: \Omega^{p,q}(X) \to \Omega^{p+1,q}(X), \quad \bar\partial: \Omega^{p,q}(X) \to \Omega^{p,q+1}(X).
\end{equation}
\item The distribution $T^{0,1}X$ is integrable: if $v$, $w$ are
sections of $T^{0,1}X$ then $[v,w]$ is also a section of $T^{0,1}X$.
\end{itemize}
\end{prop}

Complex conjugation is an $\R$-linear map
$\Omega^{p,q}(X) \to \Omega^{q,p}(X)$;
thus it maps $\Omega^{p,p}(X)$ to itself;
we let $\Omega_\R^{p,p}(X)$ denote the fixed subspace.

\subsection{Holomorphic vector bundles}

In this section $(X,I)$ is always a complex manifold.

\begin{defn}[Holomorphic vector bundle] A \ti{holomorphic vector bundle} over $X$ is a complex vector bundle $E$ over $X$, equipped with an operator
\begin{equation}
  \bar\partial_E :  \Omega^{p,q}(E) \to \Omega^{p,q+1}(E)
\end{equation}
obeying
\begin{equation}
  \bar\partial_E (\alpha \psi) = (\bar\partial \alpha) \psi + (-1)^{\abs{\alpha}} \alpha \wedge \bar\partial_E \psi \qquad \alpha \in \Omega^*(X), \quad \psi \in \Omega^0(E)
\end{equation}
and the integrability condition
\begin{equation}
  \bar\partial_E^2 = 0.
\end{equation}
\end{defn}

It is useful to think of $\bar\partial_E$ as a kind of
partially-defined flat connection, which allows us to differentiate
only in the $(0,1)$ ``directions.''
The structure of holomorphic vector bundle is much
more rigid than that of a merely complex vector bundle.
We emphasize that this structure makes sense only when $X$ is
a complex manifold, while complex vector bundles make sense
over any $X$.

\begin{prop}[Equivalence of definitions of holomorphic vector bundle] A structure of holomorphic vector bundle on $E$ is equivalent to a maximal atlas
of preferred trivializations of $E$, such that
the transition maps
$U_\alpha \cap U_\beta \to GL(r,\C)$
are holomorphic.
\end{prop}
\begin{pf}
This is a sort of linear analogue of the
Newlander-Nirenberg theorem; for a proof see
\cite{MR1079726} Theorem 2.1.53, proven in Section 2.2.
\end{pf}

% \begin{example} The trivial bundle $X \times \C^r$
% carries a canonical holomorphic structure.
% \end{example}

\begin{example}[Tangent bundle as a holomorphic bundle] The tangent bundle $TX$ carries
a canonical structure of holomorphic vector bundle.
Indeed, the holomorphic charts $\phi_\alpha = (z_1, \dots, z_n)$
give rise to preferred trivializations corresponding
to the bases $\{\partial_{z_1}, \dots, \partial_{z_n} \}$
for $T^{1,0} X \simeq TX$, and the transition
maps are given by the Jacobian matrices
$(\partial z'_i / \partial z_j)_{i,j=1}^n$, which are holomorphic.
% It can be described as follows: for each coordinate
% chart $\phi_\alpha: U \to \C^n$, we get an isomorphism
% $\de \phi_\alpha: TU \to T \C^n$, and under this
% isomorphism $\bar\partial_{TX}$ is identified
% with the canonical holomorphic structure.
\end{example}

\begin{example}[Canonical bundle] The canonical line bundle over $X$
is defined by
\begin{equation}
  K_X = \wedge^n TX.
\end{equation}
It inherits a holomorphic structure from that of $TX$.
\end{example}

\begin{defn}[Connection compatible with holomorphic structure]
If $E$ is a holomorphic vector bundle over $X$,
a connection $D$ in $E$ is \ti{compatible with the
holomorphic structure} if, for all
$\psi \in \Omega^0(E)$, the $(0,1)$ part of $D \psi$
is $\bar\partial_E \psi$.
\end{defn}

\begin{defn}[Chern connection] \label{def:chern-connection}
If $E$ is a holomorphic vector bundle over $X$ with
a Hermitian metric $h$, the \ti{Chern connection}
in $E$ is the unique connection which is
$h$-unitary and compatible with the holomorphic
structure.
\end{defn}

\begin{exercise} Show that \autoref{def:chern-connection} makes
sense, i.e. that there indeed \ti{is} a unique
connection in $E$ with the claimed properties.
Relative to a local holomorphic trivialization, show
that $D = \de + A$,
where
\begin{equation} \label{eq:chern-connection-local-holomorphic}
  A = h^{-1} \partial h.
\end{equation}

\end{exercise}

\subsection{Hermitian and \kahler metrics}
Throughout this section $(X,I)$ is an almost complex manifold.

\begin{defn}[Hermitian metric on complex manifold] A Hermitian metric on
$(X,I)$ is a Riemannian metric $g$ obeying
$$ g(v,w) = g(Iv,Iw). $$
Equivalently, with respect to the decomposition
\begin{equation}
  \Sym^2 (T_\C X) = \Sym^{2,0} TX \oplus \Sym^{1,1} TX \oplus \Sym^{0,2} TX,
\end{equation}
we have $g \in \Sym^{1,1} TX$, i.e. $g$ is of ``type $(1,1)$.''
\end{defn}

\begin{defn}[Fundamental form] If $g$ is a Hermitian metric on $(X,I)$,
the \ti{fundamental form} $\omega \in \Omega^{1,1}_\R(X)$
is
\begin{equation}
  \omega(v,w) = g(Iv,w).
\end{equation}
\end{defn}

\begin{defn}[Positive form] If $\omega \in \Omega^{1,1}_\R(X)$,
$\omega$ is \ti{positive} if the symmetric pairing
\begin{equation}
   g(v,w) = \omega(v,Iw)
\end{equation}
is positive definite.
\end{defn}

Naturally, if $g$ is an honest Hermitian metric, then the
associated fundamental form is positive.

\begin{exercise} If $g$ is a Hermitian metric on $(X,I)$ check that
\begin{equation}
  {\mathrm {vol}}_g = \frac{\omega^n}{n!}
\end{equation}
\end{exercise}

The term ``Hermitian'' might seem confusing here since $g$ is just
an ordinary real-valued metric on the real vector bundle
$TX$. The following should help:

\begin{exercise} \label{exc:hermitian-metric}
If $g$ is a Hermitian metric on $(X,I)$,
verify that
\begin{equation}
  h = g - \I \omega
\end{equation}
defines a Hermitian metric
on the complex vector bundle $TX$.
(Our convention is that Hermitian metrics are
$\C$-linear in the \ti{first} slot.)
\end{exercise}

Let $\nabla$ denote the
Levi-Civita connection on $TX$ induced
by the metric $g$.

\begin{defn}[\kahler metric] If $g$ is a Hermitian metric
on $(X,I)$, we say $g$ is \ti{\kahler} if
\begin{equation}
  \nabla I = 0.
\end{equation}
Then $(X,g,I)$ is a \ti{\kahler manifold},
and $\omega$ is the \ti{\kahler form}.
\end{defn}

\begin{example}[Standard metric on $\C$ is \kahler]
Take $X=\C$ with coordinate $z = x + \I y$, $I$ the standard complex structure,
and $g$ the standard Riemannian metric, $g = \de x^2 + \de y^2$.
Evidently $\nabla I = 0$, so this is a \kahler metric.
The \kahler form is
\begin{equation}
  \omega = \de x \wedge \de y = \frac{\I}{2} \de z \wedge \de \bar{z}.
\end{equation}
\end{example}

The \kahler property has various useful alternative
characterizations:
% \begin{prop}[\kahler means covariant constancy of $I$]
% If $g$ is a Hermitian metric on $X$,
% $g$ is \kahler if and only if
% $\nabla I = 0$.
% \end{prop}

\begin{prop}[Characterizations of \kahler metrics] \label{cor:kahler-cc}
If $g$ is a Hermitian metric on $(X,I)$, with
fundamental form $\omega$, then the following are
equivalent:
\begin{enumerate}
  \item $g$ is \kahler,
  \item $\nabla I = 0$,
  \item $\nabla \omega = 0$,
  \item $I$ is integrable and $\nabla$ agrees with the Chern connection on $TX$,
  when we view $TX$ as a holomorphic vector bundle, with the induced Hermitian
  metric $h$ of \autoref{exc:hermitian-metric},
  \item $I$ is integrable and $\de \omega = 0$.
\end{enumerate}
\end{prop}

\begin{pf} As we defined \kahler we have
automatically $(1) \Leftrightarrow (2)$.
Using $\nabla g = 0$ we easily obtain $(2) \Leftrightarrow (3)$.
So all of $(1)$-$(3)$ are equivalent.

Now we consider $(4)$.
To show $(2)$ implies integrability of $I$,
note that for $v,w$ sections of $T^{0,1} X$ we have
(using the torsion-free property of $\nabla$ and
$\nabla I = 0$)
\begin{equation}
  I[v,w] = I(\nabla_v w - \nabla_w v) = \nabla_v(Iw) - \nabla_w(Iv) = -\I (\nabla_v w - \nabla_w v) = -\I [v,w],
\end{equation}
so by \autoref{prop:integrability} $I$ is
integrable. Also $(2)$ implies that
for $v \in TX$ and $w$ a section of $T^{1,0} X$
we have $I (\nabla_v w) = \nabla_v (Iw) = \I \nabla_v w$,
so that $\nabla_v w$ is also a section of $T^{1,0} X$;
this means $\nabla$ is compatible with the holomorphic
structure.
Finally $(2)+(3)$ implies $\nabla h = 0$.
So we have shown that $(2) \Rightarrow (4)$.
Conversely, we have easily $(4) \Rightarrow (3)$,
since $\omega$ is the imaginary part of $h$.
Thus, all of $(1)$-$(4)$ are equivalent.

Finally we consider $(5)$. We already showed that
$(2)$ implies integrability of $I$. Also
$(3)$ immediately implies $\de \omega = 0$.
Thus we have $(2)+(3) \Rightarrow (5)$.
All that remains is to see that $(5) \Rightarrow (4)$,
which is the most interesting part. This amounts to verifying
that the Chern connection is torsion-free (then it will have
to agree with $\nabla$, since $\nabla$ is the unique connection
in $TX$ which is torsion-free and has $\nabla g = 0$.) \fixme{...}
\end{pf}


In particular \autoref{cor:kahler-cc} implies that any complex
submanifold of a \kahler manifold is again \kahler. Combining this
with the fact that $\C\PP^n$ admits a \kahler metric
(Fubini-Study), we obtain a huge supply of examples.

\begin{prop}[Ricci form for \kahler manifold is
curvature of canonical bundle] \label{prop:ricci-form-canonical}
If $(X,I,g)$ is \kahler, the
Ricci form $R(v,w) = Ric(Iv,w)$ is equal to the curvature of the
induced Hermitian metric on the canonical line
bundle $K = \wedge^{n,0} T^*X$.
\end{prop}

Finally we quickly recall the notion of special holonomy. Recall that for any Riemannian metric $g$ the parallel transport of Levi-Civita preserves $g$, so that
for any $p \in X$ the holonomy group $Hol_\nabla(p) \subset GL(T_p X)$
is contained in the subgroup $O(g(p)) \simeq O(2n)$.
For a \kahler metric, \autoref{cor:kahler-cc} says
the parallel transport of Levi-Civita preserves the Hermitian metric
$h$ on the complex vector bundle $TX$. Thus, for any $p \in X$, the holonomy group
$Hol_\nabla(p) \subset GL(T_p X)$ is contained in the smaller group $U(h(p)) \simeq U(n)$.
Conversely, if $Hol_\nabla(p)$ is contained in some subgroup
isomorphic to $U(n)$ then it preserves some $h$, from
which one can prove:

\begin{prop}[Special holonomy of \kahler manifolds] Given any Riemannian metric $g$ on a manifold $M$ of dimension $2n$, $g$ is a \kahler metric
(for some complex structure $I$ on $M$) if and only if
the holonomy group at a point is contained in
a subgroup isomorphic to $U(n)$.
\end{prop}


\subsection{Hodge theory}

Here we recall the basic statements of (abelian) Hodge theory.
\fixme{refs}

\begin{defn}[de Rham cohomology] \label{def:de-rham}
Suppose $X$ is any manifold. Then we define
\begin{equation}
  H^{k}_{\dR}(X) = \frac{\im \de \cap \Omega^k(X)}{\ker \de \cap \Omega^k(X)}.
\end{equation}
\end{defn}

\begin{thm}[de Rham theorem for compact manifolds] \label{thm:de-rham}
If $X$ is compact, then there is a canonical isomorphism
\begin{equation}
  H^k_\dR(X) \simeq H^k(X,\R).
\end{equation}
\end{thm}

\begin{defn}[Formal adjoint of $\de$]
If $X$ is a Riemannian manifold of dimension $n$,
the formal adjoint of $\de$
is the operator
\begin{equation}
  \de^*: \Omega^{k}(X) \to \Omega^{k-1}(X)
\end{equation}
given by
\begin{equation}
  \de^* = (-1)^{n(k+1)+1} \star \de \star.
\end{equation}
\end{defn}

If $X$ is a compact Riemannian manifold, we have
the $L^2$ pairing on $\Omega^*(X)$ given by
\begin{equation}
  \IP{\alpha,\beta} = \int_X \IP{\alpha(x),\beta(x)} \, \de vol_X = \int_X \alpha \wedge \star \beta.
\end{equation}

\begin{lem}[Formal adjoint is actual adjoint on compact manifold]
If $X$ is a compact Riemannian manifold, $\de^*$ is the actual adjoint
with respect to the $L^2$ pairing, i.e.
\begin{equation}
  \IP{\de^* \alpha,\beta} = \IP{\alpha,\de \beta}.
\end{equation}
\end{lem}

\begin{defn}[Laplace operator on Riemannian manifold]
If $X$ is a Riemannian manifold, we define the form Laplacian
\begin{equation}
  \Delta: \Omega^k(X) \to \Omega^k(X)
\end{equation}
by
\begin{equation}
  \Delta = \de \de^* + \de^* \de.
\end{equation}
\end{defn}

\begin{defn}[Harmonic forms]
If $X$ is a Riemannian manifold, we define the space of
\ti{harmonic} forms as
\begin{equation}
  \cH(X) = \ker \Delta.
\end{equation}
It decomposes as $\cH(X) = \bigoplus_{k=0}^n \cH^k(X)$,
where $\cH^k(X) = \cH(X) \cap \Omega^k(X)$.
\end{defn}

\begin{prop}[Poincare duality for harmonic forms] \label{prop:poincare-duality}
Let $X$ be a Riemannian manifold of dimension $n$.
The Hodge star gives an isomorphism
\begin{equation}
  \star: \cH^k(X) \to \cH^{n-k}(X).
\end{equation}
If in addition $X$ is compact, then the pairing
\begin{equation}
	(\alpha,\beta) \mapsto \int_X \alpha \wedge \star \beta
\end{equation}
is nondegenerate, and thus gives an isomorphism
\begin{equation}
  \cH^k(X) \simeq \cH^k(X)^*
\end{equation}
Equivalently, the pairing
\begin{equation}
(\alpha, \beta) \mapsto \int_X \alpha \wedge \beta
\end{equation}
gives an isomorphism
\begin{equation}
	\cH^k(X) \simeq \cH^{n-k}(X)^*.
\end{equation}
\end{prop}

\begin{thm}[Abelian Hodge theory for compact Riemannian manifolds]
\label{thm:abelian-hodge-riemannian}
Let $X$ be a compact Riemannian manifold. Then:
\begin{itemize}
\item $\cH(X) = \ker \de \cap \ker \de^*$.
\item For any class
$[\alpha] \in H^k_\dR(X)$, there exists a unique harmonic
representative, $\alpha' \in [\alpha] \cap \cH^k(X)$.
\end{itemize}
\end{thm}

\begin{example}[Harmonic forms of degree $0$ or $n$] \label{exa:harmonic-forms-degree-0n}
If $X$ is any compact Riemannian manifold of dimension $n$,
then \autoref{thm:abelian-hodge-riemannian} says
$\cH^0(X) = \ker \de$, i.e. the only harmonic functions on a
compact manifold are constants. Then using
\autoref{prop:poincare-duality} we get dually that
$\cH^n(X)$ consists of all scalar multiples of the
Riemannian volume form on $X$.
\end{example}

\begin{defn}[Dolbeault cohomology] \label{def:dolbeault}
Let $X$ be a complex manifold. Then we define
\begin{equation}
  H^{p,q}_{\bar\partial}(X) = \frac{\im \bar\partial \cap \Omega^{p,q}(X)}{\ker \bar\partial \cap \Omega^{p,q}(X)}.
\end{equation}
\end{defn}

\begin{defn}[Formal adjoints of $\partial$, $\bar\partial$]
If $X$ is a complex manifold, the formal adjoints of
$\partial$ and $\bar\partial$ are
\begin{equation}
  \partial^*: \Omega^{p,q}(X) \to \Omega^{p-1,q}(X), \qquad \bar\partial^*: \Omega^{p,q}(X) \to \Omega^{p,q-1}(X)
\end{equation}
given by
\begin{equation}
\partial^* = - \star \bar\partial \star, \qquad \bar\partial^* = - \star \partial \star.
\end{equation}
\end{defn}

\begin{thm}[Abelian Hodge theorem for compact \kahler manifolds] \label{thm:abelian-hodge-kahler}
Let $X$ be a compact \kahler manifold of complex dimension $n$. Then:
\begin{itemize}
  \item $\cH_\C(X) = \ker \bar\partial \cap \ker \bar\partial^* = \ker \partial \cap \ker \partial^*$.
  \item If we define
  \begin{equation}
    \cH^{p,q}(X) = \cH_\C(X) \cap \Omega^{p,q}(X)
  \end{equation}
  then
  \begin{equation}
    \cH_\C(X) = \bigoplus_{p,q = 0}^n \cH^{p,q}(X).
  \end{equation}
  \item For any class $[\alpha] \in H^{p,q}_{\bar\partial}(X)$,
  there exists a unique harmonic representative, $\alpha' \in [\alpha] \cap \cH^{p,q}(X)$.
\end{itemize}
\end{thm}

\begin{prop}[Poincare duality for $\bar\partial$-cohomology] \label{prop:poincare-duality-delbar}
Let $X$ be a \kahler manifold of complex dimension $n$. Then
the Hodge star gives an isomorphism
\begin{equation}
  \star: \cH^{p,q}(X) \to \cH^{n-q,n-p}(X).
\end{equation}
If in addition $X$ is compact, then the Hermitian pairing
\begin{equation}
	(\alpha,\beta) \mapsto \int_X \alpha \wedge \star \bar\beta
\end{equation}
is nondegenerate, and thus gives an isomorphism
\begin{equation}
  \cH^{p,q}(X) \simeq \overline{\cH^{p,q}(X)}^*.
\end{equation}
Equivalently, the pairing
\begin{equation}
(\alpha, \beta) \mapsto \int_X \alpha \wedge \beta
\end{equation}
gives an isomorphism
\begin{equation}
	\cH^{p,q}(X) \simeq \cH^{n-q,n-p}(X)^*.
\end{equation}
\end{prop}

\begin{lem}[$\partial\bar\partial$-lemma] \label{lem:ddbar-lemma}
Suppose $X$ is a compact \kahler manifold, $\alpha \in \Omega^{p,q}(X)$
and $\de \alpha = 0$. Then the following are equivalent:
\begin{itemize}
  \item $\alpha \in \im \de$,
  \item $\alpha \in \im \partial$,
  \item $\alpha \in \im \bar\partial$,
  \item $\alpha \in \im \partial \bar\partial$.
\end{itemize}
If $\alpha \in \Omega^{p,p}_\R(X)$ then these are
also equivalent to
\begin{itemize}
  \item $\alpha \in \im \left(\I \partial \bar\partial: \Omega^{p-1,p-1}_\R(X) \to \Omega^{p,p}_\R(X)\right)$.
\end{itemize}
\end{lem}

Finally we remark that all of the above statements have analogues
when we consider forms valued in an auxiliary Hermitian vector
bundle $E$ carrying a flat connection $D$. \fixme{say a little more here?}

% \begin{defn}[Laplace operator coupled to a flat vector bundle]
% If $X$ is a Riemannian manifold and $E$ a Hermitian vector bundle over
% $X$ with flat connection $D$, we define a Laplacian
% \begin{equation}
%   \Delta_D: \Omega^k(E) \to \Omega^k(E)
% \end{equation}
% by
% \begin{equation}
%   \Delta_D = DD^* + D^* D.
% \end{equation}

% \end{defn}

\fixme{...}


\subsection{\kahler quotients}

\begin{defn}[Horizontal distribution]
Suppose $X$ is a Riemannian manifold, with a Lie group
$G$ acting freely on $X$.
The \ti{horizontal distribution} on $X$ is
\begin{equation}
  H = \{ \rho(Z): Z \in \fg \}^\perp \subset TX.
\end{equation}
\end{defn}

\begin{defn}[Induced metric on a quotient]
Suppose $X$ is a Riemannian manifold, with a compact group
$G$ acting freely on $X$ preserving $g$.
Using orthogonal projection we have
a canonical identification
\begin{equation}
  T(X/G) = TX / \rho(\fg) \simeq H.
\end{equation}
The \ti{induced metric} on $X/G$ is $g \vert_H$.
This is a Riemannian metric on $X/G$.
(Note that it is well defined
because $g$ is $G$-invariant.)
\end{defn}

\begin{prop}[Symplectic quotients of \kahler manifolds
are \kahler] \label{prop:kahler-quotients-are-kahler}
Suppose $X$ is a \kahler manifold, with a compact group
$G$ acting on $X$ preserving both $g$ and $I$ (thus it
also preserves $\omega$), with a moment map $\mu$,
and such that $G$ acts freely on $Y = \mu^{-1}(0)$.
Then the induced metric on the symplectic quotient $X \kq G$
is \kahler.
\end{prop}
\begin{pf} First we want to see that there is a natural
almost complex structure on $X \kq G$. The tangent space
$T(X \kq G)$ is
\begin{align}
  T(X \kq G) &= T(Y / G)  \\
  &= \{ \rho(Z): Z \in \fg \}^\perp \subset TY \\
  &=
  \left(\{ \grad \mu_Z: Z \in \fg \} \oplus \{ \rho(Z): Z \in \fg \}\right)^\perp \subset TX.
\end{align}
But
\begin{equation}
  g(\grad \mu_Z, v) = \de \mu_Z \cdot v = \omega(\rho(Z),v) = g(I \rho(Z), v)
\end{equation}
so
\begin{equation}
 \grad \mu_Z = I \rho(Z).
\end{equation}
Since $I$ acts orthogonally,
it follows that $T(X \kq G)$ is preserved by $I$.

Now we need to check that the Levi-Civita connection
$\nabla^{X \kq G}$ on $T(X \kq G)$ preserves $I$.
$\nabla^{X \kq G}$ can be obtained
by starting with the Levi-Civita connection $\nabla^X$, restricting
to a connection in $TX$ over $Y = \mu^{-1}(0)$, and then
projecting orthogonally to $T(X \kq G)$, i.e. for
$v,w \in \Vect(X \kq G) \subset \Vect(X)$,
\begin{equation}
\nabla_w^{X \kq G} (v) = \pi(\nabla_w^X v)
\end{equation}
(To see this, one needs to check that this formula indeed
gives a metric-compatible and torsion-free connection.) Then
the desired statement follows from the fact that $I$ is covariantly
constant for $\nabla^X$ and commutes with $\pi$.
\end{pf}

Infinitesimally what we have just done is to
identify $T(X \kq G)$ with the orthocomplement
of the space generated by
vectors $\rho(Z)$ and $I \rho(Z)$, for $Z \in \fg$.
There is another way of thinking about this:
these vector fields generate a copy of the \ti{complexified}
Lie algebra $\fg_\C$ inside of $\Vect(X)$.
So infinitesimally it looks as if we are
taking an ordinary quotient, but a quotient
by some complexification $G_\C$ rather than
the original $G$.
Thus we might dream that as complex manifolds we would have
\begin{equation}
  X \kq G = X / G_\C.
\end{equation}
If this were literally true it would give an ``easy'' way of thinking about
the complex structure on $X \kq G$.
But if we try to realize this dream literally, we will run into
problems, since there is no reason for the vector fields
$I \rho(Z)$ on $X$ to be complete: thus we cannot necessarily
integrate them to a group action.
Even if they are complete,
we can still have problems, because $G_\C$
is not a compact group, so $X / G_\C$
is not guaranteed to be a nice space.
The next example
explores this a bit.

\begin{example}[Projective space as a \kahler quotient]
Take $X = \C^n$ with its standard \kahler metric, for
which
\begin{equation}
\omega = \frac{\I}{2} \sum_i \de z_i \wedge \de \bar{z}_i.
\end{equation}
This $\omega$ is preserved by the $U(1)$ action simultaneously
rotating all $z_i$,
\begin{equation}
  z_i \mapsto e^{\I \alpha} z_i,
\end{equation}
with moment map (identifying $\fu(1) \simeq \R$ as usual)
\begin{equation}
  \mu = - \half \sum_{i=1}^n \abs{z_i}^2 + c,
\end{equation}
where $c \in \R$ is arbitrary.

Now we consider the symplectic quotient $X \kq U(1)$. If $c = 0$
then $U(1)$ does not act freely on $\mu^{-1}(0)$. If $c < 0$ then $0$
is a regular value, but in a trivial way: $\mu^{-1}(0)$ is empty.
The interesting case is $c > 0$, in which case
\begin{equation}
  \mu^{-1}(0) = \left\{ \sum \abs{z_i}^2 = 2c \right\} \simeq S^{2n-1}
\end{equation}
and dividing out by $U(1)$ gives (at least as a set) $\C\PP^{n-1}$.
\end{example}

\begin{exercise}
Check that the induced complex structure on $\C^n \kq U(1)$,
promised by \autoref{prop:kahler-quotients-are-kahler}, is indeed
the standard one on $\C\PP^{n-1}$. How does changing
the choice of $c$ change the \kahler structure?
\end{exercise}

Following the philosophy we just described, instead of taking
$\C^n \kq U(1)$ we could try to take $\C^n / \C^\times$.
This quotient is badly behaved (non-Hausdorff) as it stands, because of the
point $0 \in \C^n$, but we certainly do have
\begin{equation}
  (\C^n \setminus \{0\}) / \C^\times = \C\PP^{n-1} = \C^n \kq U(1).
\end{equation}
The ``explanation'' of this phenomenon is that each
$\C^\times$-orbit on $X$ meets $\mu^{-1}(0)$ in
exactly one $U(1)$-orbit,
except for the orbit $\{0\}$ which does not
meet $\mu^{-1}(0)$ at all, and thus must be thrown out
if we want to compare with $X \kq G$.

Now more generally, how should we compare $X \kq G$ and $X / G_\C$?
They would be equal if each $G_\C$-orbit met $\mu^{-1}(0)$
in a single $G$-orbit. At least, we can say that
each $G$-orbit $O$ in $\mu^{-1}(0)$ is contained in some $G_\C$-orbit $O_\C$,
and then we can ask: does $O_\C$ meet $\mu^{-1}(0)$ anywhere \ti{else}?
In many cases there is a convexity argument which shows
that this can't happen: namely one finds a $f$ on $G_\C / G$
such that the orbits in $\mu^{-1}(0)$ are
exactly the minima of this function, and moreover shows that $f$
is convex along geodesics in $G_\C / G$, so its minimum is unique
if it exists. So then at least we have
$X \kq G \subset X / G_\C$. The remaining question is whether there might
be some orbits which don't meet $\mu^{-1}(0)$ at all. Generally there are
(like the orbit of $0 \in \C^n$ above);
these are the \ti{unstable} orbits in $X / G_\C$, which need to be
thrown out; after restricting to their complement $X^s$, we finally get
the desired
\begin{equation}
  X \kq G \simeq X^s / G_\C.
\end{equation}


\subsection{Holomorphic symplectic manifolds}

\begin{defn}[Holomorphic symplectic form] If $(X,I)$ is a complex manifold,
$\Omega \in \Omega^{2,0}(X)$ is a \ti{holomorphic
symplectic form} if $\de \Omega = 0$
and $\Omega$ is nondegenerate
in the holomorphic sense, i.e. it induces
an isomorphism $T^{1,0}X \to (T^{1,0} X)^*$.
In this case we call $(X,I,\Omega)$ a \ti{holomorphic symplectic
manifold}.
\end{defn}
Note that this definitely does \ti{not} mean that $\Omega$ is nondegenerate on the whole $T_\C X$. Indeed, since $\Omega$ is
of type $(2,0)$ its contraction with any $v \in T^{0,1} X$ vanishes.

Morally you should think of a holomorphic symplectic form $\Omega$
as something like the analytic continuation of a real
symplectic form from some real subspace of $X$.

\begin{prop}[Holomorphic symplectic manifolds have dimension $4n$]
\label{prop:hol-symp-dimension-4n} If $(X,I,\Omega)$ is a holomorphic symplectic manifold,
then $\dim_\R X$ is a multiple of $4$.
\end{prop}
\begin{pf} The holomorphic symplectic form $\Omega$ restricts to a nondegenerate form on each fiber of the complex vector
bundle $T^{1,0} X$.
Using \autoref{prop:standard-nondegenerate-skew-pairing}, it follows
that $T^{1,0} X$ has even complex dimension.
\end{pf}

Actually much more is true:
locally $X$ admits holomorphic ``Darboux'' coordinate systems
$(p_1, \dots, p_n, q_1, \dots, q_n)$
such that $\Omega = \sum_{i=1}^n \de p_i \wedge \de q_i$.

\begin{prop}[Holomorphic symplectic form determines complex structure] \label{prop:hol-symp-to-complex}
Suppose $X$ is a manifold with $\dim_\R X = 2n$,
with $\Omega \in \Omega^2_\C(X)$, such that $\de \Omega = 0$ and
\begin{equation}
 T_\C X = \ker \Omega \oplus \ker \overline\Omega.
\end{equation}
Then there is a
unique complex structure $I$ on $X$ for which $\Omega$
is a holomorphic symplectic form.
\end{prop}
\begin{pf} We define a complex-linear operator
$I_\C$ on $T_\C X$ to act by $-\I$ on
$\ker \Omega$, and by $+\I$ on $\ker \overline\Omega$.
This $I_\C$ obeys $I_\C v = \overline{I_\C \bar{v}}$, so it is the
complexification of a real-linear operator $I$ on $TX$,
which gives an almost complex structure.
The integrability of $I$ is equivalent to requiring
that $T^{0,1} X = \ker \Omega$ is an integrable distribution,
i.e. that if $v,w$ are sections of $\ker \Omega$ then $[v,w]$
is also a section of $\ker \Omega$.
This follows from $\de \Omega = 0$ and the covariant formula
for $\de$: for any third vector field $y$ we have
\begin{equation}
  \de \Omega(v,w,y) = v \Omega(w,y) + w \Omega(y,v) + y \Omega(v,w)
  - \Omega([v,w],y) - \Omega([y,v],w) - \Omega([w,y],v)
\end{equation}
and now all terms vanish except the one we want:
\begin{equation}
  0 = -\Omega([v,w],y)
\end{equation}
so $[v,w]$ is a section of $\ker \Omega$ as desired.
\end{pf}



\section{Hyperk\"ahler manifolds}

Useful (and inspiring) references are \cite{MR88f:53087,Hitchin-hk,MR1798605,boalch-notes}.

\subsection{Basic definitions}

\begin{defn}[\Hk manifold] A \ti{\hk manifold} is
a tuple $(X,g,I_1,I_2,I_3)$, where $(X,g)$ is a Riemannian
manifold equipped with three complex
structures $I_i$ obeying $I_1 I_2 = I_3$,
such that $(X,g,I_i)$ is \kahler for $i=1,2,3$.
\end{defn}

It is crucial that we require the \ti{single} metric
$g$ to be \kahler for \ti{all} of the $I_i$:
this is a very strong condition!
We denote the three corresponding
\kahler forms $\omega_i$.
Sometimes it is convenient to use instead the
notation $(I_1,I_2,I_3) = (I,J,K)$
and $(\omega_1,\omega_2,\omega_3) = (\omega_I,\omega_J,\omega_K)$.

\begin{exercise} Show that the relations $I_1 I_2 = I_3$ and $I_1^2 = I_2^2 = I_3^2 = -1$ are equivalent to the full set of quaternion relations
\begin{gather}
  I_1 I_2 = I_3, \quad I_2 I_1 = - I_3, \\
  I_2 I_3 = I_1, \quad I_3 I_2 = - I_1, \\
  I_3 I_1 = I_2, \quad I_1 I_3 = - I_2, \\
  I_1^2 = I_2^2 = I_3^2 = -1.
\end{gather}
\end{exercise}

\begin{prop}[\Hk manifolds are holomorphic symplectic] \label{prop:hyperkahler-is-hol-symplectic}
If $X$ is \hk then $\Omega_1 = \omega_2 + \I \omega_3$ is a \ti{holomorphic symplectic form} with respect to structure $I_1$ (and similarly with the indices
$1,2,3$ cyclically permuted.)
\end{prop}
\begin{pf}
\begin{align}
    \Omega_1(v,w) &= \omega_2(v,w) + \I \omega_3(v,w) \\
    &= g(I_2 v,w) + \I g(I_3 v,w)
\end{align}
Thus
\begin{align}
    \Omega_1(I_1 v,w) &= g(I_2 I_1 v, w) + \I g(I_3 I_1 v,w) \\
    &= -g(I_3 v, w) + \I g(I_2 v, w) \\
    &= \I \Omega_1(v,w)
\end{align}
and similarly
\begin{equation}
 \Omega_1(v,I_1 w) = \I \Omega_1(v,w).
\end{equation}
It follows that $\Omega_1$ is of type $(2,0)$ for $I_1$,
$\Omega_1 \in \Omega^{2,0}_{I_1}(X)$.
The nondegeneracy follows from the nondegeneracy for the $\omega_i$: namely, for any $v \in T^{1,0}_{I_1} X$,
\begin{equation}
  \Omega_1(v,\cdot) = 0 \implies \Omega_1(v+\bar{v}, \cdot) = 0 \implies \omega_2(v + \bar{v}, \cdot) = 0 \implies v + \bar{v} = 0 \implies v = 0.
\end{equation}
The remaining claims are obtained by cyclic permutations.
\end{pf}

\begin{cor}[\Hk manifolds have dimension $4n$] If $X$ is \hk then $\dim_\R X$ is a multiple of $4$.
\end{cor}
\begin{pf} This follows directly from \autoref{prop:hol-symp-dimension-4n}.
\end{pf}

\begin{prop}[Explicit formula for the complex structures on a
\hk manifold in terms of $\omega_i$]
If $X$ is \hk then
\begin{equation}
I_1 = \omega_3^{-1} \omega_2
\end{equation}
and cyclic permutations.
(What this formula really means: view $\omega_2$ as a map $TX \to T^* X$
namely $v \mapsto \omega_2(v,\cdot)$,
and $\omega_3^{-1}$ as a map $T^* X \to TX$
namely $\omega_3(v,\cdot) \mapsto v$; then the composition
$\omega_3^{-1} \omega_2: TX \to TX$ is $I_1$.)
\end{prop}
\begin{pf}
What we have to check is that $\omega_3(I_1 v,\cdot) = \omega_2(v,\cdot)$.
But
\begin{equation}
 \omega_3(I_1 v,\cdot) = g(I_3 I_1 v,\cdot) = g(I_2 v, \cdot) = \omega_2(v,\cdot)
\end{equation}
as desired.
\end{pf}

\begin{cor}[The $\omega_i$ determine the \hk metric]
If $X$ is \hk then
\begin{equation}
g = -\omega_1 \omega_3^{-1} \omega_2
\end{equation}
and cyclic permutations.
(Here similarly we view $g$ as a map $TX \to T^*X$,
namely $v \mapsto g(v,\cdot)$.)
\end{cor}

\begin{prop}[Condition for forms $\omega_i$ to give a \hk metric] \label{prop:omega-hk-condition}
Suppose $X$ is a manifold with symplectic forms
$\omega_1, \omega_2, \omega_3$, obeying the condition that
\begin{equation}
-\omega_1 \omega_3^{-1} \omega_2 = -\omega_2 \omega_1^{-1} \omega_3 = -\omega_3 \omega_2^{-1} \omega_1,
\end{equation}
and that this quantity, $g$,
is \ti{positive definite} as a symmetric bilinear form.
Then $g$ is a \hk metric on $X$,
with $\omega_i$ the associated \kahler forms.
\end{prop}
\begin{pf} \fixme{...}
\end{pf}

\begin{exercise}
Suppose $(X,g,I_1,I_2,I_3)$ is a \hk manifold. Fix any $\vec s = (s_1,s_2,s_3) \in S^2 \subset \R^3$, and set
\begin{equation}
  I_{\vec s} = \sum_{i=1}^3 s_i I_i, \qquad \omega_{\vec s} = \sum_{i=1}^3 s_i \omega_i.
\end{equation}
Show that $(X,I_{\vec s},g)$ is a \kahler manifold,
with \kahler form $\omega_{\vec s}$.
\end{exercise}
In other words, a \hk metric is \kahler for a whole
$S^2$ of complex structures, not only three of them.
We can think of this $S^2$ as the
set of norm-$1$ imaginary quaternions.
Specifying $I_1$, $I_2$, $I_3$ is equivalent to
specifying the whole collection of $I_{\vec s}$.

Note that the antipodal map acts in a simple way:
$I_{-\vec s} = - I_{\vec s}$, the opposite
complex structure of $I_{\vec s}$ --- i.e.
the antipodal map exchanges holomorphic and antiholomorphic.

\begin{exercise}
Given a Riemannian manifold $(X,g)$ and
a \hk structure thereon, specified by complex structures
$I_{\vec s}$, show that we get another
\hk structure by choosing an element $T \in SO(3)$
and defining
\begin{equation}
I'_{\vec s} = I_{T \vec s}.
\end{equation}
Thus $SO(3)$ naturally acts on the set of
\hk manifolds.
\end{exercise}


\subsection{First examples}

\begin{example}[Flat quaternionic space] \label{exa:R4}
Being a real vector space, $\bbH$ is
a manifold of real dimension $4$.
If we identify $T_p \bbH \simeq \bbH$ in the obvious way,
the quaternion norm $\norm{q}^2 = q \bar{q}$
induces a metric $g$ on $\bbH$.
The operations of left-multiplication by $\I$, $\J$ and $\K$
give complex structures $I_1$, $I_2$, $I_3$ on $\bbH$,
obeying the quaternion algebra.
Evidently these are all covariantly constant, so
$g$ is \kahler for all three of these complex
structures, and thus $\bbH$ is \hk.

To introduce coordinates we
identify $\bbH$ with $\R^4$
via the map
\begin{equation}
  x_0 + x_1 \I + x_2 \J + x_3 \K \mapsto (x_0,x_1,x_2,x_3).
\end{equation}

Then the symplectic forms are
\begin{align}
  \omega_1 &= \de x_0 \wedge \de x_1 + \de x_2 \wedge \de x_3, \\
  \omega_2 &= \de x_0 \wedge \de x_2 + \de x_3 \wedge \de x_1, \\
  \omega_3 &= \de x_0 \wedge \de x_3 + \de x_1 \wedge \de x_2,
\end{align}
or more uniformly
\begin{equation} \label{eq:symplectic-forms-R4}
  \omega_i = \de x_0 \wedge \de x_i + \star \de x_i
\end{equation}
where $\star$ denotes the Hodge star of $\R^3$ (with its
standard orientation), not $\R^4$.
The holomorphic symplectic form is
\begin{equation}
  \Omega_1 = \omega_2 + \I \omega_3 = \de w_1 \wedge \de z_1, \qquad w_1 = x_0 + \I x_1, \qquad z_1 = x_2 + \I x_3.
\end{equation}
$w_1$ and $z_1$ are complex coordinates with respect to $I_1$.
Thus, in structure $I_1$, $\bbH$ is biholomorphic to $\C^2$.
Similarly we can write
\begin{equation} \label{eq:Omega-i-R4}
  \Omega_i = \omega_{i+1} + \I \omega_{i+2} = \de w_i \wedge \de z_i, \qquad w_i = x_0 + \I x_i, \qquad z_i = x_{i+1} + \I x_{i+2}
\end{equation}
(where we adopt the convention $x_{i+3} = x_i$.)

All this generalizes in a straightforward way to $\bbH^n$
or better, an affine space modeled on $\bbH^n$, or even
better, an affine space modeled on a quaternionic vector space.
\end{example}

\begin{exercise} \label{exc:flat-space-computing}
Verify the explicit formulas \eqref{eq:symplectic-forms-R4}
for the symplectic forms $\omega_i$ on $\bbH$, and write a
formula for $\omega_{\vec s}$.
\end{exercise}

$\bbH$ has a lot of symmetry. For example, $\bbH$ acts
on itself by translations preserving the \hk structure.
Also the group $O(4)$ acts on $\bbH$ by isometries, but
these do \ti{not} generally preserve the \hk structure.
However, we do have the following. The
unit sphere in ${\mathbb H}$ is a Lie group,
which happens to be isomorphic to $SU(2)$.\footnote{The isomorphism
can be given explicitly by the formula
\begin{equation} \label{eq:quaternions-into-su2}
  x_0 + x_1 \I + x_2 \J + x_3 \K \mapsto \begin{pmatrix} x_0+x_1\I & x_2+x_3\I \\ -x_2+x_3\I & x_0-x_1\I \end{pmatrix}
\end{equation}
but we will not need to use this anywhere.}
Thus we have an action of $SU(2) \times SU(2)$
on ${\mathbb H}$ by
\begin{equation}
  (q, q') \cdot x = q x q'^{-1}.
\end{equation}
This gives a map $SU(2) \times SU(2) \to SO(4)$.
Said otherwise, $O(4)$ has two canonical $SU(2)$ subgroups,
which we call $SU(2)_L$ and $SU(2)_R$ (for ``left'' and ``right.'')
(Incidentally, this map has kernel $\{(1,1),(-1,-1)\} \simeq \Z_2$,
thus gives an isomorphism $SO(4) \simeq (SU(2) \times SU(2)) / \Z_2$.)

\begin{exercise} \label{exc:su2r-action}
Show that $SU(2)_R$ acts on $\bbH$ by \ti{triholomorphic}
isometries, i.e. isometries which are holomorphic for
all of $I_1$, $I_2$, and $I_3$.
\end{exercise}

\begin{exercise} \label{exc:su2l-action}
Show that the action of $T \in SU(2)_L$ on $\bbH$ has
\begin{equation}
  T^* I_{\vec s} = I_{T \vec s}
\end{equation}
On the right side, by $T \vec s$ we mean the \ti{conjugation}
action of the unit quaternion $T$ on the sphere of norm-$1$
imaginary quaternions, $\vec s \mapsto T^{-1} {\vec s} T$
(which gives the standard double-covering $SU(2) \to SO(3)$.)
\end{exercise}

\begin{exercise}
Show that in any complex structure
$I_{\vec s}$, $\bbH$ is biholomorphic
to $\C^2$.
\end{exercise}

\begin{example}[Quotients of $\bbH$] \label{exa:H-quotients}
It follows from \autoref{exc:su2r-action} that, if we choose a subgroup
$\Gamma \subset SU(2)_R$, the quotient
$\bbH / \Gamma$ is a \hk orbifold: in particular, it
carries a natural \hk structure
on the locus where it is a manifold. For example,
if $\Gamma$ is a discrete subgroup, it acts
freely away from the origin, so
\begin{equation}
X_\Gamma^\circ = (\bbH \setminus \{0\}) / \Gamma
\end{equation}
is a \hk manifold.
However, this \hk manifold is \ti{incomplete},
since the origin is at finite distance.
\end{example}

\insfig{higgs-bundles-4}{0.65}

\begin{example}[$\R^3 \times S^1$] \label{exa:R3S1}
Since translations preserve the \hk structure, we can divide $\bbH$
out by $\Z$ acting by translations
\begin{equation}
 x_0 \to x_0 + 2 \pi n
\end{equation}
to get another \hk manifold,
\begin{equation}
 X = \bbH / \Z \simeq \R^3 \times S^1.
\end{equation}
In structure $I_1$ we have
\begin{equation}
  \Omega_1 = -\I \frac{\de \cX_1}{\cX_1} \wedge \de z_1, \qquad \cX_1 = \exp(\I(x_0 + \I x_1)), \qquad z_1 = x_2 + \I x_3
\end{equation}
The functions $(z_1,\cX_1)$ make $(X,I_1)$
biholomorphic to $\C \times \C^\times$.
\end{example}

\begin{exercise}
Show that $SO(3)$ acts by isometries on $X = \bbH / \Z$,
with
\begin{equation}
  T^* I_{\vec s} = I_{T \vec s}.
\end{equation}
\end{exercise}

\begin{exercise}
Show that for any $\vec s$, $X = \bbH / \Z$ with complex structure
$I_{\vec s}$ is biholomorphic to $\C \times \C^\times$.
\end{exercise}

Crudely speaking, the different complex structures
$I_{\vec s}$ correspond to different ways of picking which
direction in $\R^3$ will get
paired up with the circle direction to make a $\C^\times$.

\begin{example}[Incomplete Gibbons-Hawking spaces] \label{exa:incomplete-gibbons-hawking}
Now we generalize from $\R^3 \times S^1$ to a more general
\hk space with $U(1)$ action. We begin with the case of
a \ti{free} action, i.e. a principal
$U(1)$ bundle.

Fix some open set $U \subset \R^3$ and
let $V: U \to \R_{>0}$ be a positive harmonic function.\footnote{Our
conventions for the Laplace operator on $\Omega^0(\R^3)$ are:
$\Delta f = \de \star \de f = \sum_i \partial_i^2 f \, \de \vol$.}
Then $\Delta V = \de \star \de V = 0$, so if we write
\begin{equation}
  F = -2 \pi \star \de V
\end{equation}
then we have $\de F = 0$.

Fix a principal $U(1)$ bundle $X$ over $U$, carrying a connection
$\Theta$ whose curvature is $F$.
(Such an $X$ exists if and only if $[F/2\pi]$ lies in
the image of $H^2(U,\Z) \to H^2_{\dR}(U,\R)$.)
Globally this means a 1-form $\Theta$ on $X$
such that $\de \Theta = F$ (more precisely on the RHS we have
the pullback of $F$ to $X$) and $\Theta \cdot \partial_\chi = 1$,
where $\partial_\chi$ denotes the vector field on $X$
generating the $U(1)$ action. If we choose a local
trivialization of the $U(1)$-bundle $X$ over a patch
$U_\alpha \subset U$, with local
fiber coordinate $\chi_{\alpha} \in \R / 2 \pi \Z$, then $\Theta$
is locally of the form
\begin{equation}
 \Theta = A_\alpha + \de \chi_{\alpha},
\end{equation}
with $A_\alpha \in \Omega^1(U_\alpha)$, $\de A_\alpha = F$.
\newcommand{\tTheta}{\tilde\Theta}
For convenience write $\tTheta = \Theta / 2\pi$.

We introduce three symplectic forms on $X$,
generalizing \eqref{eq:symplectic-forms-R4}:
\begin{equation}
  \omega_i = \tTheta \wedge \de x_i + V \star \de x_i.
\end{equation}
To check that these are indeed closed,
\begin{equation}
  \de \omega_i = - \star \de V \wedge \de x_i + \de V \wedge \star \de x_i = 0
\end{equation}
(the last equality because all of these forms are pulled back
from $\R^3$, and on $\R^3$ we always have $\star \alpha \wedge \beta = \alpha \wedge \star \beta$ for 1-forms $\alpha, \beta$.)

Then define
\begin{align}
  \Omega_1 &= \omega_2 + \I \omega_3 \\
  &= \tTheta \wedge \de z_1 +  V \star \de(x_2 + \I x_3)\\
  &= \tTheta \wedge \de z_1 +  V (\de x_3 \wedge \de x_1 + \I \de x_1 \wedge \de x_2)\\
  &= \tTheta \wedge \de z_1 + \I V \de x_1 \wedge \de z_1 \\
  &= V \alpha_1 \wedge \de z_1
\end{align}
where we introduced
\begin{equation} \label{eq:hol-forms-GH}
  z_1 = x_2 + \I x_3, \qquad
  \alpha_1 = V^{-1} \tTheta + \I \de x_1.
\end{equation}
Then $\ker \Omega_1$ is spanned by
\begin{equation} \label{eq:gibbons-hawking-01-vectors}
 \hat\partial_2 + \I \hat\partial_3, \qquad 2 \pi V \partial_\chi + \I \hat\partial_1,
\end{equation}
 where $\partial_\chi$
is the globally defined generator of the $U(1)$ action
(shifting $\chi$),  and $\hat \partial_i$ means
the parallel lift of $\partial_i$ from $\R^3$ to $X$, i.e. the lift
obeying $\Theta \cdot \hat\partial_i = 0$. Thus
by \autoref{prop:hol-symp-to-complex}, $\Omega_1$
determines a complex structure $I_1$ on $X$, which acts
by $+\I$ on $\de z_1$ and $\alpha_1$.
In this structure, $\de z_1$ is of type $(1,0)$, so
$z_1$ is a holomorphic map,
\begin{equation}
  z_1: X \to \C.
\end{equation}

Morally this map makes $X$ into something like
a $\C^\times$-bundle over a patch of $\C$ (generalizing
the $\C\times\C^\times$ which we got in \autoref{exa:R3S1}).
It is not quite a $\C^\times$-bundle in general
(since $U$ was an arbitrary open subset of $\R^3$),
but it does at least have
a holomorphic vector field tangent to the fibers,
$\partial_\chi - \I V^{-1} \hat \partial_1$.

Similarly we have
\begin{equation} \label{eq:Omega-i-GH}
  \Omega_i = V \alpha_i \wedge \de z_i
\end{equation}
where
\begin{equation} \label{eq:Omega-i-GH-2}
  z_i = x_{i+1} + \I x_{i+2}, \qquad \alpha_i = V^{-1} \tTheta + \I \de x_i
\end{equation}
and we can use this to define complex structures $I_2$, $I_3$.
Just as for $\R^3 \times S^1$ these obey the quaternion
relation $I_1 I_2 = I_3$ --- we could check this directly,
or just note that pointwise \eqref{eq:Omega-i-GH}-\eqref{eq:Omega-i-GH-2}
are isomorphic to \eqref{eq:Omega-i-R4}
(take $\de x_i \to \sqrt{V} \de x_i$ and $\de x_0 \to \tTheta / \sqrt{V}$),
and the $\Omega_i$ determine the $I_i$ by pointwise calculations,
so they must obey the same relations they obeyed on $\R^4$.

Now we compute $g$ from $I_1$ and $\omega_1$:
\begin{equation}
  \omega_1 = V \re \alpha_1 \wedge \im \alpha_1 + V \re \de z_1 \wedge \im \de z_1
\end{equation}
which gives
\begin{align}
  g &= V ((\re \alpha_1)^2 + (\im \alpha_1)^2) + V ((\re \de z_1)^2 + (\im \de z_1)^2) \\
  &= V (V^{-2} \tTheta^2 + \de x_1^2) + V (\de x_2^2 + \de x_3^2) \\
  &= V \norm{\de x}^2 + V^{-1} \tTheta^2
\end{align}
% Note that the explicit index $1$ has disappeared from this formula;
% if we had computed $g$ from $I_2$ and $\omega_2$, or
% from $I_3$ and $\omega_3$, we would get the same result.
Thus the metric on $X$ given by
\begin{equation} \label{eq:gibbons-hawking-metric}
  g = V \norm{\de x}^2 + V^{-1} \tTheta^2
\end{equation}
is \hk, with \kahler forms $\omega_i$.

The principal $U(1)$ action on $X$ is by isometries preserving
the \hk structure (this is clear since nothing in $\omega_i$
depends on the fiber coordinates).
\end{example}

\begin{exercise} \label{exc:preimages-of-lines}
Let $L$ be a line in $U$, oriented
in the direction $\vec s = (1,0,0)$.
Show that $\pi^{-1}(L)$ is a complex submanifold of $X$
in the complex structure $I_1$. (Hint: it's sufficient
to show that the holomorphic symplectic form $\Omega_1$ vanishes
along this submanifold --- why?) If $U = \R^3$ and $V=1$,
describe this complex submanifold explicitly in complex coordinates.
\end{exercise}

\begin{example}[$\R^4 \setminus \{ 0 \}$ as an incomplete Gibbons-Hawking space] \label{exa:gibbons-hawking-R4}
Consider \autoref{exa:incomplete-gibbons-hawking} with
$U = \R^3 \setminus \{0\}$. In spherical coordinates
$(r,\theta,\varphi)$ take\footnote{Our conventions
for spherical coordinates are:
\begin{align}
x_1 &= r \cos \theta, \\
x_2 &= r \sin \theta \cos \phi, \\
x_3 &= r \sin \theta \sin \phi.
\end{align}
}
\begin{equation}
 V(x) = \frac{1}{4\pi r}.
\end{equation}
Then we have
\begin{equation}
 F = \half \sin \theta \, \de \theta \wedge \de \varphi
\end{equation}
which has $\int_{S^2} \frac{F}{2\pi} = 1$ and thus obeys our
quantization condition, so that there exists a circle bundle
$X \to U$ with this curvature. The total space of such a
circle bundle over $S^2$ is the Hopf fibration $S^3 \to S^2$.

$X$ thus doesn't extend as a $U(1)$ bundle
over the point $x = 0$.
Nevertheless it \ti{does} extend as a \hk manifold.
Indeed, near $0$ the circle fibers of $X$ are shrinking to zero
length, and it is possible to add
a single point over $0$, in such a way
that the total space is a \hk manifold with non-free
$U(1)$ action, and the quotient is $\R^3$.
To see this explicitly, let's fix a trivialization away
from $\theta = \pi$, with respect to
which $\Theta = A + \de \chi$,
\begin{equation}
  A = \half(1 - \cos \theta) \, \de \varphi.
\end{equation}

Now we have
\begin{align}
  g &= \frac{1}{4 \pi r} (\de r^2 + r^2 \de \theta^2 + r^2 \sin^2 \theta \de \varphi^2) + \frac{r}{\pi} \left(\half (1-\cos \theta) \de \varphi + \de \chi\right)^2 \\
%  &= \frac{1}{4 \pi r} \de r^2 + \frac{r}{4 \pi} (\de \theta^2 + \sin^2 \theta \de \varphi^2 + ((1 - \cos \theta) \de \varphi + 2 \de \chi)^2) \\
  &= \frac{1}{4 \pi r} \de r^2 + \frac{r}{\pi} \left(\qtr \de \theta^2 + \half(1-\cos\theta) \de \varphi^2 + \de \chi^2 + (1-\cos \theta) \de \varphi \de \chi\right).
\end{align}
Now the surprise is that the second part is just the round
metric on $S^3$ with radius $\rho = \sqrt{r/\pi}$,
and the whole $g$ is isometric to
the Euclidean metric on $\R^4 \setminus \{0\}$.
To see this explicitly take
\begin{align}
  y_0 &= \sqrt{r/\pi} \sin(\theta/2) \cos\left(\varphi + \chi\right), \\
  y_1 &= \sqrt{r/\pi} \sin(\theta/2) \sin\left(\varphi + \chi\right), \\
  y_2 &= -\sqrt{r/\pi} \cos(\theta/2) \sin\left(\chi\right), \\
  y_3 &= -\sqrt{r/\pi} \cos(\theta/2) \cos\left(\chi\right),
\end{align}
and then compute directly that
\begin{equation}
  g = \sum_{i=0}^3 \de y_i^2.
\end{equation}
\end{example}

\begin{exercise} \label{exc:gibbons-hawking-R4}
Show that the \hk structure on $X$ in
\autoref{exa:gibbons-hawking-R4} matches the standard one
in $\R^4 \setminus \{0\}$, given in \autoref{exa:R4}.
This means that $X$ can be extended to a
complete \hk manifold $\bar X$, on which $U(1)$ acts
by isometries with a single fixed point,
and $\bar X / U(1) = \R^3$. In other words, starting
from $X$ we can ``fill in the missing fiber over $0$''
in a smooth \hk way, and the resulting \hk manifold
is isomorphic to $\R^4$ with its standard \hk structure.
\end{exercise}

In particular, complex structure $I_1$ on $X$ has
holomorphic coordinates $w_1 = y_0 + \I y_1$ and $z_1 = y_2 + \I y_3$.
Thus the loci $z_1 = 0$ and $w_1 = 0$ are complex submanifolds of
$I_1$, intersecting at a single point.
These correspond to $\theta = 0$ and $\theta = \pi$,
i.e. the preimages in $X$ of the two half-lines $x_2 = x_3 = 0$, $\pm x_1 \ge 0$.
(From Exercise \ref{exc:preimages-of-lines} we already knew that
the preimage of the half-line is a complex manifold, \ti{except} at the
point over $x = 0$. The discussion above shows that it actually extends
to an honest complex manifold even over $x=0$.)

\insfig{higgs-bundles-6}{0.9}

There is a more conceptual way of arriving at \autoref{exa:gibbons-hawking-R4}:

\begin{exercise} \label{exc:R4-moment-maps}
Consider again the standard \hk structure on $\R^4$
(\autoref{exa:R4}), which is acted on by $SU(2)_R$.
Show that there is a subgroup $U(1) \subset SU(2)_R$ which acts
by $(w_1,z_1) \to (e^{-\I \alpha} w_1, e^{\I\alpha} z_1)$.
Thus this action preserves the \hk structure.
Moreover show that this action admits moment maps
$\mu_i: \R^4 \to \fu(1)^*$ with
respect to all of the $\omega_i$.
If we identify $\fu(1) \simeq \R$, we obtain a map $\vec\mu: \R^4 \to \R^3$ given by
$(\mu_1, \mu_2, \mu_3)$. Show that there is exactly one $x \in \R^3$
such that $\vec\mu^{-1}(x)$ is a single point;
by shifting each $\mu_i$ by a constant we can arrange
that this point is $0 \in \R^3$. Then show that
the map $\vec\mu$ realizes
$\R^4 \setminus \{0\}$ as a principal $U(1)$ bundle
over $\R^3 \setminus \{0\}$,
and that the metric is of the form in \autoref{exa:gibbons-hawking-R4}.
(Hint: at some points it is convenient to consider the complex combination
$\mu_2 + \I \mu_3$, which is a moment map for the holomorphic symplectic
form $\Omega_1$.)
\end{exercise}

% This was also true of $\bbH$ of course
% (\autoref{exc:flat-space-computing}); nevertheless, Taub-NUT space
% and $\bbH$ are definitely not the same \hk manifold!
% Thus there is more information in the \hk structure than
% in the set of complex manifolds one obtains by specializing.

\begin{example}[$(\R^4 / \Z_k) \setminus \{0\}$ as an incomplete Gibbons-Hawking space]
\label{exa:gibbons-hawking-R4Zk}
We can modify \autoref{exa:gibbons-hawking-R4} by taking some
integer $k>0$ and setting
\begin{equation}
  V = \frac{k}{4 \pi r}.
\end{equation}
Then the metric \eqref{eq:gibbons-hawking-metric} (divided by $k$)
matches with that of \autoref{exa:gibbons-hawking-R4} except that
the circumference of the circle fibers is shorter by a factor of $k$.
In other words, this metric is obtained by dividing
out the metric of $\R^4 / \{ 0 \}$ by a subgroup
$\Z_k \subset U(1)$. In turn this $U(1) \subset SU(2)_R$, so this is a special case of the quotients
described in \autoref{exa:H-quotients}. Unlike the case $k=1$, here we \ti{cannot}
fill in the missing point to make a manifold (if we could, we would have a
point whose link is the lens space $S^3 / \Z_k$.)
\end{example}

Finally we are ready to use this technology to
produce some really interesting complete \hk spaces.
There are no
nonconstant positive harmonic functions on the full $\R^3$.\footnote{
This is trickier than I thought, but there is a proof
at \tt\href{http://math.stackexchange.com/questions/561818}{http://math.stackexchange.com/questions/561818}.
}
Thus \autoref{exa:incomplete-gibbons-hawking} does not give
\hk metrics fibered over the full $\R^3$.
However we can do better:

\begin{example}[Gibbons-Hawking spaces] \label{exa:gibbons-hawking}
Extending \autoref{exa:incomplete-gibbons-hawking}
and \autoref{exa:gibbons-hawking-R4},
let us fix $U \subset \R^3$,
distinct points $x_1, \dots, x_k$ in $U$,
and a function $V$ on $U$ with\footnote{On the RHS $\delta$ means
the ``Dirac delta function'' on $\R^3$,
which should be understood
as a distributional 3-form; thus this
equality is understood in the sense
of distributions; it won't be important for our purpose to
know exactly what it means, since we will deal only with
some very concrete examples, but if you are interested,
one source is Chapter 6 of \cite{MR1817225}.}
\begin{equation}
  \Delta V = - \sum_{i=1}^n \delta(x - x_i).
\end{equation}
Then consider a $U(1)$-bundle $X$ over $U \setminus \{x_i\}$
with \hk structure as in \autoref{exa:incomplete-gibbons-hawking}.
Consider a small $S^2$ around $x_i$:
\begin{equation}
  \int_{S^2} \frac{F}{2\pi} = -\int_{S^2} \star \de V = -\int_{B^3} \de \star \de V = \int_{B^3} \delta(x - x_i) = 1
\end{equation}
so the $U(1)$ bundle $X$ restricted to this $S^2$ has
degree $1$. Thus, $X$ doesn't extend as a $U(1)$ bundle
over the point $x_i$.

Nevertheless it \ti{does} extend as a \hk manifold.
Indeed, near $x_i$ we have
\begin{equation}
V = \frac{1}{4\pi\norm{x - x_i}} + \text{regular},
\end{equation}
so the circle fibers of $X$ are shrinking to zero
length just as in \autoref{exa:gibbons-hawking-R4}.
It is possible to add a single point over each $x_i$
to get a new space $\bar X$, which is a \hk manifold with non-free
$U(1)$ action, with $\bar X / U(1) = U$.
% This follows from the computation
% we have already done in \autoref{exa:gibbons-hawking-R4}.
Indeed, choosing the coordinate $x' = x - x_i$,
a neighborhood $W$ of $x' = 0$ in $X$ can be identified as a
principal $U(1)$-bundle with a neighborhood of $x = 0$
in \autoref{exa:gibbons-hawking-R4}. We have
$V = V_0 + \delta V$ and $\Theta = \Theta_0 + \delta \Theta$,
where $V_0$ and $\Theta_0$ are as in \autoref{exa:gibbons-hawking-R4},
$\delta V$ is a smooth (harmonic) function on $W$,
and $\delta \Theta$ a smooth 1-form on $W$.
We then make the same change of coordinates
to $(y_0,y_1,y_2,y_3)$ we made in
\autoref{exa:gibbons-hawking-R4}, and compute that $\delta V$
and $\delta \Theta$ do not contribute to the $\omega_i$ at
$y=0$: in other words, in these coordinates we have
\begin{equation} \label{eq:gibbons-hawking-near-singularity}
  \omega_i = \de y_0 \wedge \de y_i + \de y_{i+1} \wedge \de y_{i+2} + \delta \omega_i
\end{equation}
where $\delta \omega_i$ vanishes at $y = 0$. It follows
that the \hk structure indeed extends over $y = 0$.
\end{example}

\begin{example}[Eguchi-Hanson space] \label{exa:eguchi-hanson}
This is a case of \autoref{exa:gibbons-hawking}
with two singularities. Fix distinct points
$x_1, x_2 \in \R^3$, let $U = \R^3$, and
\begin{equation}
  V(x) = \frac{1}{4\pi \norm{x - x_1}} + \frac{1}{4\pi \norm{x - x_2}}.
\end{equation}
The resulting $\bar X$ is fibered over $\R^3$ with two degenerate fibers.
From now on we drop the bar and just call it $X$.
Let $\pi: X \to \R^3$ be the projection.
Then $\pi^{-1}(x_1 x_2)$ has the topology of $S^2$.
\end{example}

\insfig{higgs-bundles-3}{0.8}

\begin{exercise}
Show that this $S^2$ is a complex submanifold of $X$, with
respect to the two complex structures $I_{\vec s}$ where $\vec s$
is the direction from $x_1$ to $x_2$ or vice versa.
(The trickiest point is to see that it is really a manifold,
even when the two endpoints are included. Hint: by a rotation,
we can assume without loss of generality that $\vec s = (1,0,0)$.
Then away from the endpoints this $S^2$ is the locus
$z_1 = 0$, with $z_1$ given in \eqref{eq:hol-forms-GH}.)
\end{exercise}

\begin{exercise}
Show that the area of this $S^2$, in the \hk metric $g$,
is $\norm{x_1 - x_2}$. (Hint: complex
submanifolds of \kahler manifolds are \ti{calibrated} ---
the area is just $\int \omega_{\vec s}$.)
\end{exercise}

\begin{exercise}
Show that this $S^2$ has self-intersection number $-2$.
\end{exercise}

\begin{exercise}
Show that, in either of the complex structures
$I_{\vec s}$ of the previous
exercise, $X$ is biholomorphic to $T^* \C\PP^1$. \fixme{warning,
this one might be hard}
\end{exercise}

Eguchi-Hanson space is our first example where the $I_{\vec s}$ do not all give rise to the same complex manifold:
\begin{exercise}
Show that, in any \ti{other} complex structure $I_{\vec s'}$,
$X$ has no compact 1-complex-dimensional complex
submanifolds. (Hint: use the fact that
there is a holomorphic function $z: X \to \C$.
The image of a compact connected
1-complex-dimensional submanifold
would have to be a point. It might be
convenient to assume $\vec s$ is generic and $\vec s' = (1,0,0)$,
in which case the relevant function is $z_1$ given in
\eqref{eq:hol-forms-GH}.)
\end{exercise}

Nevertheless we do have a 1-parameter group relating
\ti{some} of the $I_{\vec s}$:
\begin{exercise}
Show that $X$ admits an action of $SO(2) \subset SO(3)$
by isometries,
such that $T^* I_{\vec s} = I_{T \vec{s}}$. \fixme{check!}
\end{exercise}

\begin{example}[Multi-Eguchi-Hanson spaces] \cite{MR520463} \label{exa:multi-eguchi-hanson} More generally, take $U = \R^3$, fix a collection
of distinct points $x_1, \dots, x_k \in \R^3$ and take
\begin{equation}
  V(x) = \sum_{i=1}^k \frac{1}{4 \pi \norm{x - x_i}}.
\end{equation}
Then a straight line segment in $\R^3$ connecting two $x_i$ (and not meeting any others)
gives an $S^2$ in $X$. This $S^2$ is a complex submanifold with respect to two of the complex structures $I_{\vec s}$, just as before.

Asymptotically, the metric on this space is approximately
what we would get by taking all $x_i = x_0$ for some fixed $x_0$.
In that case we would have simply
\begin{equation}
 V(x) = \frac{k}{4 \pi \norm{x - x_0}}
\end{equation}
which, as explained in \autoref{exa:gibbons-hawking-R4Zk},
gives the \hk structure of $\R^4 / \Z_k$.
Thus, when all the $x_i$ are distinct,
$g$ is a kind of \hk desingularization of $\R^4 / \Z_k$.

A nice special case occurs when all of the $x_i$ are collinear:
then we have a single complex structure in which $X$ contains $k-1$
holomorphic spheres $C_i$, with intersection numbers
$C_i \cdot C_{i+1} = 1$. In this complex structure $X$ is
the \ti{minimal resolution} of the singularity $\C^2 / \Z_k$
(sometimes called a ``du Val singularity of type $A_{k-1}$,'' e.g.
because the intersection numbers of the $C_i$ make up the
Cartan matrix of type $A_{k-1}$.)
\end{example}

\insfig{higgs-bundles-5}{0.9}

\begin{example}[ALE spaces] \label{exa:ALE-spaces}
One can consider the minimal resolutions $X_\Gamma$
of the singularities at the origin in \autoref{exa:H-quotients}.
Then $X_\Gamma$ is an honest manifold,
carrying a natural family
of complete \hk metrics \cite{MR90d:53055}.
These metrics asymptotically approach
the metric on $\R^4 / \Gamma$;
thus the $X_\Gamma$ are called ``ALE spaces'',
for ``asymptotically locally Euclidean.''
In the case $\Gamma = \Z_k$ these \hk metrics are
the same as those of \autoref{exa:multi-eguchi-hanson};
for other $\Gamma$ they are not Gibbons-Hawking spaces.
\end{example}

\begin{example}[Taub-NUT space]
This is a case of \autoref{exa:gibbons-hawking}
with one singularity.
Take $U = \R^3$ and
\begin{equation}
  V(x) = 1 + \frac{1}{4\pi \norm{x-x_0}}.
\end{equation}
Now the asymptotic metric looks like that of $\R^3 \times S^1$
rather than $\R^4$.
\end{example}

\begin{exercise} Show that Taub-NUT space is
biholomorphic to $\C^2$, in any of its complex
structures. \fixme{warning, this one might be hard}
\end{exercise}

Despite this, Taub-NUT space is definitely not the same
\hk manifold as $\bbH$! So a \hk manifold contains more
information than just a family of complex manifolds.

Similarly by taking multiple singularities in $V$ we could
obtain the ``multi-Taub-NUT'' family of metrics.


\subsection{The twistor family, first approach}

% Given a \hk manifold $X$ we have seen that we get a
% family of complex manifolds $(X,I_{\vec s})$.
% This family can be assembled into a \ti{single}
% complex manifold, equipped with some extra structure,
% which in fact contains all the information necessary
% to reconstruct the original \hk $X$.

% Morally, the key fact is that the vector
% bundle $T^{1,0}_{I_{\vec s}} X$ actually varies
% \ti{holomorphically} as a function of $\vec s$,
% when we equip $S^2$ with its standard complex
% structure.
We know that $\Omega_1 = \omega_2 + \I \omega_3$ is
a holomorphic symplectic form for $I_1$. We can do similarly
for an arbitrary complex structure $I_{\vec s}$, and can
even arrange that the resulting holomorphic symplectic
forms vary holomorphically:

\begin{lem}[Holomorphic symplectic forms on a \hk manifold
vary holomorphically over $S^2$] \label{lem:hol-symp-hol}
Suppose $X$ is a \hk manifold.
Let
\begin{equation}
V = \Span(\omega_1, \omega_2, \omega_3) \subset \Omega^2_\C(X).
\end{equation}
For each $\vec s \in S^2$, let
\begin{equation}
 L_{\vec s} = V \cap \Omega^{2,0}_{I_{\vec s}}(X).
\end{equation}
Then:
\begin{enumerate}
\item $\dim_\C L_{\vec s} = 1$.
\item If we equip $S^2$ with its standard
complex structure, $L$ is a \ti{holomorphic} line subbundle of the trivial rank $3$ holomorphic bundle $S^2 \times V$, canonically isomorphic to $\cO(-2) \to \C\PP^1$.
\end{enumerate}
\end{lem}

\begin{pf}
For (1) it's enough to compute for $\vec{s} = (1,0,0)$, and there note
$\omega_2 + \I \omega_3 \in \Omega^{2,0}$, $\omega_1 \in \Omega^{1,1}$,
$\omega_2 - \I \omega_3 \in \Omega^{0,2}$. Thus $L_{\vec s}$ is 1-dimensional,
spanned by $\omega_2 + \I \omega_3$.

For (2) here is a computational proof.
Fix a complex coordinate $\zeta$
on $S^2 \setminus \{ (-1,0,0) \}$, by
\begin{equation} \label{eq:zeta-def}
 \zeta = \frac{s_3 - \I s_2}{1 + s_1}, \qquad (s_1, s_2, s_3) = \frac{(1 - \abs{\zeta}^2, -2 \im \zeta, 2 \re \zeta)}{1+\abs{\zeta}^2}.
\end{equation}
Thus we have
\begin{align}
  \zeta = 0 \leftrightarrow \vec s = (1,0,0), \quad & \zeta = \infty \leftrightarrow \vec s = (-1,0,0), \\
  \zeta = -\I \leftrightarrow \vec s = (0,1,0), \quad & \zeta = \I \leftrightarrow \vec s = (0,-1,0), \\
  \zeta = 1 \leftrightarrow \vec s = (0,0,1), \quad & \zeta = -1 \leftrightarrow \vec s = (0,0,-1).
\end{align}
Using this translation we will sometimes write
$I_\zeta$ for $I_{\vec s}$ and $L_\zeta$ for $L_{\vec s}$.
Now consider the holomorphic family of 2-forms
\begin{equation} \label{eq:hol-symp-family}
  \Omega(\zeta) = \frac{\omega_2 + \I \omega_3}{2\zeta} - \I\omega_1 + \frac{\omega_2 - \I \omega_3}{2} \zeta.
\end{equation}
We want to check that $\Omega(\zeta) \in L_\zeta$.
As a quick check note that
\begin{equation}
  \Omega(\zeta=1) = -\I \Omega_3, \quad \Omega(\zeta=-\I) = - \Omega_2, \quad \zeta \Omega(\zeta=0) = \Omega_1.
\end{equation}
For general $\zeta$, what we want to know is that
that applying $I_\zeta$ to the first slot of $\Omega(\zeta)$ gives
$\I \Omega(\zeta)$, so that $\Omega(\zeta) \in L_\zeta$.
This can be checked (a bit laboriously)
\mmaref{verify-holsymp}
using \eqref{eq:zeta-def}, $I_i \omega_i = g$,
$I_i \omega_{i+1} = -\omega_{i+2}$, $I_i \omega_{i+2} = \omega_{i+1}$.

Now, $\Omega(\zeta)$ blows up as $\zeta \to 0$ or
$\zeta \to \infty.$
Still, for any $\zeta \in \C$, $\zeta \Omega(\zeta)$ is
a nonvanishing element of $L_\zeta$;
similarly, for any $\zeta \in \C^\times \cup \{\infty\}$,
$\Omega(\zeta) / \zeta$ is a nonvanishing element of $L_\zeta$.
Thus we have two holomorphic trivializations of $L_\zeta$ over
these two patches, differing by the transition function $\zeta^{-2}$.
This gives the desired holomorphic identification
$L_\zeta \simeq \cO(-2)$ and finishes the proof.
\end{pf}

We will use the formula \eqref{eq:hol-symp-family} frequently.
Warning: different authors (and different papers by the same authors)
have different conventions for the normalization of $\Omega(\zeta)$
and the definition of $\zeta$.

\begin{lem}[$(1,0)$-covectors on a \hk manifold vary holomorphically over $S^2$] \label{lem:10-forms-hol}
Suppose $X$ is a \hk manifold. Then $(T^*)^{1,0}_{I_\zeta} X = (1 - \I \zeta I_3) (T^*)^{1,0}_{I_1} X$.
\end{lem}

\begin{pf}
If $\beta \in (T^*)^{1,0}_{I_\zeta} X$ we may compute directly that
\begin{align}
I_\zeta (1 + \zeta I_3) \beta &= \frac{((1 - \abs{\zeta}^2)I_1 - 2 \im \zeta I_2 + 2 \re \zeta I_3)(1 + \zeta I_3)\beta} {1 + \abs{\zeta}^2} \\
&= \I (1 + \zeta I_3) \beta,
\end{align}
so at least $(1 + \zeta I_3) (T^*)^{1,0}_{I_1} X \subset (T^*)^{1,0}_{I_\zeta} X$. Moreover the map $(1 + \zeta I_3)$ is injective on $(T^*)^{1,0}_{I_1} X$,
since $I_3$ and $I_1$ anticommute, so that they cannot have any
simultaneous eigenvectors. So by dimension counting we are done.
\end{pf}

\begin{cor}[$(0,1)$-vectors on a \hk manifold vary holomorphically over $S^2$] \label{cor:01-vectors-hol}
Suppose $X$ is a \hk manifold. Then $T^{0,1}_{I_\zeta} X = (1 + \I \zeta I_3) T^{0,1}_{I_1} X$.
\end{cor}
\begin{pf} Take the complex conjugate of the statement in
\autoref{lem:10-forms-hol}, and use the metric to identify
$\bar T^* \simeq T$.
\end{pf}

\begin{exercise} Carry out the omitted computation in
the proof of \autoref{lem:10-forms-hol}. Note a tricky point:
here we are acting on covectors rather than vectors,
so the operators $I_i$ we are using are the \ti{transposes}
of the usual ones, so $I_2 I_1 = I_3$
rather than the usual relation. (Or alternatively,
carry out the analogous computation to
prove \autoref{cor:01-vectors-hol} directly, in which case
you would use the usual $I_1 I_2 = I_3$.)
\end{exercise}

\begin{exercise} Use \autoref{lem:10-forms-hol} to give
an alternative proof of \autoref{lem:hol-symp-hol}.
(You might want to look at \cite{Hitchin:1986ea}.)
\end{exercise}

% Another way of getting at this is: identify $V$ with the imaginary
% quaternions by taking $\omega_i \mapsto I_i$;
% then $L_{\vec s}$ is the $-\I$ eigenspace
% of the operator $I_{\vec s}$ acting on the complexification of the subspace
% $\{I_{\vec s'}: s' \perp s\}$ of $V$. (To check this, it's enough to look
% at $\vec s = (1,0,0)$; then $L_{\vec s}$ is supposed to contain
% $I_2 + \I I_3$.)  On the other hand the holomorphic tangent bundle $T^{1,0} S^2$
% is the $+\I$ eigenspace of the same operator.

% Yet another proof works as follows. \fixme{explain better}
% Each complex structure $I_{\vec s}$ generates a 1-parameter
% group $U(1)_{\vec s} \subset SU(2)$. All of these subgroups are
% conjugate, and we can view
% the $S^2$ of unit imaginary quaternions as the coset space
% $SU(2)/U(1)$ parameterizing such subgroups. $U(1)_{\vec s}$
% acts with weights $2,0,-2$ on $V$, and $L_{\vec s}$ is the
% weight-$2$ piece. Now the standard complex structure on $SU(2)/U(1)$
% is such that the complex vector field corresponding to the
% \ti{raising} generator $X^+ \in \mathfrak{su}(2)_\C$
% spans $T^{0,1}$. \fixme{...}


\subsection{The twistor family, second approach}

In this section we fit
\autoref{lem:hol-symp-hol} and \autoref{lem:10-forms-hol}
into a slightly more abstract framework.
The main aim is \autoref{prop:twistorial-and-quaternionic-vector-spaces}
below, which says that a quaternionic vector space is
equivalent to a certain kind of vector bundle over
$\C\PP^1$.

\begin{defn}[Quaternionic vector space] A \ti{quaternionic
vector space} is a real vector space $V$ with endomorphisms
$I_1$, $I_2$, $I_3$ obeying the quaternion algebra.
\end{defn}

\begin{exercise} Suppose $V$ is a quaternionic vector space, of real
dimension $n$. Show that $n$ is a multiple of $4$, and the group of automorphisms of $V$ commuting with $\rho$ is isomorphic to
$GL(\frac{n}{4}, \bbH)$.
\fixme{need to use existence of basis}
\end{exercise}

\begin{defn}[\Hk vector space] A \ti{\hk vector space} is a quaternionic vector space $V$, with a positive definite symmetric
bilinear form $g$ obeying for all $i$
\begin{equation}
  g(I_i v, I_i w) = g(v,w).
\end{equation}
\end{defn}

\begin{exercise} Suppose $V$ is a \hk vector space, of real dimension $4n$.
Show that the group of automorphisms of $V$ preserving $(I_1,I_2,I_3,g)$
is isomorphic to $Sp(n)$. \fixme{need to use existence of basis}
\end{exercise}

\begin{defn}[Pseudoreal structure] Let $V$ be a complex
vector space. A \ti{pseudoreal structure}
on $V$ is a map $\rho: V \to V$ which is conjugate-linear
and has $\rho^2 = -1$.
\end{defn}

\begin{exercise} Suppose $(V,\rho)$ is a pseudoreal vector space, of complex
dimension $n$. Show that $n$ is even, and the group of automorphisms
of $V$ commuting with $\rho$ is isomorphic to $GL(\frac{n}{2}, \bbH)$.
\fixme{need to use standard form for pseudoreal structure?}
\end{exercise}

This result suggests a close connection between pseudoreal vector spaces
and quaternionic ones. We will now make this connection more explicit.
Let $H = \C^2$,
equipped with a pseudoreal structure
\begin{equation} \label{eq:H-pseudoreal}
  \rho_H(z,w) = (-\bar{w},\bar{z}),
\end{equation}
and a skew pairing,
\begin{equation}
  \varepsilon_H((z_1,w_1),(z_2,w_2)) = z_1 w_2 - w_1 z_2.
\end{equation}
The two combine to give a Hermitian metric on $H$,
\begin{equation}
  g_H((z_1,w_1),(z_2,w_2)) = \varepsilon_H((z_1,w_1),\rho_H(z_2,w_2)) = z_1 \bar{z}_2 + w_1 \bar{w}_2.
\end{equation}
$H$ has a $\C$-linear action of $\bbH$,
given explicitly by \eqref{eq:quaternions-into-su2}.

We can also think of $H$ as the vector space of global
sections of $\cO(1) \to S^2$,
\begin{equation}
  H = H^0(\cO(1)).
\end{equation}
$\rho_H$ then comes from a ``pseudoReal'' structure
on the line bundle $\cO(1)$: namely, if we let $\sigma$ denote
the antipodal map of $\C\PP^1$, \eqref{eq:H-pseudoreal} gives
\begin{equation}
  \rho_{\cO(1)}: \sigma^* \cO(1) \simeq \overline{\cO(1)}.
\end{equation}

\begin{prop}[Linear algebra of quaternionic vector spaces]
We have:
\begin{itemize}
\item If $V$ is a quaternionic vector space with $\dim_\R V = 4n$, then
there is a canonical decomposition of complex vector spaces
\begin{equation}
  V_\C \simeq H \otimes E,
\end{equation}
where $E$ is a complex vector space with $\dim_\C E = 2n$,
equipped with a pseudoreal structure $\rho_E$. Moreover:
\begin{itemize}
  \item the real structure on $V_\C$ is $\rho_V = \rho_H \otimes \rho_E$,
  \item the quaternion action on $V_\C$ is induced from the action on $H$.
\end{itemize}
This construction gives an equivalence between the category of
quaternionic vector spaces $V$ and the category of pseudoreal
vector spaces $E$.

\item If $V$ is a \hk vector space, then in addition there is
a nondegenerate skew pairing $\varepsilon_E$ on $E$, such
that the complexification of $g$ is
\begin{equation}
 g_\C = \varepsilon_H \otimes \varepsilon_E.
\end{equation}
This construction gives an equivalence between the category
of \hk vector spaces $V$ and the category of pseudoreal vector spaces $E$
with compatible skew pairings.
\end{itemize}
\end{prop}

\begin{pf} \fixme{...}
\end{pf}

\begin{defn}[Twistorial vector space] A \ti{twistorial vector space}
is a holomorphic vector bundle $W \to S^2$, such that
$W \otimes \cO(-1)$ is trivial, equipped with
a ``Real'' structure $\rho_W: \sigma^* W \simarrow \overline{W}$, where
$\sigma$ is the antipodal map of $\C\PP^1$.
\end{defn}

\begin{defn}[Metric twistorial vector space] \label{def:metric-twistorial-vector-space} A \ti{metric twistorial
vector space} is a twistorial vector space $W \to S^2$, equipped with
a fiberwise nondegenerate $\Omega \in \wedge^2(W^*) \otimes \cO(2)$,
compatible with the Real structures in the sense that
\begin{equation}
  (\rho_{\wedge^2 W^*} \otimes \rho_{\cO(2)})^*\Omega = \overline\Omega,
\end{equation}
and obeying a positivity condition \fixme{...}
\end{defn}

\begin{prop}[Twistorial description of quaternionic vector spaces] \label{prop:twistorial-and-quaternionic-vector-spaces}
Given a quaternionic vector space $V$, we obtain a twistorial
vector space $W$ by taking
\begin{equation}
 W_{\vec s} = \ker(I_{\vec s} + \I) \subset V_\C.
\end{equation}
Given a twistorial vector space $W$, we obtain a
quaternionic vector space $V$ by taking
\begin{equation}
  V = H^0_\R(W)
\end{equation}
i.e. the space of sections invariant under $\rho_W$.
If $V$ is a \hk vector space, then the corresponding $W$
is a metric twistorial vector space, and vice versa.
All of these constructions give equivalences of categories.
\end{prop}

\begin{pf} \fixme{...}
\end{pf}

% \begin{prop}[Second approach to holomorphic family of
% holomorphic symplectic forms on \hk manifold] Suppose $X$ is a \hk manifold of
% real dimension $4n$.
% Then there is a decomposition
% \begin{equation}
%   T_\C X \simeq H \otimes E
% \end{equation}
% with the following properties:
% \begin{enumerate}
% \item $H$ is a rank $2$ complex bundle
% $H$, with a canonical trivialization $\{h_1, h_2\}$.
% We write $\eps_H = h_1 \wedge h_2 \in \wedge^2(H)$,
% and define a pseudoreal structure $\overline{h_1} = h_2$,
% $\overline{h_2} = -h_1$; then $\overline{\eps_H} = \eps_H$.
% \item $E$ is a rank $2n$ complex bundle, with a nondegenerate
% $\eps_E \in \wedge^2(E)$, and a pseudoreal structure
% such that $\overline{\eps_E} = \eps_E$.
% \item The combination of the pseudoreal structures on $E$ and $H$
% gives the real structure on $T_\C X$.
% \item The Levi-Civita connection is induced by a connection
% $\nabla_E$ on $E$ and the trivial connection $\nabla_H$ on $H$.
% \item $\eps_E$ and the pseudoreal structure are covariantly
% constant for $\nabla_E$.
% \item The \hk metric $g$ is
% \begin{equation}
%   g(h_1 \otimes e_1, h_2 \otimes e_2) = \eps_H(h_1, h_2) \eps_E(e_1, e_2).
% \end{equation}
% \item Given an element $h \in H$, define
% $\Omega_h \in \Omega^2_\C(X)$ by
% \begin{equation} \label{eq:hol-symp-from-H}
%   \Omega_h(h_1 \otimes e_1, h_2 \otimes e_2) = \eps_H(h,h_1) \eps_H(h,h_2) \eps_E(e_1,e_2).
% \end{equation}
% Then $\Omega_h$ is a holomorphic symplectic form for a complex
% structure $I_h$ on $X$.
% Moreover the map $h \otimes h \mapsto \Omega_h$
% gives an isomorphism $\Sym^2(H) \simarrow V$, where $V$ is the vector
% space of \autoref{lem:hol-symp-hol}.
% \item $I_h = I_{\lambda h}$ for any $\lambda \in \C^\times$,
% so we get complex structures labeled by points
% of $\PP(H) \simeq \C\PP^1$. Identifying $\C\PP^1 \simeq S^2$
% these are the complex structures $I_{\vec s}$.
% The projection
% \begin{equation}
%    H \setminus \{0\} \to \PP(H)
% \end{equation}
% realizes
% $H \setminus \{0\}$ as the complement of the zero
% section in $\cO(-1) \to \C\PP^1$. Since $\Omega_h$ depends
% quadratically on $h \in H$, it thus defines an
% isomorphism $\cO(-2) \simeq L$ where $L$ is the line bundle of
% \autoref{lem:hol-symp-hol}.
% \item If we choose $h = h_1 + \zeta h_2$,
% then
% \begin{equation}
%   \Omega_h = \zeta \Omega(\zeta)
% \end{equation}
% where $\Omega(\zeta)$ was given in \eqref{eq:hol-symp-family}.
% % I checked this by hand for R^4
% \end{enumerate}
% \end{prop}

% \begin{pf} \fixme{...}
% \end{pf}


\subsection{The twistor space}

\begin{defn}[Twistor space] Given a \hk manifold $X$, the \ti{twistor space} of $X$ is the manifold
\begin{equation}
  \cZ = X \times S^2
\end{equation}
equipped with the almost complex structure
\begin{equation}
  I(x,\vec s) = I_{\vec s}(x) \oplus I_{S^2}
\end{equation}
where $I_{S^2}$ denotes the
standard complex structure on $S^2$.
\end{defn}

\begin{prop}[Twistor space is a complex manifold] The almost complex structure $I$ on $\cZ$ is integrable.
\end{prop}
\begin{pf}
What we will use is that $\Omega(\zeta)$ determines the complex structure fiberwise,
and $\Omega(\zeta)$ itself is holomorphic in $\zeta$.
(For a different proof, using instead \autoref{lem:10-forms-hol},
see \cite{Hitchin:1986ea}.)

Concretely: we have
\begin{equation}
T^{0,1}_{(x,\zeta)} \cZ = T^{0,1}_{x,I_\zeta} X \oplus T^{0,1}_\zeta S^2.
\end{equation}
To see the integrability, consider a pair of vector fields in $T^{0,1} \cZ$,
of the form $v \oplus v'$
and $w \oplus w'$ with respect to this decomposition.

Part of the story is easy.
Since $v$ and $w$ are both tangent to the fiber $X_{\zeta} = \pi^{-1}(\zeta)$
the bracket $[v,w]$ is just the bracket on $X_{\zeta}$, and we already
know the integrability there, so $[v,w] \in T^{0,1} X$.
Since $v'$ and $w'$ are both pulled back from the base $S^2$,
their bracket $[v',w']$ is also pulled back from the bracket on $S^2$,
and we already know the integrability there, so again $[v',w'] \in T^{0,1} S^2$.

All that remains is to check
that $[v,w'] \subset T^{0,1} \cZ$.
Choose local coordinates $x^i$ for $X$ and write
\begin{equation}
v = v^i(x,\zeta) \partial_i, \qquad w' = f(x,\zeta) \partial_{\bar \zeta}, \qquad
\Omega = \Omega_{ij}(\zeta) \de x^i \wedge \de x^j.
\end{equation}
Here $v \in T^{0,1} X$ means it obeys the constraint
\begin{equation} \label{eq:v-constraint}
\Omega_{ij}(\zeta) v^i = 0.
\end{equation}
Then
\begin{equation}
 [v, f \partial_{\bar \zeta}] = (v^i \partial_i f) \partial_{\bar \zeta} - (\partial_{\bar \zeta} v^i) \partial_i.
\end{equation}
The first term is evidently in $T^{0,1} S^2$; for the second term note that
applying $\partial_{\bar \zeta}$ to \eqref{eq:v-constraint}
gives $\Omega_{ij}(\zeta) \partial_{\bar \zeta} v^i = 0$,
so the second term is in $T^{0,1} X$; thus the whole RHS is
in $T^{0,1} \cZ$, which is what we want.
\end{pf}

\begin{prop}[Properties of twistor spaces] \label{prop:twistor-space-properties}
Suppose $X$ is a \hk manifold with twistor space $\cZ$. Then:
\begin{enumerate}
\item $\cZ$ is a complex manifold, with a
  holomorphic projection $\pi: \cZ \to S^2$.
\item $\cZ$ carries a twisted fiberwise holomorphic symplectic form,
\begin{equation}
  \Omega \in \Omega^{2,0}_{fiber}(\cZ) \otimes \pi^* \cO(2)
\end{equation}
where $\Omega^{2,0}_{fiber}(\cZ) = \wedge^2 (T^{1,0}_{vert} \cZ)^*$.
\item $\cZ$ carries a \ti{real structure} (antiholomorphic involution)
$\rho: \cZ \to \cZ$, such that:
\begin{enumerate}
\item $\rho$ covers the antipodal involution $\sigma$ on $S^2$:
\begin{center}
\begin{tikzcd}
\cZ \arrow[r,"\rho"] \arrow[d] & \cZ \arrow[d] \\
S^2 \arrow[r,"\sigma"] & S^2
\end{tikzcd}
\end{center}
\item $\rho^* \Omega = \overline\Omega$.
(In formulating this condition we use the standard
conjugate-linear lift of $\sigma$ to act on $\cO(2)$.)
\end{enumerate}
\end{enumerate}
\end{prop}

\begin{pf}
We already proved (1).
For (2) use the $\Omega$ of \eqref{eq:hol-symp-family}.
Finally for (3) take
\begin{equation}
  \rho(x, \vec s) = (x, - \vec s).
\end{equation}
The statement that $\rho^* \Omega = \bar\Omega$ then
amounts to the fact that if we substitute $- 1 / \bar\zeta$
in \eqref{eq:hol-symp-family} we get $-\bar\Omega$.
\end{pf}

The fiber $\pi^{-1}(\vec s)$ is isomorphic to
$(X,I_{\vec s})$ as a complex manifold.

\begin{prop}[Real sections of twistor spaces]
Suppose $X$ is a \hk manifold with twistor space $\cZ$.
Then
$\cZ$, as a bundle over $S^2$,
has holomorphic \ti{sections} $s_x$ corresponding
to the points $x \in X$.
These sections are \ti{real}, i.e. $s_x(-\vec s) = \rho(s_x(\vec s))$.
The normal bundle to $s_x(S^2) \subset \cZ$ is isomorphic
to $\cO(1)^{\oplus 2n}$.
\end{prop}

\begin{pf}
Set
\begin{equation}
  s_x(\zeta) = (x,\zeta).
\end{equation}
Evidently this is a holomorphic and real section.
The desired statement about the normal bundle follows from
\autoref{lem:10-forms-hol}: indeed choosing a basis
$\{\alpha_1, \dots, \alpha_{2n}\}$
for the $2n$-dimensional vector space
$(T^{1,0}_{x,I_1} X)^*$ we get two
trivializations of the conormal bundle to $s_x(S^2)$, by the sections
$\{(1 + \zeta I_3) \alpha_i \oplus 0 \}$
over $\{\zeta \neq \infty\}$ and $\{(1/\zeta + I_3) \alpha_i\} \oplus 0$
over $\{\zeta \neq 0\}$. The transition function
relating these two trivializations is $1/\zeta {\mathbf 1}$,
showing the conormal bundle is $\cO(-1)^{\oplus 2n}$,
thus the normal bundle is $\cO(1)^{\oplus 2n}$ as desired.
\end{pf}

The real sections can be thought of
as horizontal for a sort of nonlinear flat connection
which gives the identification between
the fibers of $\cZ$.

\insfig{higgs-bundles-7}{0.7}

\begin{defn}[Pseudo-\hk structure] Suppose $X$ is a manifold.
A \ti{pseudo-\hk structure}
on $X$ is all the data $(X, g, I_1, I_2, I_3)$
of a \hk structure except that we
do not impose the condition that $g$ be positive definite.
\end{defn}

\begin{thm}[(Re)construction of \hk manifolds from twistor spaces]
\label{thm:hk-twistor-construction} \cite{Hitchin:1986ea}
Suppose given a manifold $\cZ$ carrying all the structures
of \autoref{prop:twistor-space-properties}. Then let $X$
be the space of all real holomorphic sections of $\cZ$
having normal bundle isomorphic to $\cO(1)^{\oplus 2n}$.
$X$ carries a canonical structure of manifold and a
canonical pseudo-\hk structure. If $\cZ$ is the twistor space of a
pseudo-\hk manifold $X'$, then $X' \subset X$, and the
pseudo-\hk structures agree.
\end{thm}

\begin{pf} We need some results from deformation theory of
complex manifolds. A useful reference for this stuff is
\cite{MR2093043}. Here I can only give a sketch of how it works.

The deformations of a compact complex submanifold $Y \subset \cZ$
are ``controlled by'' the sheaf cohomology of the
holomorphic normal bundle $N = T\cZ / TY$.
The simplest situation is the situation where $H^1(Y,N) = 0$.
In this case the set parameterizing the deformations is
actually a complex manifold, and its tangent space at a given
$Y$ is $H^0(Y,N)$.

We are going to apply this to the situation
where $Y$ is the image of one of the sections of $\cZ$
parameterized by $X$.
Then $Y \simeq \C\PP^1$ and $N \simeq \cO(1)^{\oplus 2n}$.
The first bit of good
news is that in this situation we indeed have $H^1(Y,N) = 0$,
because $H^1(\C\PP^1, \cO(1)) = 0$.
Moreover, $N$ carries the structure of metric
twistorial vector space as in
\autoref{def:metric-twistorial-vector-space}, and thus by
\autoref{prop:twistorial-and-quaternionic-vector-spaces},
$H^0_\R(Y,N)$ is a \hk vector space.
As $Y$ varies this gives $(I_1,I_2,I_3,g)$ on $X'$.

Finally we just have to check the integrability $\de \omega_i = 0$.
This follows directly from the fact that $\de \Omega = 0$
on the fibers of $\cZ$ \fixme{...}
\end{pf}

% since $N \otimes \cO(-1)$ is trivial
% we have
% \begin{equation}
%   H^0(N) \simeq H^0(N \otimes \cO(-1)) \otimes H^0(\cO(1)).
% \end{equation}
% Finally, on $H^0(N \otimes \cO(-1))$ we have a skew pairing
% given by $\Omega$, while on $H^0(\cO(1))$ there is a canonical
% skew pairing, concretely
% \begin{equation}
%   \omega(a_1 + b_1 \zeta, a_2 + b_2 \zeta) = a_1 b_2 - a_2 b_1.
% \end{equation}
% Combining these two gives a \ti{symmetric} pairing on
% $H^0(N) \simeq T_\C X$.

% We need to keep track of the real structures: indeed
% the real structure on $H^(N)$

% Keeping track of real structures we see
% that this pairing descends to a \ti{real} symmetric pairing
% on $TX$.

% Next we have to check
% that this pairing actually gives a pseudo-\hk metric. \fixme{...}

% Finally we should check that this pseudo-\hk metric agrees with
% the one on $X'$. \fixme{...}

Two remarks about \autoref{thm:hk-twistor-construction}:
\begin{itemize}
\item I have never heard of an example for
which $X' \neq X$, but it seems hard
in general to rule out the possibility that $\cZ$ could have some
other real sections having nothing to do with the points of the original $X$.
\item The space $X_\C$ of \ti{all} holomorphic sections of $\cZ$ has an antiholomorphic
involution induced by $\rho$; $X$ is the fixed locus. It thus provides
a natural \ti{complexification} of $X$. For example, when $X = \bbH$,
$\cZ$ is the total space of $\cO(1) \oplus \cO(1) \to S^2$
(see \autoref{exa:R4-twistor-space}).
Then $X_\C$ is a complex 4-dimensional vector space,
equipped with a real structure; we recover the original $X = \bbH$
by restricting to the real points.
\end{itemize}


\subsection{First examples of twistor spaces}

\begin{example}[Twistor space of $\R^4$] \label{exa:R4-twistor-space}
For the standard \hk structure on $\bbH$ all this becomes very
concrete.
If we define
\begin{align}
  w(\zeta) &= w_1 - \bar{z}_1 \zeta, \\
  z(\zeta) &= z_1 + \bar{w}_1 \zeta,
\end{align}
then the holomorphic $2$-form \eqref{eq:hol-symp-family}
can be written as
\begin{equation}
  \Omega(\zeta) = \frac{1}{2\zeta} \de w(\zeta) \wedge \de z(\zeta)
\end{equation}
Indeed,
\begin{align}
  \frac{1}{2\zeta} \de w(\zeta) \wedge \de z(\zeta) &= \frac{1}{2\zeta} (\de w_1 \wedge \de z_1 + \zeta (\de w_1 \wedge \de \bar{w}_1 + \de z_1 \wedge \de \bar{z}_1) - \zeta^2 \de \bar{z}_1 \wedge \de \bar{w}_1) \\
  &= \frac{\omega_2 + \I \omega_3}{2\zeta} - \I\omega_1 + \frac{\omega_2 - \I \omega_3}{2} \zeta
\end{align}
matching \eqref{eq:hol-symp-family}.

It follows (using the result of \autoref{exc:hsymp-holomorphy} below)
that $w(\zeta)$ and $z(\zeta)$ are fiberwise holomorphic.
But they are evidently also holomorphic in $\zeta$. So they are
holomorphic functions on $\cZ$.
Thus we have two coordinate systems on $\cZ$:
$(\zeta, z(\zeta), w(\zeta))$
covering the patch $\zeta \neq \infty$ and $(1/\zeta, z(\zeta)/\zeta, w(\zeta)/\zeta)$ covering $\zeta \neq 0$. The transition map
in the fibers is thus multiplication by $1/\zeta$.
This identifies
$\cZ$ as the total space of the rank $2$ holomorphic bundle
\begin{equation}
  \cO(1) \oplus \cO(1) \to S^2.
\end{equation}
The antiholomorphic involution $\rho$ is
\begin{equation} \label{eq:involution-R4}
  \rho(\zeta, z, w) = (-1/\bar\zeta, -\bar w / \bar\zeta, \bar z / \bar \zeta).
\end{equation}
\end{example}

\begin{exercise}
Verify the formula \eqref{eq:involution-R4} for the antiholomorphic
involution.
\end{exercise}

\begin{exercise} \label{exc:hsymp-holomorphy}
If $X$ is a complex manifold, with $\dim_\C X = 2$, with holomorphic symplectic form
$\Omega$, and $\Omega = \alpha \wedge \beta$ for $\alpha,\beta \in \Omega^1(X)$,
show that in fact $\alpha, \beta \in \Omega^{1,0}(X)$.
\end{exercise}

\begin{example}[Twistor space of $\R^3 \times S^1$]  \label{exa:R3S1-twistor-space}
For $\R^3 \times S^1$ the picture is more interesting.
The shift by $\Z$ acts as $(w_1,z_1) \to (w_1 + 2 \pi n, z_1)$.
We can build coordinates by taking shift-invariant
combinations of the coordinates we used in
\autoref{exa:R4-twistor-space}:
on the patch $\zeta \neq \infty$ we take
\begin{equation}
 \eta = z - \zeta w, \qquad \cX = \exp(\I w)
\end{equation}
while on $\zeta \neq 0$ we take
\begin{equation}
 \eta' = z / \zeta^2 - w / \zeta, \qquad \cX' = \exp(\I z / \zeta)
\end{equation}
Thus the transition map is
\begin{equation}
  (\zeta', \eta', \cX') = (1 / \zeta, \eta / \zeta^2, \cX \exp(\I \eta / \zeta) )
\end{equation}
So $\eta$ is a local coordinate on the fiber of $\cO(2) \to S^2$;
let $L$ denote the line bundle over $\cO(2) \to S^2$ with
transition function $e^{\I \eta / 2 \zeta}$; what we just showed
is that $\cZ$ is the total space of $L^2$, with the
zero section deleted (because $\cX$ never takes the value $0$.)

Note that in particular $\cZ$ is \ti{not} algebraic, because of the
appearance of the exponential function here. (Were it algebraic,
it would follow on general grounds that $L$ is pulled back from
the base $\C\PP^1$, but that's not the case here.)
\end{example}

\begin{exercise} Write down the (fiberwise, twisted) holomorphic symplectic form
$\Omega$ and the antiholomorphic involution in these complex
coordinates for $\cZ$.
\end{exercise}

% \begin{example}[Twistor spaces of Gibbons-Hawking spaces]
% Now suppose $X$ is a Gibbons-Hawking space (\autoref{exa:gibbons-hawking}).
% In this case the geometry of $\cZ$ is more interesting yet.

% To get some idea of what it looks like, let us start by
% trying to describe the space of holomorphic functions on
% $X$ in a single fixed complex structure, say $I_1$.
% \fixme{...}
% \end{example}

The next example is a key one: it has many of the features
which appear for moduli spaces of Higgs bundles (in fact
this example literally occurs as the moduli space of
Higgs bundles on the curve $C = T^2$ with gauge group
$G = U(1)$.)
\begin{example}[$\R^2 \times T^2$] \label{exa:R2T2}
Now fix some $\tau \in \C$, with $\im \tau > 0$,
and let $X$ be $\R^4$ modulo shifts of $w_1$ by
the lattice
\begin{equation}
  \Lambda_\tau = \frac{2\pi}{\sqrt{\im \tau}}(\Z \oplus \Z \tau) \subset \C.
\end{equation}
(The funny prefactor is engineered
so that the area of $\C / \Lambda_\tau$
is $(2\pi)^2$, independent of $\tau$.)
Note that in choosing to shift $w_1$, as opposed to some other complex
coordinate, we have privileged the complex structure $I_1$.
In structure $I_1$, moreover, we see immediately that
\begin{equation}
  X \simeq \C \times T^2_\tau,
\end{equation}
where by $T^2_\tau$ we mean the complex
torus $\C / \Lambda_\tau$.
Similarly in structure $-I_1$ we have
\begin{equation}
  X \simeq \C \times T^2_{-\bar\tau}.
\end{equation}

Thus, as a complex manifold, $(X,I_1)$ or $(X,-I_1)$ really
\ti{depend} on $\tau$ --- different choices (not related by $SL(2,\Z)$)
give inequivalent complex manifolds.

What about the other structures, for $\zeta \in \C^\times$?
Let's start with the slightly easier case $\tau = \I$.
In this case the $\Z^2$ action just shifts $x_0$ and $x_1$
independently by multiples of $2\pi$.
Away from $\zeta = 0$ and $\zeta = \infty$, we can write
holomorphic coordinates as
\begin{align*}
  \cX_A &= \exp \left(\frac{z_1}{2\zeta} - \I x_1 + \frac{\bar{z}_1}{2} \zeta \right),\\
  \cX_B &= \exp \left(\frac{\I z_1}{2\zeta} + \I x_0 - \frac{\I \bar{z}_1}{2}  \zeta \right).
\end{align*}
As a check, note that at $\zeta = 1$ we have
$\cX_A = \exp(x_2 - \I x_1)$, $\cX_B = \exp(-x_3 + \I x_0)$, holomorphic
for $I_3$,
and at $\zeta = -\I$ we have
$\cX_A = \exp(- x_3 - \I x_1)$, $\cX_B = \exp(-x_2 + \I x_0)$,
holomorphic for $I_2$.
For general $\zeta \in \C^\times$ we compute directly
\begin{equation} \label{eq:hol-symp-R2T2}
  \frac{\de \cX_A \wedge \de \cX_B}{\cX_A \cX_B} = -\I \Omega(\zeta),
\end{equation}
which shows in particular (again using \autoref{exc:hsymp-holomorphy})
that $\cX_A$ and $\cX_B$ are holomorphic
on $(X,I_\zeta)$.
Thus, for all $\zeta \in \C^\times$, we get in structure $I_\zeta$
\begin{equation}
 X \simeq \C^\times \times \C^\times.
\end{equation}

For $\tau \neq \I$ the picture is very similar, just with slightly
more complicated formulas:
\begin{equation}
\cX_{A,B} = \exp \left(\zeta^{-1} Z_{A,B} + \I \theta_{A,B} + \zeta\bar{Z}_{A,B} \right)
\end{equation}
where we introduced
\begin{align}
  \theta_A = -\frac{1}{\sqrt{\im \tau}} x_1, & \qquad
  \theta_B = \sqrt{\im \tau} x_0 - \frac{\re \tau}{\sqrt{\im \tau}} x_1, \label{eq:theta-R2T2} \\
  Z_A = \frac{z_1}{2 \sqrt{\im \tau}}, & \qquad  Z_B = \tau Z_A. \label{eq:Z-R2T2}
\end{align}
In these coordinates the $\Z^2$ action
just shifts $\theta_A$ and $\theta_B$ independently by
multiples of $2 \pi$. The $I_1$-holomorphic combination of these
is $\theta_B - \tau \theta_A$.

We have again
\begin{equation} \label{eq:hol-symp-R2T2-general}
  \frac{\de \cX_A \wedge \de \cX_B}{\cX_A \cX_B} = -\I \Omega(\zeta)
\end{equation}
and so again $\cX_A$ and $\cX_B$ are holomorphic, giving
$X \simeq \C^\times \times \C^\times$.
In particular, for $\zeta \in \C^\times$, the space
$(X,I_\zeta)$ as a complex manifold \ti{does not} depend on $\tau$.

\end{example}

\begin{exercise}
Check \eqref{eq:hol-symp-R2T2}, or more generally
\eqref{eq:hol-symp-R2T2-general}.
As we have explained,
this immediately implies that $\cX_A$ and $\cX_B$ are indeed
holomorphic functions on $\cZ$. You could also
try checking this directly from the definition of
the complex structure on $\cZ$.
\end{exercise}

\begin{exercise}
Check that $(\cX_A, \cX_B)$ indeed give a \ti{biholomorphism}
$(X,I_\zeta) \simeq \C^\times \times \C^\times$,
and thus $(\cX_A, \cX_B, \zeta)$ give a biholomorphism between
an open subset of $\cZ$ and $\C^\times \times \C^\times \times \C^\times$.
\end{exercise}

\begin{exercise}
Write the antiholomorphic involution $\rho$ in terms
of $(\cX_A, \cX_B, \zeta)$.
\end{exercise}


% \begin{exercise} Check that the formula \eqref{eq:involution-R4} is correct.
% \end{exercise}

\begin{example}[Twistor spaces of multi-Eguchi-Hanson metrics] \label{exa:multi-eguchi-hanson-twistor}
Now we consider the twistor spaces of the metrics
of \autoref{exa:multi-eguchi-hanson}.

We have commented before that in complex structure $I_1$ there
is a holomorphic function $z_1 = x_2 + \I x_3$.
Of course we can get a similar function in any complex structure
$I_\zeta$.
Now we want to choose the normalizations of these functions
in such a way that they vary holomorphically with $\zeta$, and thus give
a holomorphic function $\eta$ on $\cZ$.
One way of thinking about this is:
for each $\zeta$ we get a complex coordinate by considering
the \ti{holomorphic moment map} of the $U(1)$ action
with respect to $\Omega(\zeta)$. Concretely this gives
\begin{equation} \label{eq:eta-GH}
  \eta = \frac{x_2 + \I x_3}{2} - \I x_1 \zeta + \frac{x_2 - \I x_3}{2} \zeta^2.
\end{equation}
This function blows up at $\zeta = \infty$, but near there we can
switch to the function $\eta' = \eta / \zeta^2$. Globally the pair
$(\eta,\eta')$ gives a \ti{holomorphic map}
from $\cZ$ to the total space of the bundle
$\cO(2) \to \C\PP^1$. or more prosaically, we have an $\cO(2)$-valued
coordinate $\eta$. (The same situation occurred in \autoref{exa:R3S1-twistor-space}.)

To complete our description of $\cZ$ we need (in each patch) one more local holomorphic coordinate. The answer turns out as follows.
If the singularities of $V$ are at points $x_1, \dots, x_n$ define
corresponding sections $\eta_1, \dots, \eta_n$ of $\cO(2)$ by
\eqref{eq:eta-GH}. Then $\cZ$ carries an $\cO(2)$-valued
coordinate $\eta$ and two $\cO(n)$-valued coordinates $u$, $v$,
obeying the equation
\begin{equation} \label{eq:multi-eh-uv}
  uv = \prod_{i=1}^n (\eta - \eta_i).
\end{equation}
More invariantly we could say that we have a map
\begin{equation}
 \pi: \cZ \to \left\{ uv = \prod_{i=1}^n (\eta - \eta_i) \right\} \subset [(\cO(n) \oplus \cO(2) \oplus \cO(2)) \to \C\PP^1].
\end{equation}
This map is an isomorphism on all but finitely many fibers:
the exception is the fibers over $\zeta$ for which some $\eta_i(\zeta)$ become
equal. In these fibers we have some compact complex submanifolds,
the $S^2$'s discussed in \autoref{exa:multi-eguchi-hanson};
these get contracted by the map $\pi$. Thus for most values of $\zeta$,
$(\cM, I_\zeta)$ is an affine variety, while for finitely many special
values $(\cM, I_\zeta)$ is a resolution of a singular affine variety.
The simple example $n=2$, \autoref{exa:eguchi-hanson}, is an affine variety
$\{uv = (\eta - \eta_1)(\eta - \eta_2)\}$ in all structures $I_\zeta$ except
for two; in those special structures we get
$T^* \C\PP^1$, realized as a resolution of the singular
variety $uv = (\eta - \eta_1)^2$.

The holomorphic symplectic form is
\begin{equation}
  \Omega = \I \frac{\de u \wedge \de v}{n \frac{\partial}{\partial \eta} \prod (\eta - \eta_i)}.
\end{equation}
Note that when $n=1$ the equation \eqref{eq:multi-eh-uv} can be
eliminated by solving
for $\eta$, leaving the coordinates $u$, $v$ parameterizing
$\cO(1) \oplus \cO(1)$;
this matches the twistor space of $\R^4$ (\autoref{exa:R4-twistor-space}),
as it should.
\end{example}

\begin{exercise} Show that the description of the twistor space in \autoref{exa:multi-eguchi-hanson-twistor} is indeed correct.
(Hint: construct
the functions $u$, $v$, concretely as solutions of the Cauchy-Riemann equations.
These equations are determined by the $(0,1)$ vector fields we gave
in \eqref{eq:gibbons-hawking-01-vectors}. The idea is to
consider what these equations become in the special case where
we look at a function which is locally of the form $u = f(x) e^{\I \chi}$ ---
or more invariantly, a function which obeys $\partial_\chi u = \I u$.
Such functions are equivalently sections of a line bundle over
the base $\R^3 \setminus \{x_i\}$, carrying a canonical connection,
and the Cauchy-Riemann equations take a nice form in terms of this line
bundle. Similarly $v$ will be a section of the dual line bundle,
locally of the form $v = g(x) e^{-\I \chi}$).
\end{exercise}


\subsection{Semiflat metrics}

Now we start considering more interesting torus fibrations.
The \hk metrics we describe below appeared first in
\cite{Cecotti:1989qn}; see also \cite{Freed:1997dp}
for a more mathematically oriented exposition,
and closely related discussion in \cite{Hitchin:2005uu}.

\begin{example}[Semiflat metric in one dimension, trivially fibered] \label{exa:semiflat-1d}
This is a generalization of \autoref{exa:R2T2} to allow a
bundle of tori, with varying modulus.

Fix a $1$-dimensional complex manifold $\cB$
and holomorphic functions
\begin{equation}
  Z_{A,B}: \cB \to \C
\end{equation}
such that the quantity
\begin{equation}
  \tau = \frac{\de Z_B}{\de Z_A}
\end{equation}
is valued in the upper half-plane.
Then let $X$ be $\cB \times T^2$, with $T^2$
coordinatized by $\theta_{A,B} \in \R / 2 \pi \Z$.
Finally, much like \autoref{exa:R2T2}, define functions
$\cX_{A,B}: X \to \C^\times$ by
\begin{equation}
  \cX_{A,B} = \exp \left(\zeta^{-1} Z_{A,B} + \I \theta_{A,B} + \zeta \bar{Z}_{A,B} \right),
\end{equation}
and for any $\zeta \in \C^\times$
define $\Omega(\zeta) \in \Omega^2_\C(X)$ by
\begin{equation}
  \frac{\de \cX_A \wedge \de \cX_B}{\cX_A \cX_B} = -\I \Omega(\zeta).
\end{equation}
To recover \autoref{exa:R2T2}, take $\cB = \C$,
$Z_A = z$, $Z_B = \tau z$, $\theta_A = - x_1$, $\theta_B = x_0$.
\end{example}

\begin{exercise} \label{exc:semiflat-1d-hk} Show that there is a \hk structure on the
space $X$ in \autoref{exa:semiflat-1d}, with holomorphic symplectic
form $\Omega(\zeta)$.
(Hint: since we know $\Omega(\zeta)$ concretely, we can compute
directly what the $\omega_i$ and $g$ must be. What is not immediately
obvious is that they obey the necessary algebraic relations to
give a \hk metric. You could verify this directly, but
you can also obtain it as a consequence of the twistor
reconstruction, \autoref{thm:hk-twistor-construction}: then all you
have to do is construct $\cZ$ with the required structures.
The tricky point is the condition on normal bundles: what does
it mean concretely about the functions $\cX_{A,B}$?)
\end{exercise}

\begin{exercise} This is a continuation of
\autoref{exc:semiflat-1d-hk}, but actually it can be done independently,
\ti{assuming} the result of that exercise.
Compute the symplectic forms $\omega_i$ and the metric $g$.
What can you say about the complex manifold $(X,I_1)$?
Show that the group $U(1) \times U(1)$ acts
by triholomorphic isometries on $X$ (translations on
the torus fibers.)
\end{exercise}

\begin{exercise} Consider again the \hk manifold from
\autoref{exc:semiflat-1d-hk}. Choose a contractible patch
$W \subset \cB$
on which the function $Z_A$ is injective. Using $Z_A$ to
embed $W \hookrightarrow \C$, we can view $U = W \times \R$ as a subset
of $\C \times \R \simeq \R^3$. Then the function $V = \im \tau$ is
a positive harmonic function on $U$. We can thus consider the
Gibbons-Hawking space (\autoref{exa:incomplete-gibbons-hawking})
associated to this data. It has translation invariance in
the $\R$ direction. Show that the \hk manifold from
\autoref{exc:semiflat-1d-hk} is isomorphic to the quotient
of this Gibbons-Hawking space by $\Z \subset \R$.
\end{exercise}

\begin{example}[Semiflat metric in one dimension, nontrivially fibered] \label{exa:semiflat-1d-general}
Here is a further generalization of \autoref{exa:semiflat-1d},
to allow a torus \ti{bundle} with nontrivial monodromy.
The notation needed to take care of this monodromy
makes things look considerably more complicated,
but the local geometry is exactly
the same as \autoref{exa:semiflat-1d}.

We again fix a 1-dimensional complex manifold $\cB$.
Now we also fix a local system $\Gamma$ of rank $2$ lattices
over $\cB$, equipped with an antisymmetric integer-valued pairing
\begin{equation}
 \IP{\cdot, \cdot}: \Gamma \times \Gamma \to \Z
\end{equation}
and a map
\begin{equation}
  Z: \Gamma \to \C
\end{equation}
such that:
\begin{itemize}
\item $Z$ is a homomorphism on each fiber --- i.e. for each
point $u \in \cB$, we get a homomorphism $Z(u): \Gamma_{u} \to \C$,
\item $Z$ is holomorphic, if we equip $\Gamma$ with the complex
structure it acquires as a covering space of $\cB$. (Said otherwise: if
we choose a section $\gamma$ of $\Gamma$ over some
patch $U \subset \cB$, then $Z$ induces a function $Z_\gamma: U \to \C$,
and the condition is that this function should always be holomorphic.)
\item Choosing a local basis
$\{\gamma_1,\gamma_2\}$ with $\IP{\gamma_1,\gamma_2} = 1$,
the $2$-form
\begin{equation}
\omega = \de Z_{\gamma_2} \wedge \de \bar{Z}_{\gamma_1} - \de Z_{\gamma_1} \wedge \de \bar{Z}_{\gamma_2}
\end{equation}
is \ti{positive}.
\end{itemize}
(To recover \autoref{exa:semiflat-1d}, take $\Gamma$ to be the
trivial local system with fiber $\Z^2$, and then for
$\gamma = (a,b)$ take $Z_\gamma = a Z_A + b Z_B$.)

Now define a torus bundle over $\cB$ by
\begin{equation}
  X = \Hom(\Gamma, U(1)),
\end{equation}
i.e. the fiber of $X$ over $u \in \cB$ is $\Hom(\Gamma_{u}, U(1))$,
which is indeed a torus $(S^1)^2$.
Given a local section $\gamma$ of $\Gamma$ over a patch
$U \subset \cB$, we have the evaluation map
\begin{equation}
  \varphi_\gamma: X \vert_U \to U(1).
\end{equation}
Then finally we define a map
\begin{equation}
  \cX: \Gamma \times \C^\times \to \C^\times
\end{equation}
by
\begin{equation}
  \cX_\gamma = \exp \left(\zeta^{-1} Z_\gamma + \zeta\bar{Z}_\gamma \right) \varphi_\gamma.
\end{equation}
Fixing a local section $\gamma$ of $\Gamma$ over $U \subset \cB$,
this gives a function
\begin{equation}
  \cX_\gamma: U \times \C^\times \to \C^\times
\end{equation}
Now fix a local basis $\{\gamma_1, \gamma_2\}$ of $\Gamma$
over $U \subset \cB$, with $\IP{\gamma_1,\gamma_2} = 1$,
and finally define $\Omega(\zeta) \in \Omega^2_\C(X\vert_U)$
by
\begin{equation}
  \Omega(\zeta) = \I \frac{\de \cX_{\gamma_1}(\zeta) \wedge \de \cX_{\gamma_2}(\zeta)}{\cX_{\gamma_1}(\zeta) \cX_{\gamma_2}(\zeta)}.
\end{equation}
Although we defined it over a patch $U \subset \cB$,
the $\Omega$ obtained is independent of the choice of
basis $\{\gamma_1,\gamma_2\}$, and thus it extends to a form
$\Omega(\zeta) \in \Omega^2_\C(X)$.
We can write it more compactly as
\begin{equation}
  \Omega(\zeta) = \I \DIP{\de \log \cX(\zeta), \de \log \cX(\zeta)}
\end{equation}
where $\DIP{\cdot,\cdot}$ denotes the inverse pairing,
$\Gamma^* \times \Gamma^* \to \Z$, and we think of
$\de \log \cX(\zeta)$ as a 1-form valued in $\Gamma^*$.
\end{example}

\begin{exercise} Show that the $2$-form $\Omega(\zeta)$ in
\autoref{exa:semiflat-1d-general} is the holomorphic symplectic
form for a \hk structure on $X$. Compute the symplectic forms
$\omega_i$ and the \hk metric $g$.
(The computation needed here should be almost
identical to the one in \autoref{exc:semiflat-1d-hk}).
Show that each fiber of the
projection to $\cB$ is a flat torus. (This is the reason why
this metric is called ``semiflat.'')
\end{exercise}
This \hk structure does
not have a global $U(1) \times U(1)$ action, but it does have
it \ti{locally}, i.e. on patches where $\Gamma$ can be trivialized. More invariantly we could say that
it has an action of a \ti{bundle} of groups.


\subsection{The Ooguri-Vafa space}

So far we have considered
honest torus fibrations. Now we move on to the first example
where we have \ti{singular} fibers.

\begin{example}[Ooguri-Vafa space] \label{exa:ooguri-vafa} \cite{OV1996}
We return to the Gibbons-Hawking
ansatz, \autoref{exa:gibbons-hawking}. The idea is to make a circle
bundle with a $\Z$ shift symmetry; then on dividing out by the $\Z$
action we will get a $T^2$ bundle. The simplest thing to try
would be to take the 1-dimensional lattice of points
\begin{equation}
  x_n = (2 \pi n,0,0) \in \R^3
\end{equation}
and then take $V$ to be
\begin{equation}
 \sum_{n \in \Z} \frac{1}{4\pi\norm{x-x_n}}.
\end{equation}
However there is a difficulty: for large enough $n$
we have
\begin{equation}
  \frac{1}{4 \pi \norm{x-x_n}} \approx \frac{1}{8 \pi^2 \abs{n}}
\end{equation}
and thus this sum is logarithmically divergent. We
can remove this divergence by ``subtracting an infinite constant'',
i.e. we define
\begin{equation} \label{eq:ooguri-vafa-V}
  V = \frac{1}{4 \pi \norm{x}} + \sum_{n \neq 0 \in \Z} \left( \frac{1}{4\pi\norm{x-x_n}} - \frac{1}{8\pi^2 \abs{n}} \right) + C
\end{equation}
where $C$ is any constant.
Now the divergence problem is cured, but we get a
new problem: because we have
introduced some minus signs it is not clear that $V$
is positive, and indeed $V$ is \ti{not} positive when
$x$ is far from the lattice of singularities.
To get an idea of the difficulty, recall the
coordinate $z = z_1 = x_2 + \I x_3$,
and consider the limit of large $\abs{z}$: here
we may replace the sum of point sources $\sum \delta(x-x_n)$
by a continuous string source $\frac{1}{2\pi} \delta(z) \de x_1$, where now
$\delta$ denotes the \ti{two}-dimensional delta function.
\insfig{higgs-bundles-11}{1.1}
Such a source would lead to a two-dimensional Laplace equation,
\begin{equation}
  \Delta V = -\frac{1}{2\pi}\delta(z).
\end{equation}
Thus for $\abs{z} \gg 1$ we expect
\begin{equation}
  V \approx -\frac{1}{4\pi^2} \log \abs{z} + C' + C
\end{equation}
for some constant $C'$.
This expectation can be made rigorous using the Poisson summation formula, which gives in fact
\begin{equation} \label{eq:V-ooguri-vafa-resummed}
  V = -\frac{1}{4\pi^2} \log \abs{z/\Lambda} + \frac{1}{2\pi^2} \sum_{n=1}^\infty \cos (n x_1) K_0(n \abs{z})
\end{equation}
where $\Lambda = 4 \pi e^{-\gamma+4 \pi^2 C}$, $\gamma$ is Euler's constant,
and $K_0$ is the modified Bessel function. This function has asymptotics
$K_0(M) \sim \sqrt\frac{\pi}{2M} e^{-M}$, so each term in the
sum is exponentially small for large $\abs{z}$.
Dropping these exponentially suppressed terms we get
\begin{equation}  \label{eq:ooguri-vafa-V-approx}
  V \approx V^\sf = -\frac{1}{4\pi^2} \log \abs{z/\Lambda}.
\end{equation}

Let us briefly consider the Gibbons-Hawking metric
where $V$ is \ti{exactly} given by
$V^\sf$ of \eqref{eq:ooguri-vafa-V-approx} (i.e. we consider the
``approximation'' where we drop the sum in \eqref{eq:V-ooguri-vafa-resummed}.)
$V^\sf$ is singular at $z=0$, and
for $\abs{z} \ge \Lambda$
we will not have $V > 0$, so the biggest base we can take is
\begin{equation}
U = \{0 < \abs{z} < \Lambda \} \times \R.
\end{equation}
The resulting Gibbons-Hawking metric $g^\sf$ is
invariant under continuous translations
in the $x_1$ direction, $x_1 \to x_1 + \alpha$ for any $\alpha \in \R$.
In particular, it is invariant under the discrete subgroup
$\Z \subset \R$
acting by $x_1 \to x_1 + 2 \pi n$.
After dividing out by this action $g^\sf$ descends to
one of the semiflat metrics of \autoref{exa:semiflat-1d-general}, torus
fibered over the punctured disc $0 < \abs{z} < \Lambda$:
see \autoref{exc:ooguri-vafa-semiflat} below.
However, this quotient metric seems very unlikely to admit a reasonable
extension over $z = 0$.

The Gibbons-Hawking metric $g$ obtained from the full $V$
of \eqref{eq:ooguri-vafa-V} rather than $V^\sf$
shares the bad large-$\abs{z}$ behavior
of the approximate one. Indeed, when $1 \ll \abs{z} < \Lambda$,
$g$ is very well approximated by $g^\sf$.
At small $\abs{z}$, though, the behavior of $g$ is much better than that
of $g^\sf$: it is smooth.
$g$ is not invariant under continuous translations in
the $x_1$ direction, but does still have the discrete $\Z$
symmetry $x_1 \to x_1 + 2 \pi n$, preserving
the \hk structure.\footnote{There is a subtle choice here:
the $\Z$ action on the base has to be lifted to the total space
of the $U(1)$ bundle $X$, and there are a circle's worth of ways
to do this. Thus the Ooguri-Vafa metric depends on two parameters:
the real parameter $C$ in \eqref{eq:ooguri-vafa-V} --- which we have
absorbed into $\Lambda$ --- and also a circle-valued
parameter controlling the choice of lift of the $\Z$ action. It is actually natural to combine
these into a single \ti{complex} parameter $\Lambda$; this is the
point of view taken in \cite{Gaiotto:2008cd}.}
After dividing out by this $\Z$ action we obtain a \hk
space $X$, the Ooguri-Vafa manifold. Crucially, the Ooguri-Vafa
manifold and its \hk structure \ti{do} extend smoothly over $z=0$, since near
the point singularities of $V$ we have the usual behavior
$V \sim \frac{1}{4 \pi r}$ as in \autoref{exa:gibbons-hawking}.

As usual for Gibbons-Hawking spaces,
in complex structure $I_1$, $X$ has the holomorphic function $z$.
The fiber of $X$ over a generic $z$ is a compact complex torus (circle
fibration over a circle), while over $z=0$ we get a singular
fiber (torus with a node, aka ``ordinary double point,'' a place
which looks locally like the locus $\{xy=0\} \subset \C^2$.)

\end{example}

\insfig{higgs-bundles-8}{0.92}

\begin{exercise} Let $X$ be the Gibbons-Hawking
\hk manifold with $V = V^\sf$ given by \eqref{eq:ooguri-vafa-V-approx}.
Write a formula for the connection form $\Theta$ relative to
some trivialization of $X$ as a $U(1)$ bundle away from the
line $z = 0$.
\end{exercise}

\begin{exercise} \label{exc:ooguri-vafa-semiflat} Let $X$ be the Gibbons-Hawking
\hk manifold with $V = V^\sf$ given by \eqref{eq:ooguri-vafa-V-approx}.
Verify that $X / \Z$ is an example of a semiflat metric as in
\autoref{exa:semiflat-1d-general}, where the base $\cB$ is the
punctured disc $0 < \abs{z} < \Lambda$, and $\Gamma$ is a rank $2$
local system of lattices, whose monodromy around $z=0$
is given by
$\begin{pmatrix} 1 & 1 \\ 0 & 1 \end{pmatrix} \in SL(2,\Z)$.
What is the map $Z$?
\end{exercise}

\begin{exercise} \label{exc:ooguri-vafa-holomorphic-discs} \cite{ovmh} Let $X$ be the Ooguri-Vafa space.
Show that there is an $I_\zeta$-holomorphic disc in $X$
with boundary on the torus fiber over $z$, if and
only if $\zeta / z \in \I \R$.
(Hint: to see that the disc \ti{does}
exist, you can construct it directly, along the lines of our
earlier constructions of holomorphic spheres in Gibbons-Hawking spaces;
to see that it \ti{doesn't} exist,
use the fact that the integral of $\Omega(\zeta)$ over such
a disc would have to vanish.)
\end{exercise}

\begin{exercise} Use the Poisson summation formula to verify
\eqref{eq:V-ooguri-vafa-resummed}. \fixme{warning, this is hard}
\end{exercise}

\begin{example}[Twistor description of Ooguri-Vafa space]
Let $X$ be the Ooguri-Vafa space as in \autoref{exa:ooguri-vafa}.
As with our previous examples, we may ask: what are the holomorphic
functions on $X$ in complex structure $I_\zeta$?
One global holomorphic function is easy to construct: it is
\begin{equation}
  \cX_A = \exp \left(\zeta^{-1} \frac{z}{2} - \I x_1 + \zeta \frac{\bar{z}}{2}\right).
\end{equation}
This is the same formula \eqref{eq:eta-GH} we have encountered
earlier, except that we have exponentiated it, to make it well defined
on the quotient by the $\Z$ action $x_1 \to x_1 + 2 \pi n$.

To get a second coordinate is considerably more difficult.
If we wanted to get a holomorphic function on the \ti{approximate}
Ooguri-Vafa space with $V = V^\sf$,
we could use the function written
in \autoref{exa:semiflat-1d-general},
\begin{equation} \label{eq:Xsf-ooguri-vafa}
  \cX_B^{\sf} = \exp \left(\zeta^{-1} Z_B + \I \chi + \zeta \bar{Z}_B \right),
\end{equation}
where
\begin{equation}
  Z_B = \frac{1}{4 \pi \I} (z \log (z/\Lambda) - z).
\end{equation}
The formula \eqref{eq:Xsf-ooguri-vafa} does not define a global
function on $X$, for two reasons: first, $\chi$ is only a \ti{local} fiber
coordinate; second, $Z_B$ is multivalued because of the logarithm.
We choose the principal branch of the logarithm, so that there
is a cut at $z / \Lambda \in \R_-$, and also take a trivialization
of the circle bundle defining $X$ on the complement of this cut.
It is possible to choose this trivialization in such a way that
when we cross the cut we get $\chi \to \chi + x_1$.
With these choices made, \eqref{eq:Xsf-ooguri-vafa} defines
an honest function on the complement of the cut, and crossing
the cut leads to the jumps $Z_B \to Z_B + \frac{z}{2}$
and $\chi \to \chi - x_1$,
which combine to give $\cX_B^\sf \to \cX_B^\sf \cX_A$.
The fact that the jump of $\cX_B^\sf$ is by multiplication with a
\ti{holomorphic} function is to be expected, since $\cX_B^\sf$
is itself holomorphic on both sides of the cut.
(Compare the result of \autoref{exc:ooguri-vafa-semiflat}, where
the same situation is described in a more global way, by introducing
a local system with nontrivial monodromy instead of working
with an explicit branch cut.)

Changing from $V^\sf$ to the full $V$
changes the Cauchy-Riemann equations, in such a way
that the function $\cX_B^\sf$ is \ti{not} holomorphic anymore
(though $\cX_A$ still is.)
However it turns out that we can
find a true holomorphic function $\cX_B$ which has the same \ti{asymptotic}
behavior as $\cX_B^\sf$ as we take $\zeta \to 0$ or $\zeta\to\infty$.

The formula will look slightly bizarre at first exposure:
we write
\begin{equation}
  \cX_B = \cX_B^{\sf} \cX_B^{\inst}
\end{equation}
where the ``correction'' is
\begin{align} \label{eq:Xinst-ooguri-vafa}
  \cX_B^\inst(\zeta) = \exp & \left[ \frac{\I}{4 \pi} \int_{\ell_+} \frac{\de \zeta'}{\zeta'} \frac{\zeta' + \zeta}{\zeta' - \zeta} \log(1 - \cX_A(\zeta')) \right. \\
  - & \left. \frac{\I}{4 \pi} \int_{\ell_-} \frac{\de \zeta'}{\zeta'} \frac{\zeta' + \zeta}{\zeta' - \zeta} \log(1 - \cX_A(\zeta')^{-1}) \right],
\end{align}
with
\begin{equation}
  \ell_\pm = \{ \pm z/\zeta' \in \R_- \}.
\end{equation}
Note that the integrals indeed converge, because of our careful choice
of the integration contours: along these contours $\cX_A(\zeta')$ is
exponentially decaying, so that $\log(1 - \cX_A(\zeta'))$ is also
exponentially decaying.

What is surprising here is that $\cX_B$
is actually an $I_\zeta$-holomorphic function on $X$.
To see that this is indeed true,
one can compute directly (\autoref{exc:ov-check-symplectic})
that the holomorphic symplectic form \eqref{eq:hol-symp-family}
is given by
\begin{equation} \label{eq:hol-symp-ooguri-vafa}
  \Omega(\zeta) = \I \frac{\de \cX_A(\zeta) \wedge \de \cX_B(\zeta)}{\cX_A(\zeta) \cX_B(\zeta)}.
\end{equation}
A tricky aspect of this story is that the function $\cX_B$ is
actually only \ti{piecewise} holomorphic. Indeed, the integrals
in \eqref{eq:Xinst-ooguri-vafa} are not defined when $\zeta \in \ell_\pm$.
One can however see that the \ti{limits} from the two sides exist,
\begin{equation}
  \cX_B^\pm(\zeta) = \lim_{\eps \to 0^\pm} \cX_B(\zeta \e^{\I \eps}),
\end{equation}
by deforming the contour of integration so that it lies along
$\ell_\pm$ except for a little semicircular detour around the
pole of the integrand at $\zeta' = \zeta$.
\insfig{higgs-bundles-9}{0.8}
Thus the two limits differ by the integral around the pole
at $\zeta' = \zeta$, which can be evaluated by the residue theorem,
giving the jump formulas
\begin{align}
  \cX_B^+(\zeta) &= \cX_B^-(\zeta)(1 - \cX_A(\zeta))^{-1} \text{ for } \zeta \in \ell_+, \label{eq:ooguri-vafa-cluster-1} \\
  \cX_B^+(\zeta) &= \cX_B^-(\zeta)(1 - \cX_A(\zeta)^{-1}) \text{ for } \zeta \in \ell_-. \label{eq:ooguri-vafa-cluster-2}
\end{align}

In light of this discontinuity the formula  \eqref{eq:hol-symp-ooguri-vafa}
might seem strange: how can it be that $\Omega(\zeta)$ given by this
formula is still well defined and smooth, when $\cX_B(\zeta)$ is not?
The point is that the jumps \eqref{eq:ooguri-vafa-cluster-1},
\eqref{eq:ooguri-vafa-cluster-2} are actually \ti{symplectomorphisms}.
Indeed, writing $x = \log \cX_A$ and $y = \log \cX_B$ to
simplify notation a bit, these jumps are both of the form
\begin{equation}
  (x,y) \mapsto (x,y + f(x))
\end{equation}
and of course the form
\begin{equation}
  \Omega = \de x \wedge \de y
\end{equation}
is invariant under this transformation. Thus, if we have a pair
of functions $(x,y)$ which are smooth except for
a discontinuity of this sort at some codimension-1 wall,
$\Omega$ is perfectly smooth (or more precisely it admits a
smooth extension over the wall).

$\cX_B^\inst$ is bounded as $\zeta \to 0$ and $\zeta \to \infty$.
In this sense the asymptotics of $\cX_B$ are essentially the
same as those of $\cX_B^\sf$, as we claimed.

\end{example}

\begin{exercise} \label{exc:ov-check-symplectic}
Verify the formula \eqref{eq:hol-symp-ooguri-vafa}.
This computation is a slight adaptation of one in
\cite{Gaiotto:2008cd}, but it may be more interesting to try
it yourself; the idea is that even though the integrals
\eqref{eq:Xinst-ooguri-vafa} cannot
be evaluated in closed form, once we plug into \eqref{eq:hol-symp-ooguri-vafa}
and Fourier expand in $\e^{\I x_1}$ under the integral sign
we obtain integrals which \ti{can} be done,
producing Bessel functions which eventually get matched to those appearing
in \eqref{eq:V-ooguri-vafa-resummed}.
The key integral identity needed is
\begin{equation} \label{eq:bessel-integral-identity}
 \int_{0}^\infty \frac{\de t}{t} t^n \exp \left( -M (t^{-1} + t) \right) = 2 K_{n}(2 M).
\end{equation}

\end{exercise}

\begin{exercise} Verify that $\cX_B^\inst$ is bounded as $\zeta \to 0$ and $\zeta \to \infty$.
\end{exercise}


Let us briefly comment on the relation of this example to mirror symmetry.
For any fixed $\zeta$, the space $(X,I_\zeta)$
has two open domains $\im(z / \zeta) > 0$ and $\im(z / \zeta) < 0$.
In each of these domains
we have a pair of holomorphic coordinates $(\cX_A, \cX_B)$, which moreover
are Darboux coordinates in the sense of \eqref{eq:hol-symp-ooguri-vafa}.
These coordinates can be analytically continued beyond their respective
domains, and on the overlaps the analytic continuations differ by the
jumps \eqref{eq:ooguri-vafa-cluster-1}, \eqref{eq:ooguri-vafa-cluster-2}.
In other words, our picture of $X$ is that it is glued together from
two patches, each patch
canonically mapping to $\C^\times \times \C^\times$
(probably embedded in $\C^\times \times \C^\times$ though I do not
think this has quite been proven),
overlapping in a domain with two connected components,
with the transition functions
\eqref{eq:ooguri-vafa-cluster-1}, \eqref{eq:ooguri-vafa-cluster-2}
on the two components.
(Strictly speaking this description omits the fiber over $z = 0$;
the function $\cX_A$ and the analytic continuation of $\cX_B$ from one side
actually do extend over this fiber \fixme{check}, 
but $\cX_B$ can vanish there, so they no longer map
to $\C^\times \times \C^\times$.)

This kind of description of the space $X$ is reminiscent of a general
approach for constructing Calabi-Yau manifolds by gluing
together tori $(\C^\times)^{2n}$, employed (in some form) by
Kontsevich-Soibelman, Gross-Siebert, Auroux, Gross-Hacking-Keel, following
ideas of Strominger-Yau-Zaslow.
In that approach one focuses on a single complex structure on $X$,
for which  the torus fibers are special Lagrangian: that means
we need some $I_\zeta$ with $\abs{\zeta} = 1$.

\begin{exercise} Show that the torus fibers of $X$ are special
Lagrangian with respect to the pair $(\omega_\zeta, \Omega_\zeta)$
if and only if $\abs{\zeta} = 1$.
\end{exercise}

Let us take structure $I_3$ i.e.
$\zeta = 1$. The gluing maps are supposed to be related to
holomorphic discs on a mirror manifold $X^\vee$, which is thought of
just as a symplectic manifold, but which is also
realized as a torus fibration over the same base as $X$. In some sense
the locus where the gluing takes place is to be identified with the
locus of torus fibers in $X^\vee$
which contain boundaries of holomorphic
discs in $X^\vee$.

In the case of the Ooguri-Vafa space
the mirror manifold $X^\vee$ is $X$ again with
its symplectic structure $\omega_2$, i.e. $\zeta = \I$.
Then indeed the two gluing maps we just discussed correspond to two
holomorphic discs in $X^\vee$, namely the ones
in \autoref{exc:ooguri-vafa-holomorphic-discs}:
note that these have boundaries on the fibers with $z \in \R$,
precisely the locus where the discontinuities of $\cX_B(\zeta = 1)$ are.

One of the important features of the Ooguri-Vafa space is that
it describes the local geometry near singular fibers of more interesting
elliptically fibered \hk spaces; but more precisely we need a slight
generalization for this purpose:

\begin{example}[Generalized Ooguri-Vafa space] \label{exa:gen-ooguri-vafa}
We reconsider \autoref{exa:ooguri-vafa} with a slight modification:
instead of adding just a \ti{constant} to $V$ we allow something
more general, replacing \eqref{eq:ooguri-vafa-V}
by
\begin{equation} \label{eq:gen-ooguri-vafa-V}
  V = \frac{1}{4\pi \norm{x}} + \sum_{n \neq 0 \in \Z} \left( \frac{1}{4\pi\norm{x-x_n}} - \frac{1}{8\pi^2\abs{n}} \right) + f
\end{equation}
where $f$ is any smooth harmonic function which is invariant under the
shift $x_3 \to x_3 + 2 \pi n$. All of the constructions
in \autoref{exa:ooguri-vafa} then go through as
before and give
a \hk metric which is torus fibered over some disc in the complex plane,
with one nodal fiber.
\end{example}

\subsection{Differential geometry of \hk manifolds}

\begin{prop}[\Hk manifolds are Ricci-flat] \label{prop:hk-ricci-flat}
If $X$ is a \hk manifold,
then the \hk metric $g$ is Ricci-flat.
\end{prop}
\begin{pf} View $X$ as a
\kahler manifold in structure $I_1$, with $\dim_\C X = n$.
The canonical bundle $K_X = \wedge^n (T^*)^{1,0} X$
with its induced Levi-Civita connection
admits the global covariantly constant section $\Omega_1$,
so its curvature is zero; thus, by
\autoref{prop:ricci-form-canonical}, $Ric = 0$.
\end{pf}

\autoref{prop:hk-ricci-flat} suggests one possible strategy
for constructing examples of \hk structures: first construct
a Ricci-flat \kahler metric and then try to prove it is actually
part of an \hk structure. To implement this strategy the next
theorem is the key tool.

\begin{thm}[Yau's theorem: existence of Ricci-flat \kahler metrics] \label{thm:yau-ricci-flat-kahler}
\cite{yau-thm} Suppose that:
\begin{itemize}
  \item $X$ is a compact complex manifold,
  \item the canonical bundle $K_X$ is trivial (as a complex line bundle),
  \item $\alpha \in H^2_{\dR}(X)$ is a \kahler class,
i.e. there exists some \kahler metric on $X$ with $[\omega] = \alpha$.
\end{itemize}
Then there exists a unique Ricci-flat \kahler metric on $X$
with $[\omega] = \alpha$.
\end{thm}

Note that \autoref{thm:yau-ricci-flat-kahler}
is not explicit: it
guarantees the existence of \ti{some} Ricci-flat metric but
tells us relatively little about what that metric actually is.
A nice sketch of the proof can be found in \cite{Joyce}.

\begin{thm}[Compact, \kahler, uniquely holomorphic symplectic manifolds are uniquely \hk] \label{thm:hol-symp-is-hk}
Suppose that:
\begin{itemize}
  \item $X$ is a compact complex manifold,
  \item the space of holomorphic symplectic forms on $X$ is 1-complex-dimensional, spanned by $\Omega \in \Omega^{2,0}(X)$,
  \item $\alpha \in H^2_{\dR}(X)$ is a \kahler class,
i.e. there exists some \kahler metric on $X$ with $[\omega] = \alpha$.
\end{itemize}
Then there exists a unique \hk structure $(X,I_1,I_2,I_3,g)$ such that
$[\omega_1] = \alpha$, $I_1$ is the given complex structure on $X$,
and $\omega_2 + \I \omega_3 = c \Omega$ for some $c \in \R$.
\end{thm}

\begin{pf} Since $\Omega^n$ is a nowhere vanishing
holomorphic section of the canonical bundle $K_X$,
we have $c_1(X) = 0$; thus we can use
\autoref{thm:yau-ricci-flat-kahler}
to conclude that there exists a unique Ricci-flat \kahler
metric $g$ on $X$ with $[\omega] = \alpha$.
Now let $I_1$ be the given complex structure on $X$,
and $\omega_1 = \omega$.
What we need to show is
that $g$ is actually a \hk metric.

First we use the ``Bochner principle'' which says that holomorphic
objects on Ricci-flat compact manifolds are covariantly constant. More precisely:
let $\IP{\cdot,\cdot}$ denote the $L^2$ inner product on $\Omega^*(X)$ or
$\Omega^*(X) \otimes TX$. Recall
the $\bar\partial$-Laplacian
\begin{equation}
  \Delta_{\bar \partial} = \bar\partial \bar\partial^* + \bar\partial^* \bar\partial,
\end{equation}
which has in particular $\Delta_{\bar \partial} \Omega = 0$ (trivially, since
$\bar\partial^* \Omega = 0$ for degree reasons.)
A Weitzenbock formula (see \cite{MR2325093} for a proof), plus the fact that
$Ric = 0$, gives a simple relation between this and the covariant Laplacian:
\begin{equation}
\Delta_{\bar\partial} = \nabla^* \nabla.
\end{equation}
Thus we have
\begin{equation}
  0 = \IP{\Omega, \Delta_{\bar \partial} \Omega} = \IP{\nabla\Omega,\nabla\Omega},
\end{equation}
so $\nabla \Omega = 0$.
% Thus, if we define
% \begin{equation}
%   c = \frac{\omega_1^{2n}}{(\Omega \wedge \bar\Omega)^n},
% \end{equation}
% $c$ is a constant.

Now define $\omega_2$ and $\omega_3$ by
$\omega_2 + \I \omega_3 = \Omega$, and define
$I_2 = g^{-1} \omega_2$, $I_3 = g^{-1} \omega_3$.
It is straightforward to show $I_2 I_1 = -I_3$, $I_3 I_1 = I_2$;
also $\Omega g^{-1} \Omega = 0$, so
$(I_2 + \I I_3)^2 = 0$, so $I_2^2 = I_3^2$ and
$I_2 I_3 = -I_3 I_2$.
Moreover, by construction $I_2$ is skew-symmetric with
respect to an orthogonal basis, since its matrix in such
a basis is just the matrix of $\omega_2$.
Using the structure theorem
for skew-symmetric matrices, it follows that in some
orthogonal basis $I_2$ is a direct sum of blocks
$\begin{pmatrix} 0 & c_i \\ -c_i & 0 \end{pmatrix}$ with all $c_i > 0$.
All that remains is to show that all of the $c_i$
appearing in this decomposition are equal;
then by an overall rescaling of $\omega_2$
and $\omega_3$ we can arrange they are all $1$,
which completes the proof.

So, suppose that the $c_i$ are not all equal.
Then decompose $TX$ into blocks $E_i$ labeled by
the distinct $c_i$. Evidently the $E_i$ are preserved
by $I_2$, and $E_i$ can be characterized as the $-c_i^2$
eigenspace of $I_2^2$.
We have a similar block decomposition for the
action of $I_3$, and since $I_3^2 = I_2^2$, the blocks
must coincide. So the $E_i$ are also preserved by $I_3$.
Then using $I_2^2 I_1 = -I_2 I_3$ they are also
preserved by $I_1$.
Moreover, since $I_2$ is covariantly constant,
the $E_i$ are also preserved by parallel transport.
But in this case we can construct a covariantly constant endomorphism
of $TX$ which acts by a different constant on each $E_i$, and
thus commutes with $I_1$.
Then applying this endomorphism to $\Omega$
we would get other holomorphic symplectic forms on $X$,
violating our assumption.
\end{pf}

\begin{example}[Elliptically fibered K3 surface] \label{exa:elliptically-fibered-k3}
Now let's construct a \hk space with torus fibers over the \ti{compact}
base $\C\PP^1$. The idea: for each $u \in \C\PP^1$ we will write
\begin{equation} \label{eq:X-u}
  X_{\vec \phi} = \{ y^2 z = x^3 + A(u) xz^2 + B(u) z^3 \} \subset \C\PP^2,
\end{equation}
and let $X$ be the union of the $X_{\vec \phi}$.

We want $X$ to carry a global holomorphic $2$-form. How can we make it?
On each fiber $X_{\vec \phi}$ we have the holomorphic $1$-form $\de x / y$.
We want to wedge this with
a holomorphic $1$-form coming from the base. Such a $1$-form
doesn't literally exist, because $K_{\C\PP^1} \simeq \cO(-2)$; but there is
a nowhere vanishing \ti{twisted} $1$-form,
\begin{equation}
  \eta \in H^0(K_{\C\PP^1} \otimes \cO(2)).
\end{equation}
Our desired holomorphic symplectic form will be
\begin{equation}
  \Omega = \eta \wedge \frac{\de x}{y}.
\end{equation}
For this to make global sense, $\de x/y$ needs to be
valued in $\cO(-2)$. Also, for the equation \eqref{eq:X-u}
to make sense, $y^2 z$ and $x^3$ must be valued in the same place.
To make all this work, we make $x$ valued in $\cO(4)$, $y$ in $\cO(6)$,
and $z$ in $\cO(0)$. Then $A(u)$ must be a (fixed) section of $\cO(8)$
and $B(u)$ a section of $\cO(12)$.
Finally we define:\footnote{What the notation $\PP[\cO(4) \oplus \cO(6) \oplus \cO(0)]$ means: we take the locus where $x$, $y$, $z$ don't
simultaneously vanish, then quotient by simultaneous rescalings
$(x,y,z) \to (\lambda x, \lambda y, \lambda z)$ with $\lambda \in \C^\times$;
this defines a bundle over $\C\PP^1$ with each fiber isomorphic to $\C\PP^2$.}
\begin{equation}
  X = \{ y^2 z = x^3 + A(u) xz^2 + B(u) z^3 \} \subset \PP[\cO(4) \oplus \cO(6) \oplus \cO(0)] \to \C\PP^1
\end{equation}
The fiber $X_{\vec \phi}$ is \ti{smooth} as long as the polynomial
$x^3 + A(u) x + B(u)$ doesn't have any double zeroes in $x$,
i.e. as long as the discriminant
\begin{equation}
  \Delta(u) = 27 B(u)^2 + 4 A(u)^3
\end{equation}
does not vanish. Since $\Delta$ is a section of $\cO(24)$,
if it has no multiple zeroes we get $24$ singular fibers.
To look more closely at the singular fibers, note that
at each of them we have $A(u) \neq 0$ and $B(u) \neq 0$
(otherwise $\Delta$ would have a higher-order zero at $u$).
Thus the singular fiber is of the form
\begin{equation}
  \{ y^2 z = x^3 + A x z^2 + B z^3 \} \subset \C\PP^2
\end{equation}
with $A, B \neq 0$ and $27B^2 - 4A^3 = 0$. This
gives a nodal torus (like the one in the Ooguri-Vafa space.)
It is straightforward moreover to check that if $\Delta$ has no multiple zeroes
then the total space of $X$ is smooth.
It carries the holomorphic symplectic form $\Omega$.
Finally, $X$ is \kahler. \fixme{simple proof? add \kahler
form coming from $\C\PP^2$ fibers to ones coming from base?}
Thus by \autoref{thm:hol-symp-is-hk}, $X$ admits \hk metrics.

We have obtained a family of \hk manifolds: one for each
$(A(u),B(u),\alpha)$, where
$A(u) \in H^0(\cO(8))$, $B(u) \in H^0(\cO(12))$
are such that $\Delta(u)$ has only
simple zeroes, and $\alpha$ is a \kahler class.

As we vary $A(u)$, $B(u)$
and $\alpha$
the diffeomorphism type of the space does not change, so we could think
of this as a family of \hk structures on a single manifold.
Most of the complex structures on this manifold are \ti{not} of the
type we constructed here: indeed most of them are not even algebraic.
\end{example}

\begin{exercise} Check that the $1$-form $\de x / y$ is
holomorphic on the curve \eqref{eq:X-u}.
\end{exercise}

\begin{exercise} Check that if $\Delta$ has no multiple
zeroes then $X$ is smooth.
\end{exercise}

In general, Yau's Theorem gives very little by way of explicit information
about the Ricci-flat metrics it provides. In the case of the K3 surface
we have at least some \ti{asymptotic} information, thanks to the work
of Gross-Wilson \cite{MR1863732}.
\ti{Very roughly} this says the following.
Fix an elliptically fibered K3 surface $X$ as in
\autoref{exa:elliptically-fibered-k3}. The base $\C\PP^1$
has a natural \kahler metric.
Moreover there exists a family
of \kahler classes $\alpha(R) \in H^{1,1}_\R(X)$,
parameterized by $R \in \R_+$, such that the corresponding \hk metrics
$g(R)$ can be described concretely:
\begin{equation}
    g(R) \approx g_{app}(R) + O(\e^{-M R})
\end{equation}
where $M$ is controlled by the distance between the singular fibers,
and $g_{app}(R)$ are obtained by
taking generalized Ooguri-Vafa metrics (\autoref{exa:gen-ooguri-vafa})
in small discs around the $24$ singular fibers and gluing them to
semiflat metrics (\autoref{exa:semiflat-1d-general})
on the rest of $X$ --- where the holomorphic data $Z_\gamma$ entering
the semiflat metric
are certain periods of the holomorphic symplectic form
$R \Omega$ --- and then dividing by $R^2$.
Then the torus fibers of $g(R)$ have
area $4 \pi^2 / R^2$. As $R \to \infty$ these metrics
have a Gromov-Hausdorff limit,
in which the torus fibers collapse onto the \kahler base $\C\PP^1$.



\subsection{\Hk quotients}

\begin{defn}[\Hk moment map] Suppose $X$ is \hk and a compact group
$G$ acts on $X$ by isometries preserving the \hk structure.
Then a \ti{\hk moment map} for this action is a map
\begin{equation}
  \vec\mu = (\mu_1, \mu_2, \mu_3): X \to \fg^* \otimes \R^3
\end{equation}
where $\mu_i$ is a moment map for the action with respect
to $\omega_i$.
\end{defn}

\begin{exercise} Suppose $\vec\mu$ is a \hk moment map as above.
Then for $\vec s \in S^2$, defining
\begin{equation}
  \mu_{\vec s}: X \to \fg^*
\end{equation}
by
\begin{equation}
  \mu_{\vec s} = \vec\mu \cdot \vec s
\end{equation}
show that $\mu_{\vec s}$ is a moment map for the action
with respect to $\omega_{\vec s}$.
\end{exercise}

\begin{exercise} Suppose
$X$ is a Gibbons-Hawking space as in \autoref{exa:gibbons-hawking}.
Then $X$ has a $U(1)$ action by isometries
preserving the \hk structure and also has a projection $X \to \R^3$.
Show that this projection is a \hk moment map for the $U(1)$ action
(when we identify $\fu(1) \simeq \R$ as usual).
\end{exercise}

\begin{defn}[\Hk quotient] Suppose $X$ is \hk and a compact group
$G$ acts on $X$, with \hk moment map $\mu$.
Then the \ti{\hk quotient}
of $X$ by $G$ is
\begin{equation}
  X \hkq G = \vec\mu^{-1}(0) / G.
\end{equation}
\end{defn}

\begin{thm}[\Hk quotients are \hk] \label{thm:hk-quotients-are-hk}
Suppose $X$ is \hk and a
compact group $G$ acts on $X$, with \hk moment map $\mu$.
Also suppose $G$ acts freely on
$\vec \mu^{-1}(0)$. Then $X \hkq G$ is a manifold, with
\begin{equation}
  \dim_\R (X \hkq G) = \dim_\R X - 4 \dim_\R G,
\end{equation}
and the quotient metric on $X \hkq G$ is \hk.
\end{thm}
\begin{pf} First we show that if $G$ acts freely on
$\vec\mu^{-1}(0)$ then $0$ is a regular value
for $\vec\mu$.

To show $\de\vec\mu$ surjective
it is sufficient to show that the equation
\begin{equation}
  \de \mu_1 \cdot Z_1 + \de \mu_2 \cdot Z_2 + \de \mu_3 \cdot Z_3 = 0
\end{equation}
implies $Z_1 = Z_2 = Z_3 = 0$.
We may rewrite this as
\begin{equation}
  \iota_{\rho(Z_1)} \omega_1 + \iota_{\rho(Z_2)} \omega_2 + \iota_{\rho(Z_3)} \omega_3 = 0
\end{equation}
which in turn is equivalent to
\begin{equation}
  I_1 \rho(Z_1) + I_2 \rho(Z_2) + I_3 \rho(Z_3) = 0.
\end{equation}
To show this implies $Z_1 = Z_2 = Z_3 = 0$ is the content of \autoref{exc:quat-linear-indep} below. Using this result, we get that $0$ is indeed a regular
 value for $\vec\mu$, so $\vec\mu^{-1}(0)$ is a manifold.

Now, consider the function
\begin{equation}
 M_1 = \mu_2 + \I \mu_3: X \to \fg_\C.
\end{equation}
For any $Z \in \fg$ we have
\begin{equation}
\de M_1 \cdot Z = \iota_{\rho(Z)}(\omega_2 + \I \omega_3) = \iota_{\rho(Z)} \Omega_1 \in \Omega^{1,0}(X),
\end{equation}
so $M_1$ is holomorphic.
Thus $Y = M_1^{-1}(0)$ is an $I_1$-complex
submanifold, hence in particular \kahler for $\omega_1$. Moreover $G$ acts on $Y$
preserving $\omega_1$, with moment map $\mu_1$,
and we have
\begin{equation}
 X \hkq G = \vec\mu^{-1}(0) / G = (M_1^{-1}(0) \cap \mu_1^{-1}(0)) / G = Y \kq G.
\end{equation}
Thus by \autoref{prop:kahler-quotients-are-kahler}, $I_1$ descends
to the quotient $X \hkq G$, and the
quotient metric on $X \hkq G$ is \kahler for $I_1$.
Similarly it is \kahler for $I_2$, $I_3$.
\end{pf}

\begin{exercise} \label{exc:quat-linear-indep}
Suppose $V$ is a quaternionic vector space, with a compatible metric
and a real subspace $W \subset V$, such that
$I_i W$ is orthogonal to $W$ for $i = 1,2,3$.
Suppose also
\begin{equation}
 w_0 + I_1 w_1 + I_2 w_2 + I_3 w_3 = 0, \qquad w_i \in W.
\end{equation}
Then show that $w_0 = w_1 = w_2 = w_3 = 0$.
\end{exercise}

The idea of \autoref{thm:hk-quotients-are-hk} is
that the single \hk quotient space can be realized as a \kahler
quotient in many different ways. There is also yet another way to think of
it, using the fact that the \kahler quotient is (ignoring issues of stability)
a quotient by a complexification $G_\C$. Thus modulo stability we have
\begin{equation}
  X \hkq G = M_1^{-1}(0) / G_\C = X \kq G_\C
\end{equation}
i.e. it looks like $X \hkq G$ is a \ti{holomorphic symplectic} version
of the symplectic quotient. This point of view is useful for
constructing the twistor space of $X \hkq G$: it arises
as a \ti{fiberwise} version of the holomorphic symplectic quotient,
i.e. (again ignoring issues of stability)
\begin{equation}
  \cZ(X \hkq G) = \cZ(X) \kq G_\C.
\end{equation}

\begin{example}[Hyperkahler quotient of $\bbH$ by $U(1)$] \label{exa:hk-quotients-of-H}
Suppose $X = \bbH$ with its standard \hk structure, and the standard
$U(1) \subset SU(2)_R$ action from \autoref{exc:R4-moment-maps}.
It follows from the result of \autoref{exc:R4-moment-maps}
that for any choice of $\vec\mu$, $\vec\mu^{-1}(0)$ is a circle,
and thus $\bbH \hkq U(1)$ is a point.

Let us look in more detail at how this goes.
We have the moment maps
\begin{align}
  \mu_{1} &= \half (\abs{w}^2 - \abs{z}^2) + c, \\
  M_1 = \mu_{2} + \I \mu_{3} &= -\I w z + \alpha,
\end{align}
for constants $c \in \R$ and $\alpha \in \C$.
We want to determine $\vec\mu^{-1}(0)$. Setting $M_1 = 0$
means
\begin{equation} \label{eq:H-complex-mm}
 wz = - \I \alpha
\end{equation}
Assuming $\alpha \neq 0$ for a moment,
this gives a $\C^\times$ parameterized by say $w$,
with $z = - \I \alpha / w$. Now we consider the condition
$\mu_1 = 0$: this says
\begin{equation} \label{eq:H-real-mm}
  0 = \half\left(\abs{w}^2 - \frac{\abs{\alpha}^2}{\abs{w}^2}\right) + c
\end{equation}
which has a single positive solution for $\abs{w}^2$, irrespective of
the value of $c$. Thus $\vec\mu^{-1}(0)$ is a circle, parameterized
by the phase of $w$. Finally dividing out by $U(1)$ gives a single point,
so in this case we got $\bbH \hkq U(1) = \{ pt \}$.

If $\alpha = 0$ the story looks a little different: the condition
\eqref{eq:H-complex-mm} says
\begin{equation}
wz = 0,
\end{equation}
and the condition $\mu_1 = 0$ becomes
\begin{equation}
  \abs{w}^2 - \abs{z}^2 = - 2c.
\end{equation}
So if $c > 0$ we get $w = 0$, $\abs{z} = \sqrt{2c}$, and dividing out by $U(1)$
gives a point as before. Similarly if $c < 0$ we get $z = 0$, $\abs{w} = \sqrt{2c}$,
and dividing out by $U(1)$
gives a point. If $c = 0$ then we are in the singular situation $w = z = 0$,
so $U(1)$ does not act freely.

Thus altogether we have found that if $(\alpha,c) \neq (0,0)$ we have
$\bbH \hkq U(1) = \{ pt \}$, and if $(\alpha,c) = (0,0)$, $U(1)$ does not
act freely on $\vec\mu^{-1}(0)$. (It happens that we get a point anyway,
but morally speaking we should consider this as a singular situation, where
we would not expect to get a manifold.)

Note that although the analysis looks different for $\alpha \neq 0$
and $\alpha = 0, c \neq 0$ the eventual conclusion is the same.

\insfig{higgs-bundles-12}{1.15}

This is as we should expect: $(\alpha, c)$ are just different components
of a single \hk moment map, and could be rotated into one another by action of $SU(2)_R$.
Said otherwise, the analysis looks unsymmetric only because we chose to work in the
complex coordinates given by the arbitrarily-chosen complex structure $I_1$.

Finally note that the ``hard'' part in this example was solving the real
equation \eqref{eq:H-real-mm} which came from $\mu_1 = 0$. If we are only
interested in getting the quotient as a complex manifold in structure $I_1$,
we could try to sidestep this problem by looking instead at
$M_1^{-1}(0) / \C^\times$, which modulo problems of stability is supposed
to be equal to the desired $\bbH \hkq U(1)$. For $\alpha \neq 0$,
$M_1^{-1}(0)$ is $\{ zw = - \I \alpha \}$, a single $\C^\times$-orbit,
which indeed is stable (it intersects the locus $\mu_1 = 0$).
For $\alpha = 0$ it's trickier: the locus $zw = 0$ contains two
$\C^\times$-orbits --- one open and one just the point $z = w = 0$.
For $c \neq 0$ the open orbit is stable;
for $c = 0$ the point orbit is stable, but $U(1)$ doesn't act freely
there.

\end{example}

\begin{example}[Modifying \hk manifolds with $U(1)$ symmetry] \label{exa:modifying-hk-with-circle} \cite{modif-hk}
Suppose $X$ is any \hk manifold with a $U(1)$ action by triholomorphic
isometries, with a moment map $\vec\mu_X$. Then we can consider
\begin{equation}
X' = X \times \bbH.
\end{equation}
Putting our standard $U(1) \subset SU(2)_R$ action on $\bbH$, with
its standard moment map $\vec\mu_{\bbH}$, we get a diagonal $U(1)$
action on $X'$, with moment map
\begin{equation}
  \vec\mu = \vec\mu_X + \vec\mu_{\bbH}.
\end{equation}
Note the $U(1)$ action is free except at points $(x,0)$
where $x \in X$ is a fixed point of the $U(1)$ action there.
Thus provided we choose $\vec\mu_X$ so that it does not vanish
at these points $x$, the \hk quotient
\begin{equation}
  Y = X' \hkq U(1)
\end{equation}
is a \hk manifold, of the same dimension as $X$. We think of it
as a \ti{modification} of $X$.
\end{example}

\begin{example}[Multi-Eguchi-Hanson spaces as \hk quotients]
Take $X = \bbH^{n}$.
In structure $I_1$, $X$ is naturally identified with
$\C^{2n}$ with coordinates $(z_1, w_1, \dots, z_{n}, w_{n})$.
It has a triholomorphic $U(1)^{n}$ action (coming from $SU(2)_R$ action on
each factor), acting by $z_i \to e^{\I \alpha_i} z_i$,
$w_i \to e^{-\I \alpha_i} w_i$, which has a moment map
$X \to \R^3 \otimes_\R \fu(1)^{n} \simeq \R^{3n}$,
just given by $n$ copies of the one in \autoref{exa:hk-quotients-of-H}.
% , given by
% \begin{align}
%   \mu_{i,1} &= \half (\abs{w_i}^2 - \abs{z_i}^2), \\
%   \mu_{i,2} + \I \mu_{i,3} &= -\I w_i z_i.
% \end{align}
Now consider the ``center of mass'' subgroup $G \subset U(1)^{n}$
given by the condition $\prod_i g_i = 1$.
We have $G \simeq U(1)^{n-1}$.
Choose a tuple $x = (x_1, \dots, x_n) \in \R^{3n}$.
Now we consider the \hk quotient
\begin{equation}
  Y = X \hkql{{x}} G.
\end{equation}
We claim this quotient is a multi-Eguchi-Hanson space
as in \autoref{exa:multi-eguchi-hanson}, with $n$ singularities
at the positions $x_i$.

To describe this we study the quotient at the level of the
twistor space.
So we begin with the twistor space of $\bbH^n$, which is
$\cO(1)^{\oplus 2n}$, with
$\cO(1)$-valued coordinates $z_i$, $w_i$.
The action of $G$ here complexifies nicely to an
action of $G_\C = (\C^\times)^n$.
The moment map for the $i$-th $\C^\times$ action is
$-\I w_i z_i$. Thus in taking the symplectic
quotient by $G_\C$ we first impose the moment map
conditions
\begin{equation} \label{eq:eh-quotient-moment-map-conditions}
  -\I (w_1 z_1 - w_i z_i) = \eta_1 - \eta_i
\end{equation}
for all $i$, where $\eta_i$ is the section of
$\cO(2)$ corresponding to the point $x_i \in \R^3$.

We still need to divide out by the $G_\C$-action.
To write the result in a compact way,
we define an $\cO(2)$-valued function by
\begin{equation} \label{eq:eh-quotient-overall-moment-map}
  \eta = \I w_1 z_1 + \eta_1.
\end{equation}
This is a natural object to consider: it is
a moment map for the remaining
$\C^\times$
action, for which a representative generator is
$w_1 \to e^{\I \alpha} w_1$, $z_1 \to e^{-\I \alpha} z_1$.
Now combining \eqref{eq:eh-quotient-moment-map-conditions}
and \eqref{eq:eh-quotient-overall-moment-map} we get
\begin{equation} \label{eq:eh-quotient-moment-cond-simplified}
  \I w_i z_i = \eta - \eta_i.
\end{equation}
Finally defining the $G_\C$-invariant coordinates
$u = \prod_{i=1}^n w_i$ and
$v = \prod_{i=1}^n (\I z_i)$,
and taking the product over all $i$ in
\eqref{eq:eh-quotient-moment-cond-simplified}, we get
\begin{equation}
  u v = \prod_{i=1}^n (\eta - \eta_i).
\end{equation}
We have seen this equation before: it is obeyed
by the functions $u,v,\eta$ on the twistor space
for a multi-Eguchi-Hanson space
(\autoref{exa:multi-eguchi-hanson-twistor}).
\fixme{still need to show the space is literally equal}

\end{example}


\section{Transition to infinite dimensions}

Although our main eventual interest is in finite-dimensional
\hk spaces, the way we construct them will involve a
detour into infinite dimensions: namely we will divide
infinite-dimensional vector spaces by infinite-dimensional
groups, in such a way that the quotient is finite-dimensional.

In this section, to get prepared, we briefly describe
the necessary modifications of some
of our constructions to the infinite-dimensional setting.
It might be a good idea to skip this section until you feel
the need to look at it.

Let us motivate a bit what we have to do.
The most obvious infinite-dimensional spaces in our context
are spaces of $C^\infty$ sections of vector bundles.
In order to develop the symplectic quotient
directly in this context we would need (at least)
a version of the inverse function theorem.

For this purpose we will pass to \ti{completions}
of the spaces of $C^\infty$ sections with
respect to certain ``Sobolev'' norms.
This has the advantage that these completions are Banach spaces, for which
more off-the-shelf technology exists, including a
reasonable inverse function theorem. In the end we will have to
pass from the completions back to the $C^\infty$ spaces of
our real interest. The theory of elliptic regularity ensures
that this works without difficulty.

You may wonder why we do not look for some version
of the inverse function theorem which works for the spaces of
$C^\infty$ sections directly. Actually a candidate theorem
does exist: it is called the Nash-Moser theorem. It applies
to a rather specific sort of infinite-dimensional spaces,
namely \ti{tame Frechet spaces}, and to \ti{tame maps} between them.
The spaces of $C^\infty$ sections are indeed tame Frechet spaces,
and the maps we need to consider are tame maps.
My impression is that this tameness is nearly equivalent to
the existence of Sobolev norms and the statement that the maps
are well behaved with respect to these; so in the end perhaps
this method would not be so different from what we do here.


\subsection{Banach spaces}

\begin{defn}[Banach space] A \ti{Banach space} is
a normed vector space $V$ over $\R$ or $\C$, which
is complete as a metric space.
\end{defn}

\begin{defn}[Norm of a linear functional] Say $V$ is a Banach
space over $\R$ (resp. $\C$), and we have a
linear map $\eta: V \to \R$ (resp. $\C$). Then we define
\begin{equation}
  \norm{\eta} = \sup_{v \in V: \norm{v}=1} \abs{\eta(v)}.
\end{equation}
We say $\eta$ is \ti{bounded} if $\norm{\eta} < \infty$.
\end{defn}

Unlike the finite-dimensional situation, linear maps
on Banach spaces need not be continuous:

\begin{prop}[Continuous = bounded] If $V$ is a Banach space
over $\R$ (resp. $\C$), a linear map $\eta: V \to \R$
(resp. $\C$) is continuous if and only if it is bounded.
\end{prop}

Loosely speaking, we want to consider two Banach spaces as
``the same'' if there is a bounded linear isomorphism
between them, even if that isomorphism does not preserve the
norm. So we can think of a Banach space as coming not with
a single norm but with a bunch of them, all inducing the
same topology, and all more or less equally good.

\begin{defn}[Dual of Banach space] If $V$ is a Banach space
over $\R$ (resp. $\C$),
$V^*$ is the space of all continuous linear maps $V \to \R$
(resp. $\C$). $V^*$ is a Banach space.
\end{defn}

\begin{defn}[Nondegenerate pairing of Banach spaces] If $V$, $W$
are Banach spaces over $\R$, a \ti{nondegenerate pairing}
between $V$ and $W$ is a bilinear map
\begin{equation}
  V \times W \to \R
\end{equation}
continuous in each factor,
such that the induced maps
\begin{equation}
  V \to W^*, \qquad W \to V^*
\end{equation}
are injections.
\end{defn}

Some authors would call this a ``weakly nondegenerate'' pairing.
I emphasize that it is not the same as requiring the induced maps
to be \ti{isomorphisms}.

\begin{defn}[Complemented subspace] If $V$ is a Banach space
and $W \subset V$ a closed subspace, we say $W$ is
\ti{complemented} if there exists a closed subspace $W' \subset V$
such that $W \cap W' = \{0\}$ and $W + W' = V$.
\end{defn}

\begin{exercise} Suppose $V$ is a Banach space and
 $W \subset V$ is a closed subspace of finite codimension.
 Show that $W$ is complemented.
\end{exercise}

\begin{defn}[Derivatives of maps of Banach spaces]
If $f: V \to W$ is a map of Banach spaces,
we say $f$ is \ti{differentiable} and $\de f: V \to W$ its
\ti{derivative} if for all $v \in V$ we have
\begin{equation}
  \lim_{h \to 0} \frac{\norm{f(v+h) - f(v) - \de f(h)}}{\norm{h}} = 0.
\end{equation}
\end{defn}


\begin{thm}[Inverse function theorem for Banach spaces]
Suppose $f: V \to W$ is a smooth map of Banach spaces, and for some
$v \in V$ the map $\de f(v): V \to W$ is a bounded isomorphism.
Then $f$ there exists a neighborhood $U$ of $v$ such that $f \vert_U$
admits a smooth two-sided inverse.
\end{thm}

\subsection{Sobolev spaces}

\begin{example}[Sobolev spaces] Suppose $E$ is a complex
vector bundle with Hermitian metric $h$
over a compact Riemannian manifold $X$. Then for $k \in \Z_{\ge 0}$ and
$1 < p < \infty$, we define the \ti{Sobolev norm}
on smooth sections of $E$ as follows.
First fix an $h$-unitary connection $\nabla$ on $E$.
Then write
\begin{equation}
  \norm{s}^p_{p,k} = \int_X \left(\norm{s}^p + \norm{\nabla s}^p + \norm {\nabla \nabla s}^p +
    \cdots + \norm{\nabla^k s}^p\right) \de vol_X.
\end{equation}
(Here the various terms are sections of tensor bundles $E \otimes (TX)^m$,
considered with the norms induced by $h$ and the metric on $X$.)
Then $L^p_k(E)$ is the \ti{completion} of the space of smooth
sections of $E$ with respect to $\norm{\cdot}_{p,k}$ (modulo identification
of functions which agree almost everywhere).
While the precise norm depends on the choice of $\nabla$, the
different Banach spaces $L^p_k(E)$ we obtain from the different
norms are all isomorphic.
\end{example}

Crudely speaking, $L^p_k(E)$ consists of functions which are $L^p$ and
have $k$ derivatives that are also in $L^p$.
There is actually an extension of this definition to arbitrary $k \in \R$
(fractional number of derivatives!) which is a bit more technical to describe:
to get the required norm $\norm{\cdot}_{p,k}$
one has to use a partition of unity to reduce to a patch of $\R^n$,
then use Fourier transform. There is an efficient description of this in
\cite{MR2359489}, which I like. When $k<0$ these should be thought of
as distributions, and indeed $L^p_{-k}(E)$ is the dual of
$L^p_k(E)$.
Alternatively, morally $L^p_{-k}(E)$ means sections of $E$
which are locally a bit singular, but become $L^p$ after they
are integrated $k$ times.

We will only need the case $p=2$, i.e. we will work always with
$L^2$ objects admitting various numbers of derivatives.


\subsection{Banach manifolds}

A good review of this material is in \cite{MR0158410}.

\begin{defn}[Banach manifold] A (smooth) \ti{Banach manifold} is
a Hausdorff topological space $X$, equipped with a maximal
atlas of open charts $U_\alpha$ with smooth injective maps
\begin{equation}
  \phi_\alpha: U_\alpha \to V_\alpha
\end{equation}
such that each $V_\alpha$ is a Banach space, $\phi_\alpha(U_\alpha)$
is an open subset, and the transition maps $\phi_\alpha \circ \phi_\beta^{-1}$
are smooth.
\end{defn}

From now on in this section let $X$ be a Banach manifold.

\begin{defn}[Vector bundle] Vector bundles $V$ over $X$
are defined in the usual way: they are Banach manifolds
with projection $\pi: V \to X$, admitting local trivializations with
smooth transition functions.
\end{defn}

\begin{defn}[Tangent bundle and differentials] For $x \in X$ the \ti{tangent space} $T_x X$
is defined in the ``classical'' way: we take
$\sqcup_{\alpha: x \in U_\alpha} V_\alpha$, modulo
the relation $v \in V_\alpha \sim v' \in V_{\alpha'}$ if
$v' = Jv$, where $J: V_\alpha \to V_{\alpha'}$ is the differential
of the transition map $\phi_{\alpha'}^{-1} \circ \phi_\alpha$.
This is again a Banach space. The $T_x X$ fit together into a vector bundle
over $X$. For a smooth map $f: X \to Y$ one then gets in the usual
way a smooth map $\de f: TX \to TY$.
\end{defn}

This definition of tangent vectors is equivalent to taking
equivalence classes of curves with the same $1$-jet,
but generally \ti{not} equivalent to looking at derivations acting on
smooth functions (in general there are more derivations
than tangent vectors, unless the model Banach space
is reflexive; on the other hand our main application will
be to Sobolev spaces, which \ti{are} reflexive, so maybe
we needn't worry too much about this.)

\begin{defn}[Cotangent bundle and differential forms] The cotangent bundle,
differential forms, and the $\de$ operator can be defined by the same
constructions as usual.
\end{defn}

\begin{defn}[Submanifold] A subset $Y \subset X$ is a \ti{submanifold}
if for every $y \in Y$ there exists a chart $U_\alpha$ of $X$,
such that $\phi_\alpha(Y \cap U_\alpha) = W_\alpha \cap \phi_\alpha(U_\alpha)$
for some \ti{closed} subspace $W_\alpha \subset V_\alpha$.
\end{defn}

This is just like the usual definition of submanifold
(sometimes called ``embedded submanifold'' as opposed to immersed);
the key extra word in the infinite-dimensional setting
is ``closed.''

% \begin{defn}[Weakly regular value] Given $f: X \to Y$, $y \in Y$
% is a \ti{weakly regular value} of $f$ if
% \begin{itemize}
%   \item $f^{-1}(y)$ is a submanifold of $X$,
%   \item $T (f^{-1}(y)) = \ker \de f$.
% \end{itemize}
% \end{defn}


\subsection{Symplectic forms and symplectic quotients}

\begin{defn}[Symplectic Banach manifold]
The definition of symplectic Banach manifold is the same as
\autoref{def:symplectic-manifold}, except that the notion
of nondegeneracy is in the weak sense: we require only that
the map
\begin{align}
  T_x X &\to T^*_x X \\
  T_x X &\mapsto \iota_v \omega = \omega(v,\cdot)
\end{align}
is an \ti{injection} for each $x \in X$,
not an isomorphism.
\end{defn}

Some authors refer to this as a \ti{weakly} symplectic
form, reserving ``nondenegerate'' for the case when
$v \mapsto \iota_v \omega$ is a bijection, not only an injection.

\begin{defn}[Banach Lie group]
The definition of Banach Lie group $G$ is just as in the
finite-dimensional case: it is a
Banach manifold equipped with a group structure,
such that the multiplication and inversion maps
are smooth. The Lie algebra $\fg$ is defined as
$T_e G$ and acquires the Lie bracket in the usual way.
%\fixme{ref Glockner-Neeb coming out Apr 14?}
\fixme{ref Neeb on Infinite-Dimensional Lie Groups?}
\end{defn}

\begin{prop}[Free proper quotients are Banach manifolds] \label{prop:free-proper-quotients-are-banach-manifolds}
This is just like \autoref{prop:free-proper-quotients-are-manifolds}
except that we need the extra hypothesis that the
tangent spaces to orbits,
$T_x (Gx) \subset T_x X$, are closed and complemented. \fixme{ref Bourbaki}
\end{prop}


In the situation where we will use
\autoref{prop:free-proper-quotients-are-banach-manifolds}, the
tangent spaces to $G$-orbits have finite codimension; in that
case they are automatically complemented if they are closed.

\begin{defn}[Moment maps and symplectic quotients] \label{def:banach-mm-and-sq}
The definition of moment maps and symplectic quotients are the same
as \autoref{def:moment-map} and \autoref{def:symplectic-quotient}.
\end{defn}

\begin{thm}[Symplectic quotient is symplectic] \label{prop:banach-symplectic-quotient-is-symplectic}
Suppose $X$ is a symplectic Banach manifold, with a group $G$
acting properly on it, with moment map $\mu$.
Suppose that $G$ acts freely on $\mu^{-1}(0)$, and we impose
some additional conditions:
\begin{itemize}
\item $\mu^{-1}(0)$ is a submanifold of $X$,
% \item there exists a dense subspace $W \subset \fg^*$, containing
% $\im \mu$, carrying a Banach space topology (not necessarily the
% induced topology) such that
% $\mu: X \to W$ is continuous, and $\im \mu \subset W$ is closed,
\item the tangent
spaces $T = T_x (Gx)$ to $G$-orbits are closed and complemented,
\item \begin{equation}
  T = (T^{\perp_\omega})^{\perp_\omega}.
\end{equation}
\end{itemize}
Then $X \kq G$ is a Banach manifold, and there is a
symplectic form $\omega_{X \kq G}$ on $X \kq G$, with the
property
\begin{equation}
  \pi^* \omega_{X \kq G} = \iota^* \omega.
\end{equation}
\end{thm}

\begin{pf}

Follow the pattern of the proof
of \autoref{prop:symplectic-quotient-is-symplectic}.
The infinite-dimensional setting leads to the following
hiccups:
\begin{itemize}

\item
We just \ti{assume} that $\mu^{-1}(0)$ is a submanifold
rather than proving it; it would be nice to see in a general
way why this follows ``formally'' from the $G$-action being
free, as in the finite-dimensional case, but
this seems to be subtle, or at least, I had trouble
making it work. In the case we need, we will
prove it by hand.

\item To see that $\mu^{-1}(0) / G$ is a manifold
we use \autoref{prop:free-proper-quotients-are-banach-manifolds}.

\item The ``dimension counting'' argument which showed
$\omega$ nondegenerate in the finite-dimensional case
gets replaced by a use of the assumption $T = (T^{\perp_\omega})^{\perp_\omega}$.
\end{itemize}
\end{pf}

\begin{defn}[\Hk quotients] \fixme{again same as in finite dimensions}
\end{defn}

\begin{thm}[\Hk quotient is \hk]  \fixme{...}
\end{thm}

\subsection{Ellipticity} \label{sec:ellipticity}

We give here a very brief and sketchy account of
ellipticity. Something much nicer can be found in \cite{MR2359489}.

Suppose $X$ is a manifold carrying
vector bundles $E$, $F$. We
consider a smooth differential operator $D: E \to F$
and a smooth section $f$ of $F$.
We would like to know when we can solve the equation
\begin{equation} \label{eq:Def}
 D e = f
\end{equation}
for $e$, and what kind of regularity properties
$e$ should have.

To get oriented let us consider a very special case,
the Laplace operator in a Euclidean vector space $V$,
\begin{equation}
  D = \sum_{i=1}^n \partial_i^2.
\end{equation}
Here, we could try to solve \eqref{eq:Def}
by Fourier transformation:
at least formally the differentiations
become multiplications, and we get
\begin{equation}
  -\norm{p}^2 \hat{e}(p) = \hat{f}(p)
\end{equation}
for $p \in V^*$, which would be solved by
\begin{equation}
  \hat e(p) = -\frac{\hat{f}(p)}{\norm{p}^2}
\end{equation}
or, returning to position space,
\begin{equation} \label{eq:back-to-position}
  e(x) = -\int_{V^*} (\de vol_{V^*}) e^{\I p \cdot x} \frac{\hat{f}(p)}{\norm{p}^2}
\end{equation}
This looks like it has some chance of working.
The large-$p$ behavior of the integrand is very good when $f$
is smooth: indeed, in that case $\hat f(p)$ decays faster
than any polynomial in $p$.
The only problem is to control
the behavior of $\hat f(p)$ near $p=0$.
That problem has to do with the \ti{low frequency} modes of $f$.
Its analogue is different on a compact manifold: it becomes the
condition that $f$ is orthogonal to the kernel of $D^*$. Apart
from this difficulty, this strategy really works and can be applied
to the Laplacian acting on functions on a compact Riemannian manifold $X$
(with appropriate patching, partitions of unity and
such).

Moreover, the solutions obtained in this
way have very good regularity: if $f$ itself was smooth then they are also
smooth, essentially because we can differentiate under the integral sign in
\eqref{eq:back-to-position} --- this just introduces more powers of
$p$, but $\hat f(p)$ decays fast enough that the integral still
converges.

In contrast, the same strategy would fail drastically for the
Laplacian on a manifold with indefinite signature metric.
The problem is that in this case the factor $1 / \norm{p}^2$
in \eqref{eq:back-to-position} has singularities propagating
all the way out to $p = \infty$ rather than just at $p=0$.

The property that the highest-order part of the
Fourier transformed operator (\ti{symbol}) is invertible except
at $p=0$ is what we call \ti{ellipticity}. It is associated
with many good analytical properties, some of which we will
use later on.

Let us specialize to the operator
\begin{equation}
  \de + \de^*: \Omega^1(C) \to \Omega^2(C) \oplus \Omega^0(C)
\end{equation}
on a Riemannian 2-manifold $C$ (indeed this is essentially the
operator we will need below.)
In local coordinates around $x = 0$, orthonormal at $0$,
this operator could be written as
\begin{equation}
 f_1 \de x_1 + f_2 \de x_2 \mapsto (\partial_2 f_1 - \partial_1 f_2) \de x_1 \wedge \de x_2 + (\partial_1 f_1 + \partial_2 f_2)
\end{equation}
or relative to the bases $\{\de x_1, \de x_2\}$ and $\{\de x_1 \wedge \de x_2, 1\}$,
\begin{equation}
  \begin{pmatrix} \partial_2 & -\partial_1 \\ \partial_1 & \partial_2 \end{pmatrix}
\end{equation}
Thus the symbol is
\begin{equation}
  \I \begin{pmatrix} p_2 & -p_1 \\ p_1 & p_2 \end{pmatrix}
\end{equation}
which is indeed invertible except at $p_1 = p_2 = 0$.
Thus this operator is elliptic.

For the record, we can formulate things a little more precisely:
\begin{defn}[Symbol of a differential operator] \label{def:symbol}
The (principal)
\ti{symbol} of an order $\ell$ differential operator $D$ mapping
between smooth vector bundles $E$ and $F$ over $X$ is a section
$\sigma \in \pi^* \Hom(E,F)$, where $\pi: T^* X \to X$ is the projection.
It has a fancy invariant definition, but the pedestrian way is
to write the top-order part of $D$ in local coordinates for $X$ as
\begin{equation}
  \sum_{i_1, \dots, i_\ell} {F_{i_1 \cdots i_\ell}} \partial_{i_1} \cdots \partial_{i_\ell}
\end{equation}
where each $P_{i_1 \cdots i_k} \in \Hom(E,F)$, and then replace
$\partial_{i} \to \I p_i$, where $p_i$ are the corresponding local
coordinates on $T^* X$, to get
\begin{equation}
  \sigma = \I^\ell \sum_{i_1, \dots, i_\ell} {F_{i_1 \cdots i_\ell}} p_{i_1} \cdots p_{i_\ell}
\end{equation}
\end{defn}

\begin{exercise} Verify that \autoref{def:symbol}
is well formulated, i.e. that the symbol $\sigma$ so obtained
does not depend on the coordinate system we choose.
\end{exercise}

\begin{defn}[Elliptic differential operator]
A differential operator $D$ is elliptic if its
symbol $\sigma \in \pi^* \Hom(E,F)$ is invertible
at all points off the zero section of $T^* X$.
\end{defn}

\begin{thm}[Elliptic regularity] \label{thm:elliptic-regularity}
Suppose $D$ is an elliptic differential operator of order $\ell$.
Then for any $k$,
$D$ extends to an operator acting on Sobolev spaces
$$D_k: L^2_k(E) \to L^2_{k-\ell}(E),$$
and we have:
\begin{itemize}
\item $D_k$ is \ti{Fredholm}, i.e. it has closed range,
and finite-dimensional
kernel and cokernel.
\item $\ker D_k$ and $\coker D_k$ contain only
smooth sections (so in particular they are independent of $k$.)
\item The formal adjoint $D^*$ is also elliptic, and
$\im D$ is the $L^2$ orthocomplement of $\ker D^*$.
\end{itemize}
\end{thm}

This should be thought of as a broad generalization of the
fact that harmonic functions on a compact Riemannian manifold
are smooth (in fact constant).

% \begin{exercise} For any $\lambda \in \R$ consider the
% operator $\partial_x + \lambda$, acting on
% \end{exercise}


\section{Moduli of bundles}

In this section fix a compact Riemann surface ($1$-dimensional
complex manifold) $C$, with a \kahler metric, of total area $1$:
\begin{equation}
  \int_C \omega_C = 1.
\end{equation}

We are going to define a moduli space $\cN = \cN_{K,d}(C)$ which can be
thought of in two ways:
\begin{itemize}
\item $\cN$ is a moduli space of unitary connections on
complex vector bundles over $C$, of
rank $K$ and degree $d$ over $C$, obeying a ``harmonicity''
condition on their curvature (Einstein connections).
From this point of view we see naturally that $\cN$ is
\ti{symplectic}. Moreover from this point of view
there is a natural sense in which $\cN$ is independent
of the complex structure of $C$: indeed we can identify
it with a moduli space of representations of $\pi_1(C)$
(or an extension of $\pi_1(C)$) which depends only
on the \ti{topology} of $C$.
\item $\cN$ is a moduli space of holomorphic vector
bundles over $C$, of rank $K$ and degree $d$.
From this point of view we see naturally that $\cN$ is
\ti{complex}. Its complex structure does depend on
the complex structure on $C$.
\end{itemize}
In fact the two structures are compatible and so
$\cN$ is naturally \kahler (where it is smooth).

Although we will not use this fact, $\cN_{K,d}(C)$ is actually
algebraic. For those who are algebraically inclined, a
very nice introductory reference to this
material is \cite{MR98b:14010}. The notes
\cite{MR2408226} also appear very good.


\subsection{Degree of vector bundles}

\begin{defn}[Degree of a vector bundle] The \ti{degree} of a
complex vector bundle $E$ over $C$ is
\begin{equation}
  \deg E = c_1(E) \cdot [C] \in \Z,
\end{equation}
where $c_1(E) \in H^2(C,\Z)$ denotes the first Chern class,
and $[C] \in H_0(C,\Z)$ the fundamental class.
\end{defn}

\begin{prop}[Chern-Weil formula for degree] \label{prop:chern-weil-degree}
\begin{equation}
  \deg E = \frac{\I}{2 \pi} \int_C \Tr F_D
\end{equation}
where $F_D \in \Omega^2(\End E)$ is the curvature of any
connection $D$ in $E$.
\end{prop}

In practice \autoref{prop:chern-weil-degree} is what we will use.
The only reason we do not adopt this as the definition is that
it does not make immediately manifest the fact that $\deg E$ is an
\ti{integer}.

\begin{exercise} Show that the vector bundle $E$ and the line bundle $\det E$
have the same degree.
\end{exercise}

Another interpretation of the degree which is useful for developing
intuition is:
\begin{prop}[Degree counts zeroes] Suppose $E$ is a complex vector bundle over $C$, of rank $K$.
Fix sections $e_1, \dots, e_K$ of $E$ which are transverse in the sense
that they give a trivialization of $E$ away from finitely many points
$z_i \in C$. Let $a_i \in \Z$ denote the winding
number of the determinant $\det(e_1, \dots, e_K)$ evaluated
on a small circle around $z_i$ (measured relative to a local trivialization
of $E$ which extends over $z_i$). Then
\begin{equation}
  \deg E = \sum_i a_i.
\end{equation}
In particular, if $E$ is a holomorphic line bundle, choose a meromorphic
section $e$ of $E$, and then $\deg E$ is the number of zeroes of $e$
minus the number of poles (counted with multiplicity.)
\end{prop}

\begin{exercise} Show that the line bundle $\cO(n)$ over $\C\PP^1$
has degree $n$.
\end{exercise}


\subsection{Moduli spaces by symplectic quotient}

\begin{prop}[Classification of complex vector bundles]
All rank $K$ complex vector bundles over $C$ of degree $d$ are equivalent.
\end{prop}

\begin{pf} (From \cite{MR98b:14010}.) Rank $K$
complex vector bundles over $C$ up to equivalence correspond
to homotopy classes of maps $C \to BU(K)$. Since $C$ has dimension $2$,
by cellular approximation
we can replace $BU(K)$ by its 3-skeleton, which is $\C\PP^1$;
and maps $C \to \C\PP^1$ are classified by their degree.
\end{pf}

Thus, suppose we fix a single rank $K$ complex vector bundle $E$,
of degree $d$. Then every holomorphic vector bundle of rank $K$
and degree $d$ is equivalent to $(E, \bar\partial)$ for some
$\bar\partial$-operator $\bar\partial$ on $E$.
Let $\cA^{\bar\partial}$ denote the space of all such $\bar\partial$.
Then $\cA^{\bar\partial}$ is an affine space modeled on the
infinite-dimensional complex linear space $\Omega^{0,1}(\End E)$.

The moduli space $\cN_{K,d}(C)$, which we want to construct,
could be thought of as
$\cA^{\bar\partial}$ modulo equivalence --- where now ``equivalence'' means
the (infinite-dimensional,
complex) group $\fG_\C$ of sections of $GL(E)$,
which acts on $\cA^{\bar\partial}$ by conjugation:
\begin{equation}
  D \mapsto D^g = (g^{-1})^* D = g D g^{-1}.
\end{equation}
So formally we want to say
\begin{equation} \label{eq:bunG-formal-quotient}
  \cN_{K,d}(C) = \cA^{\bar\partial} / \fG_\C.
\end{equation}
It is not so easy to make a ``nice'' space in this way.
The difficulty comes from the
fact that $\fG_\C$ is a complex group.
(Of course $\fG_\C$ is also infinite-dimensional,
but that's not really the problem!)

One neat trick for getting around this problem,
explained in \cite{MR85k:14006},
is to think of $\fG_\C$ as the complexification of a
group $\fG$ whose action is better controlled, and
then interpret \eqref{eq:bunG-formal-quotient}
as a \kahler quotient (still infinite-dimensional.)
For this purpose, let us fix a Hermitian metric $h$ on $E$.
After so doing, we have an infinite-dimensional real group
$\fG$ of \ti{unitary} equivalences, i.e. sections of $U(E)$.
Let $\cA^h$ denote the space of all $h$-unitary connections
on $E$.
$\cA^h$ is an affine space, modeled
on the infinite-dimensional \ti{real} linear space $\Omega^{1}(\fu(E))$.

\begin{prop}[Unitary connections = holomorphic structures]
$\cA^{\bar\partial} \simeq \cA^h$.
\end{prop}
\begin{pf} Each $\bar\partial \in \cA^{\bar\partial}$
can be extended in a canonical way to a unitary connection $D \in \cA^h$
(Chern connection), and conversely, each unitary connection $D \in \cA^h$
can be restricted to an operator $\bar\partial \in \cA^{\bar\partial}$.
\end{pf}

The compatibility of these two pictures of the space
is summarized in the next exercise:

\begin{exercise} Show that the real linear space
$\Omega^{1}(\fu(E))$ carries a natural complex structure $I$,
and with this complex structure it is canonically identified
with the complex linear space $\Omega^{0,1}(\End E)$.
Moreover show that $I = \star$.
\end{exercise}

On $\Omega^{1}(\fu(E))$ we have a natural nondegenerate pairing
\begin{equation} \label{eq:symplectic-form-A}
  \omega(\dot{A}_1,\dot{A}_2) = -\int_C \Tr(\dot{A}_1 \wedge \dot{A}_2).
\end{equation}
We would like to think of this as a symplectic form.

Strictly speaking, though, we have only defined the notion
of ``symplectic form'' for Banach manifolds.
So now is a good time to switch to that setting.
We fix some $k > 1$ (you can imagine that it is very big,
say $k = 100$), and replace $\cA^h$ by the larger space $\cA^h_k$
of $L^2_k$ connections.\footnote{We have not formally defined
``$L^2_k$ connection,'' but hope to get by just with the remark
that it means a connection of the form $D + \alpha$,
where $D$ is a smooth connection and $\alpha \in L^2_k(\fu(E))$.}
$\cA^h_k$ is a Banach manifold,
in fact an affine space modeled on the Banach space
$\Omega^1_k(\End E) = L^2_k(T^* \otimes \End E)$.
Then \eqref{eq:symplectic-form-A} gives a symplectic
structure on $\cA^h_k$.
From now on we will throw in the subscript $k$ to pass
to $L^2_k$ versions of the various spaces of sections
we need to consider. On a first reading, you might profit
by ignoring the $k$'s and pretending that we work always
with $C^\infty$ objects.

Altogether we now have a single space $\cA_k$ $(\simeq \cA^{\bar\partial}_k \simeq \cA^h_k)$ with both symplectic and
complex structures.
\begin{exercise} Verify that the complex and symplectic structures
on $\cA_k$ are compatible, i.e. $\omega(I \dot{A}_1, I \dot{A}_2) = \omega(\dot{A}_1,\dot{A}_2)$.
\end{exercise}

\begin{exercise} Verify that $\cA_k$ is \kahler, and that the metric is
\begin{equation}
  g(\dot{A}_1,\dot{A}_2) = - \int_C \Tr(\dot{A}_1 \wedge \star \dot{A}_2).
\end{equation}
\end{exercise}
Moreover, $\cA_k$ carries a natural action of $\fG_{k+1}$:
\begin{prop} For $k>1$, the action of $\fG$ on $\cA^h$ by conjugation,
\begin{equation}
  D \mapsto D^g = g D g^{-1}, \qquad D \in \cA^h_k.
\end{equation}
extends to an action of $\fG_{k+1}$ on $\cA_k$.
\end{prop}

\begin{pf} This follows from the general fact
that any differential operator of order $1$ mapping
smooth sections $E \to F$ extends to a map on Sobolev spaces
$L^2_{k+1}(E) \to L^2_k(F)$. \fixme{plus Sobolev multiplication!}
\end{pf}

\begin{prop} The Lie algebra of $\fG_k$ is $\Omega^0_k(\End E)$.
\end{prop}

The action of $\fG_{k+1}$ on $\cA_k$ preserves the \kahler structure.
We could check this directly, but it also follows from:

\begin{prop}[Moment map for $\fG_{k+1}$ action on $\cA_k$] \label{prop:unitary-connections-moment-map}
The action of $\fG_{k+1}$ on $\cA_k$ admits a moment map, given by
\begin{equation} \label{eq:gauge-moment-map}
  \mu(D) = - F_D - 2 \pi \I \frac{d}{K} {\textbf 1} \omega_C
\end{equation}
where $\omega_C$ denotes the \kahler form on $C$.
More precisely, this means: suppose given an element
$Z \in \Lie \fG_{k+1} = \Omega^0_{k+1}(\fu(E))$,
then we have
\begin{equation}
  \mu_Z(D) = - \int_C \Tr(Z F_D) - 2 \pi \I \frac{d}{K} \int_C \omega_C \Tr(Z).
\end{equation}
\end{prop}

\begin{pf} The key facts are the action of
$Z \in \Lie \fG_{k+1} = \Omega^0_{k+1}(\fu(E))$ by infinitesimal gauge transformation,
\begin{equation} \label{eq:inf-gauge}
  \rho(Z) = -DZ
\end{equation}
and the differential of $\mu_Z$, acting on a tangent vector
$\dot{A} \in \Omega^1_{k}(\fu(E)) = T\cA^h_k$:
\begin{equation} \label{eq:diff-moment-map}
\de \mu_Z \cdot \dot{A} = -\int_C \Tr (Z \, D\dot{A}).
\end{equation}
We compute
\begin{align}
  \omega(\rho(Z), \dot{A}) &= \int_C \Tr (DZ \wedge \dot{A}) \\
  &= -\int_C \Tr (Z \, D\dot{A}) \\
  &= \de \mu_Z \cdot \dot{A}.
\end{align}
\end{pf}

\begin{exercise}
Verify \eqref{eq:inf-gauge} and \eqref{eq:diff-moment-map}.
\end{exercise}

\begin{exercise}
Check that $\mu$ given by \eqref{eq:gauge-moment-map}
is $\fG$-equivariant.
\end{exercise}

\autoref{prop:unitary-connections-moment-map} says in particular that
$\mu^{-1}(0)$ is the subset of $\cA^h_k$
consisting of connections with
\begin{equation} \label{eq:harmonic-curvature}
  F_D = -2 \pi \I \frac{d}{K} \bid \omega_C.
\end{equation}
Let us put this funny-looking formula in a more general context:

\begin{defn}[Einstein connection]
If $X$ is a Riemannian manifold and $E$ a complex
vector bundle over $X$ with connection $D$, we say $D$ is
\ti{Einstein} if the curvature $F_D \in \Omega^2(\End E)$
is
\begin{equation}
  F_D = \I \bid \alpha
\end{equation}
where $\alpha \in \Omega^2(X)$ is harmonic.
\end{defn}

\begin{exercise} Show that \eqref{eq:harmonic-curvature}
is equivalent to the condition that $D$ is an Einstein
connection over the \kahler Riemann surface $C$.
(Hint: see \autoref{exa:harmonic-forms-degree-0n}.)
\end{exercise}

In the important special case $d=0$, \eqref{eq:harmonic-curvature}
just says that $D$ is a \ti{flat} connection.
For $d \neq 0$, \eqref{eq:harmonic-curvature} says at least that $D$ is
\ti{projectively} flat, i.e. it would descend to a flat connection
on the bundle $\PP(E)$ of projective spaces, and moreover the remaining
central curvature is completely fixed.

Following our plan,
we want to take the symplectic quotient $\cA_k \kq \fG_{k+1} = \mu^{-1}(0) / \fG_{k+1}$.
As a technical preliminary we need to understand the extent to
which $\fG_{k+1}$ acts freely and properly on $\mu^{-1}(0)$.

\begin{defn}[Irreducible connections]
We call a unitary connection $D$ in $E$ \ti{irreducible} if there does not
exist any subbundle $E' \subset E$ such that $D$ preserves $E'$.
\end{defn}

\begin{prop}[Gauge group acts almost freely on irreducible connections] \label{prop:gauge-group-almost-free-on-irreducible}
If $g \in \fG_{k+1}$ and $D$ is an irreducible connection, then $D^g = D$
if and only if $g$ acts on $E$ by multiplication by a constant scalar.
\end{prop}
\begin{pf} If $g$ is multiplication by a constant scalar then we certainly
have $D^g = D$. Conversely,
suppose $D^g = D$. Then $g$ is covariantly constant for the connection in
$\End E$ induced by $D$, which implies that $g$ is determined by
its value $g(p)$ for any $p \in C$, and that $g(p)$ 
commutes with the holonomy of $D$ around any loop based at $p$.
Thus the eigenspaces of $g(p)$ are preserved by parallel
transport. This contradicts the irreducibility of $D$ unless
$g(p)$ is a scalar. Finally the covariant constancy of $g$
shows that $g$ is a constant scalar.
\end{pf}

Letting $\cA^s_{k} \subset \cA_k$ be the set of irreducible connections,
and defining the ``effective gauge group''
\begin{equation}
 \fG^\eff_{k+1} = \fG_{k+1} / U(1)
\end{equation}
we could rephrase \autoref{prop:gauge-group-almost-free-on-irreducible}
as saying that $\fG^\eff_{k+1}$ acts freely on $\cA^s_k$.

\begin{exercise} Show that the moment map $\mu$ given in
\eqref{eq:gauge-moment-map} descends to give a
moment map for $\fG^\eff_{k+1}$.
\end{exercise}

\begin{prop}[Unitary gauge group acts properly] \label{prop:gauge-group-proper}
The action of $\fG_{k+1}$ on $\cA_k$ is proper.
\end{prop}
\begin{pf} (\cite{MR909698} Proposition 7.1.14) What we need to show is that
if we have a sequence $(g_n, D_n)$ in $\fG_{k+1} \times \cA_k$ such that the
$D_n$ converge to some $D_\infty$, and the
gauge-transformed connections $D_n^{g_n}$ converge to some $D^*$,
then after passing to a subsequence,
the $g_n$ also converge to some $g_\infty$ with $D_\infty^{g_\infty} = D^*$.
The idea is to take a subsequence
of the $g_n$ which converges in a single fiber $E_x$ (this exists
because the unitary group $U(E_x)$ is compact). Then the condition
$D_\infty^{g_\infty} = D^*$ is a differential equation on $g_\infty$
which determines what it must be in all other fibers, and the fact
that $D_n^{g_n} \to D^*$ forces $g_n \to g_\infty$.
\end{pf}

Encouraged by \autoref{prop:gauge-group-almost-free-on-irreducible}
and \autoref{prop:gauge-group-proper}, let $\cA^s \subset \cA$ be the
subset of irreducible unitary connections, and define:

\begin{defn}[Moduli spaces of Einstein connections]
\begin{equation}
  \cN^s_{K,d}(C) = \cA^s_k \kq \fG^\eff_{k+1}, \qquad \cN_{K,d}(C) = \cA_k \kq \fG^\eff_{k+1},
\end{equation}
where we use \eqref{eq:gauge-moment-map} to define $\mu$.
\end{defn}

These are both infinite-dimensional quotients.
Nevertheless they still make sense, at least
as topological spaces. Our experience with finite-dimensional
quotients would suggest that $\cN^s_{K,d}(C)$ should be a \kahler
manifold, and this is indeed true, as we will show momentarily.

First we look a bit more at the \ti{formal} picture.
The tangent space to $\cN_{K,d}^s(C)$
at a given Einstein connection $D$ should be the kernel of $\de \mu$
modulo $\rho(\Lie (\fG^\eff))$. A nice way to say this is that
the tangent space ``should be'' the cohomology $H^1$ of the complex
\begin{equation} \label{eq:gauge-complex}
  0 \to \Omega^0(\fu(E)) \xrightarrow{D} \Omega^1(\fu(E)) \xrightarrow{D} \Omega^2(\fu(E)) \to 0
\end{equation}
(It's indeed a complex: $D^2 = 0$ acting
on sections of $\fu(E)$, since $F_D \sim \bid$ and hence
is central. Of course this is as it should be since infinitesimal
gauge transformations should be tangent to $\mu^{-1}(0)$.)

To get some control over this infinite-dimensional
problem, we first think of it in a slightly different way:
instead of dividing out by the image of $D: \Omega^0 \to \Omega^1$
we impose the gauge-fixing equation $D^* = 0$, where $D^*$ is the
formal adjoint of $D$
(the idea is that the kernel of $D^*$ should be an $L^2$
orthocomplement to the image of $D$.)
This leads us to consider the operator
\begin{equation}
 \hat{D} = D \oplus D^*: \Omega^1(\fu(E)) \to \Omega^2(\fu(E)) \oplus \Omega^0(\fu(E)).
\end{equation}
The good news then is that this operator is \ti{elliptic} in the sense of
\autoref{sec:ellipticity},
just as for the example of $\de + \de^*$ discussed there
(indeed the symbol of $\hat D$ is just $K^2$ copies of the symbol
of $\de + \de^*$.)
Thus we will be able to use the elliptic regularity
theorem, \autoref{thm:elliptic-regularity}.

We will need the following preliminary:
\begin{lem}[Almost-vanishing for the gauge complex]
\label{lem:cohomology-vanishing-gauge-complex}
If $D \in \cA^s_k$, then
$\coker D \subset \Omega^2$ and $\coker D^* \subset \Omega^0$ are both $1$-dimensional.
\end{lem}
(i.e. both $H^0$ and $H^2$ of the complex \eqref{eq:gauge-complex} are
$1$-dimensional.)
\begin{pf}
By elliptic regularity we can identify
$\coker \hat{D} = \ker \hat{D}^*$, where
\begin{equation}
  \hat{D}^* = D \oplus D^*: \Omega^0(\fu(E)) \oplus \Omega^2(\fu(E)) \to \Omega^1(\fu(E)).
\end{equation}
Since $\im D$ and $\im D^*$ are $L^2$-orthogonal in $\Omega^1(\fu(E))$
we will have $\ker \hat{D}^* = \ker D \oplus \ker D^*$.
Any $\alpha \in \ker D \subset \Omega^0$ must be a constant multiple
of $\bid$, since $D$ is an irreducible connection: this gives
the desired statement for $\Omega^0$. For $\Omega^2$ we essentially
use Poincare duality: we have
\begin{equation}
  D^* = - \star D \star
\end{equation}
so any $\alpha \in \ker D^* \subset \Omega^2$ has $D \star \alpha = 0$; said
otherwise, $\ker D^* \subset \Omega^2$ is just spanned by $\star (\bid)$.
\end{pf}

Now we are ready to prove that $\cN$ is well behaved:
\begin{thm}[$\cN^s_{K,d}(C)$ is \kahler] \label{thm:N-is-kahler}
$\cN^s_{K,d}(C)$ is a \kahler manifold.
\end{thm}
\begin{pf}
We want to apply
\autoref{prop:banach-symplectic-quotient-is-symplectic}
to see that $\cN_{K,d}(C)$ is symplectic.
For this we need to verify the hypotheses.
First, we want
to show that $\mu^{-1}(0) \subset \cA^s_{k}$ is a submanifold.
This follows from the
Banach space inverse function theorem, applied to the map
\begin{equation}
\mu: \cA^s_k \to \Omega^2(\fu(E)) / (\star \bf 1),
\end{equation}
which is a submersion according to
\autoref{lem:cohomology-vanishing-gauge-complex}.
Second, we want to show that the tangent spaces to $\fG$-orbits are
closed and complemented.
$D \Omega^0 \oplus D^* \Omega^2$ is the image of
a Fredholm operator and thus closed, and the two summands
are $L^2$-orthogonal, so that they are both separately closed;
thus $D \Omega^0$ is closed, and complemented by
$D^* \Omega^2 \oplus \coker \hat{D}$, as desired.
Third, we want to show that the tangent spaces to $\fG$-orbits
have $(T^{\perp_\omega})^{\perp_\omega} = T$; for this
see an argument in \cite{MR909698}.

The proof that $\cN_{K,d}(C)$
is not only symplectic but actually
\kahler follows exactly the lines of the finite-dimensional
case. See \cite{Tumpach2007} for an account.
\end{pf}

\begin{thm}[Dimension of $\cN^s_{K,d}(C)$] \label{thm:dimension-of-N}
$\dim_\C \cN^s_{K,d}(C) = (g-1)K^2+1$ where $g$ is the genus of $C$.
\end{thm}
\begin{pf} We will compute the index
\begin{equation}
  \ind \hat{D} = \dim \ker \hat{D} - \dim \coker \hat{D}.
\end{equation}
Very generally, for any elliptic operator, the index can be
computed using the Atiyah-Singer index theorem. 
When the degree $d=0$, though, we actually don't need to know the
index theorem: all we need to know is one of the basic
preliminaries in some proofs of that theorem, namely that
$\ind \hat{D}$ only depends on the symbol of $\hat{D}$.
Indeed, for the operator $\hat{D}$ we have, the symbol
is the same as that for the trivial connection on
the trivial rank $K$ bundle (in local coordinates $D = \de + A$,
and the $A$ part is lower-order.) But for the trivial
connection we just get $K^2$ copies of the de Rham
complex, whose index is known by de Rham's theorem
(\autoref{thm:de-rham}): it is $-\chi(C) = 2g-2$. Thus we get
\begin{equation}
  \ind \hat{D} = (2g-2) K^2.
\end{equation}
On the other hand \autoref{lem:cohomology-vanishing-gauge-complex}
says
\begin{equation}
  \dim \coker \hat{D} = 2.
\end{equation}
Combining these gives the desired result, when $d=0$.
For general $d$ we need to know a bit more about the
structure of the index formula. \fixme{maybe better to defer to later, 
identify tangent space with $H^1(\End E)$ and use Riemann-Roch}
\end{pf}

The formula in \autoref{thm:dimension-of-N} looks a bit
suspicious for $g < 2$. But in these cases
the only way to have an irreducible Einstein
connection is to have $K=1$. In that case we get dimension
$0$ for $g=0$ and dimension $1$ for $g=1$, which is indeed
correct --- see \autoref{exa:jacobians} below.


\subsection{Connections versus representations}

\begin{exercise} \label{exc:connections-vs-representations}
Show that $\cN_{K,0}^s(C)$, considered as a set,
has a canonical bijection to the set of all irreducible representations
$\pi_1(C) \to U(K)$ modulo equivalence. (Hint: this is actually the shadow
of a stronger statement, namely that the category of flat connections is
equivalent to the category of representations. So the real guts of the
question is to construct functors in both directions. To go from a flat
connection to a representation, take holonomies. To go from
a representation to a flat connection, use the universal cover of $C$.)
Similarly show that $\cN_{K,0}(C)$ has a canonical bijection to
the set of all representations
$\pi_1(C) \to U(K)$ modulo equivalence.
Finally show (or at least sketch) that
these bijections are actually homeomorphisms.
\end{exercise}

\begin{exercise} \label{exc:no-irreducible-connections-on-torus}
Suppose $C$ is a torus
and $K>1$. Show that $\cN_{K,0}^s(C)$ is empty, and describe $\cN_{K,0}(C)$.
(Hint: use the result
of \autoref{exc:connections-vs-representations}.)
\end{exercise}

Now how about the case of general $d$, where we consider
connections obeying \eqref{eq:harmonic-curvature} instead of
just flat connections?
We remark that $\omega_C$ is an arbitrary positive $2$-form
on $C$ with total integral $1$.
At least formally we can imagine taking $\omega_C$ to be more and more
concentrated at a single point $z_0$, until in the limit we get
$\omega_C = \delta(z_0)$. In this limit the connections $D$ obeying
\eqref{eq:harmonic-curvature} are becoming
flat away from $z_0$, but developing a singularity
at $z_0$, with the holonomy around $z_0$
of finite order, given by multiplication by the root of unity
$e^{-2 \pi \I d / K}$.

\insfig{higgs-bundles-13}{0.95}

This motivates the following:
\begin{exercise} \label{exc:connections-vs-representations-general}
Present $C$ as a polygon with edges identified in the standard way.
\insfig{higgs-bundles-15}{1.1}
This gives a description of $\pi_1(C)$ by generators
$(A_1, B_1, A_2, B_2, \dots, A_g, B_g)$ subject to the relation
\begin{equation}
	A_1 B_1 A_1^{-1} B_1^{-1} A_2 B_2 A_2^{-1} B_2^{-1} \cdots A_g B_g A_g^{-1} B_g^{-1} = \bid.
\end{equation}
Consider an \ti{extension}
\begin{equation}
	1 \to \Z / K\Z \to \tilde \pi_1(C) \to \pi_1(C) \to 1
\end{equation}
obtained by deforming this relation to
\begin{equation}
	A_1 B_1 A_1^{-1} B_1^{-1} A_2 B_2 A_2^{-1} B_2^{-1} \cdots A_g B_g A_g^{-1} B_g^{-1} = Z
\end{equation}
where $Z$ is a new generator, and adding the relation
\begin{equation}
	Z^K = \bid.
\end{equation}
Show that $\cN_{K,d}(C)$ is the set of equivalence classes
of representations $\tilde \pi_1(C) \to U(K)$ for which
$Z$ acts by $e^{-2 \pi \I d / K} \bid$.
(Hint: what can you say about the
holonomy around the boundary of the polygon?)
Similarly show that $\cN^s_{K,d}(C)$ is the subset of equivalence
classes of \ti{irreducible} representations.
\end{exercise}

\begin{exercise} Use the result of \autoref{exc:connections-vs-representations-general}
to describe $\cN_{2,1}(C)$ when $C$ has genus $1$.
(This amounts to classifying pairs of matrices $A,B$ in $U(2)$ such that $ABA^{-1}B^{-1} = -\bid$,
up to simultaneous conjugation. It might be useful to start with the
case where $A,B \in SU(2)$; using the $2:1$ projection $SU(2) \to SO(3)$
this amounts to looking for pairs of matrices $\bar{A}, \bar{B} \in SO(3)$
which commute, and yet do not belong to a common maximal torus
$SO(2) \subset SO(3)$.)

\end{exercise}


\subsection{The case of line bundles} \label{sec:jacobians}

\begin{example}[Jacobians] \label{exa:jacobians}
The special case $K=1$ is very concrete. In light of
\autoref{prop:tensor-line-is-isometry} below, all degrees are
essentially the same, so let us consider $d=0$. Then we
introduce the notation
\begin{equation}
 \Jac(C) = \cN^s_{1,0}(C),
\end{equation}
and call $\Jac(C)$ the \ti{Jacobian} of $C$.
It is the space of flat connections on the trivial line
bundle over $C$, modulo gauge equivalence.
Taking holonomies around loops gives a map
\begin{equation}
  \Jac(C) \to \Hom(\pi_1(C), U(1)) = H^1(C, U(1)).
\end{equation}
In fact this map is an isomorphism, as follows from
\autoref{exc:connections-vs-representations} above.

Thus $\Jac(C)$ is the compact torus $H^1(C,U(1))$,
of real dimension $2g$.
In particular, using this description we see that
as a smooth manifold $\Jac(C)$
is \ti{independent} of the chosen metric on $C$.
To describe it even more concretely, choose a
\ti{marking} of $C$, i.e. a basis
\begin{equation}
	\{A_1, \dots, A_g, B_1, \dots, B_g \}, \qquad A_i, B_i \in H_1(C,\Z),
\end{equation}
such that
\begin{equation}
	A_i \cap A_j = 0, \quad B_i \cap B_j = 0, \quad A_i \cap B_j = \delta_{ij}.
\end{equation}
Then defining
\begin{equation}
	\cX_{A_i} = \Hol_{A_i} D, \qquad \cX_{B_i} = \Hol_{B_i} D,
\end{equation}
the $(\cX_{A_i},\cX_{B_i})$ give an explicit diffeomorphism $\Jac C \simeq U(1)^{2g}$.

Now, from $\Jac(C) \simeq H^1(C,U(1))$
we get an identification
\begin{equation} \label{eq:tangent-to-jacobian-derham}
 T_x \Jac(C) \simeq \I H^1(C,\R).
\end{equation}
% We could understand this identification more concretely
% as follows: identify $H^1(C,\R) = H^1_{dR}(C,\R)$
% using \autoref{thm:de-rham}; then
% shifting a flat connection by a closed $1$-form $\alpha$ gives
% another flat connection,
% this connection is gauge-equivalent to the original one
% if and only if $\alpha = \de \chi$ for some $\chi$.
On the other hand, our realization of $T_x \Jac(C)$ via the symplectic quotient
identifies it as $\ker (\de \oplus \de^*)$, i.e.
the space of harmonic forms,
\begin{equation} \label{eq:tangent-to-jacobian-harmonic}
 T_x \Jac(C) \simeq \I \cH^1(C).
\end{equation}
The relation between \eqref{eq:tangent-to-jacobian-derham}
and \eqref{eq:tangent-to-jacobian-harmonic}
is the standard one given by the Hodge theorem,
\autoref{thm:abelian-hodge-riemannian}:
in each cohomology class we choose the unique
harmonic representative.

Let us now describe the symplectic and \kahler structures
on $\Jac(C)$.
As usual for symplectic quotients,
the symplectic form $\omega$ is just obtained by
restriction of the original symplectic form \eqref{eq:symplectic-form-A}
from $\cA$ to $\I \cH^1(C)$,
\begin{equation} \label{eq:symplectic-form-jac}
  \omega(\dot{A}_1, \dot{A}_2) = - \int_C \dot{A}_1 \wedge \dot{A}_2.
\end{equation}
This pairing in fact depends only on the cohomology classes of
$\alpha$ and $\beta$, not on the actual harmonic forms
chosen to represent them! Said otherwise, this formula represents
an intrinsically defined symplectic form on $H^1(C,U(1))$.
We could write it even more concretely: in the coordinates
$\cX_{A_i}$, $\cX_{B_i}$ we introduced above,
\begin{equation} \label{eq:jacobian-explicit-symplectic-form}
	\omega = - \sum_i \frac{\de \cX_{A_i}}{\cX_{A_i}} \wedge \frac{\de \cX_{B_i}}{\cX_{B_i}}.
\end{equation}
In particular this form does not depend on the complex structure
we chose on $C$.
Thus, as a symplectic manifold, $\Jac(C)$ does not depend on
the complex structure of $C$.

\insfig{higgs-bundles-14}{0.9}

On the other hand the
\ti{complex} structure of $\Jac(C)$
definitely does depend on the complex
structure of $C$: it is the one inducing the
Hodge decomposition
\begin{equation}
  H^1(C,\C) = H^{0,1}(C) \oplus H^{1,0}(C).
\end{equation}
Thus the \kahler metric on $\Jac(C)$
also depends on the complex structure of $C$.
Explicitly, we can write the \kahler metric as
\begin{equation}
  g(\dot{A}_1, \dot{A}_2) = - \int \dot{A}_1 \wedge \star \dot{A}_2
\end{equation}
where $\dot{A}_1$, $\dot{A}_2 \in \I \cH^1(C)$.
Loosely speaking, as we deform the complex curve $C$, the ``angles'' of
the flat complex torus $\Jac(C)$ change.
\end{example}

\begin{exercise} Prove the formula \eqref{eq:jacobian-explicit-symplectic-form}
for the symplectic form on $\Jac(C)$.
\end{exercise}

\begin{exercise}
Prove that the complex structure on $\Jac(C)$
induced by the \kahler quotient construction is the
one claimed above.
\end{exercise}

\begin{example}[Jacobians of genus $1$ curves] \label{exa:metric-on-jac-C-genus-one}
Suppose that $C$ has genus $1$ and complex modulus $\tau$.
In this case we can describe all this in a completely explicit way.
We fix coordinates $(x,y)$ on $C$ with $x \in \R/\Z$, $y \in \R/\Z$.
Then the complex coordinate on $C$ is
\begin{equation}
  z = x + \tau y \in \C / (\Z \oplus \tau \Z).
\end{equation}
A general flat $U(1)$-connection
is gauge equivalent to one of the form $D = \de + A$ with
\begin{align}
  A &= \I \theta_x \, \de x + \I \theta_y \, \de y \\
  &= (2 \im \tau)^{-1} (\bar\alpha \, \de z - \alpha \, \de \bar{z})
\end{align}
where
\begin{equation}
  % \theta_x = \alpha + \bar\alpha
  % \theta_y = \tau \alpha + \bar \tau \bar\alpha
  \alpha = \theta_y - \tau \theta_x.
\end{equation}
Note that
\begin{equation}
  \bar\partial_D = \bar\partial + (-2 (\im \tau)^{-1} \alpha) \de \bar{z}
\end{equation}
so $\alpha$ is a holomorphic coordinate on $\Jac C$.
Thus we have two coordinate systems on $\Jac C$: one
real coordinate system
\begin{equation}
(\theta_x, \theta_y) \in (\R / 2\pi\Z)^2
\end{equation}
the other a holomorphic coordinate
\begin{equation}
\alpha \in \C / \left( 2\pi \Z \oplus  2\pi \tau \Z\right).
\end{equation}
Using the holomorphic coordinate $\alpha$ we see that $\Jac C$ is biholomorphic to $C$ itself.
The \kahler form is
\begin{equation}
  \omega = \de \theta_x \wedge \de \theta_y = \frac{\I}{2 \im \tau} \de \alpha \wedge \de \bar\alpha.
\end{equation}
(Comparing with our notation for the general case,
we have $\e^{\I \theta_x} = \cX_A$, $\e^{\I \theta_y} = \cX_B$.)
\end{example}

\begin{exercise}
Write an explicit formula for the \kahler metric on $\Jac(C)$
when $C$ has genus $g \ge 1$. (You will need --- or rediscover ---
the notion of \ti{period matrix} of $C$, generalizing the $\tau$
which appeared in \autoref{exa:metric-on-jac-C-genus-one}.)
\end{exercise}

\begin{lem}[Existence of Einstein connections on line bundles] \label{lem:einstein-connections-on-line-bundles}
Suppose $\cL$ is a holomorphic line bundle over $C$. Then there
exists a Hermitian metric $h$ on $\cL$ such that the Chern
connection $D_h$ is Einstein. The metric $h$ with this property
is unique up to scalar multiple.
\end{lem}
\begin{pf}
First choose some arbitrary $h$ on $\cL$. The curvature of the Chern
connection is then $F_{D_h} \in \Omega^2(C)$,
which generally is not harmonic. We want to
improve $h$ to some $h'$ so that $\I F_{D_{h'}} \in \cH^2(C)$.

We write $h' = \e^f h$ for some (yet unknown) $f: C \to \R$.
Then we have, using \eqref{eq:chern-connection-local-holomorphic},
\begin{equation}
  F_{D_{h'}} = F_{D_h} + \bar\partial \partial f.
\end{equation}
Now we can apply the
abelian Hodge theorem (\autoref{thm:abelian-hodge-riemannian})
to the cohomology class $[\I F_{D_h}] \in H^{2}_\dR(C)$.
It says that there exists a unique $\beta \in \Omega^1(C)$
such that
\begin{equation}
 \I F_{D_h} + \de \beta \in \cH^2(C).
\end{equation}
But then the $\partial \bar\partial$-lemma (\autoref{lem:ddbar-lemma})
says that $\de \beta$ can also be written as
$\I \partial \bar\partial f$ for some real function $f$.
This gives the desired $f$. It is unique up to shifts by
a solution of $\partial \bar\partial f = 0$, but those
are just harmonic functions on $C$, i.e. constants.
\end{pf}

There is another way of thinking about this result.
We return to our original context where $(E,h)$ is a \ti{fixed}
Hermitian vector bundle of rank $K$, and consider the case $K=1$.

\begin{cor}[Gauge-theoretic stability of line bundles]
Suppose $\bar\partial \in \cA^{\bar\partial}$.
Then the $\fG_\C$-orbit of $\bar\partial$
intersects $\mu^{-1}(0)$ precisely
in a $\fG$-orbit.
\end{cor}

\begin{pf} By \autoref{lem:einstein-connections-on-line-bundles}
the holomorphic line bundle $(E,\bar\partial)$ admits
a Hermitian metric $h'$, unique up to scalar multiple,
such that the Chern connection
for $(E, \bar\partial, h')$ is Einstein.
But since all Hermitian metrics on $E$ are equivalent, there
exists $g \in \fG_\C$ such that $g^* h' = h$;
concretely we can take $g$ defined by $g v = \sqrt{h/h'} v$.
Then the Chern connection for
$(E,\bar\partial^{g^{-1}}, h)$ is Einstein, as desired.
\end{pf}

This theorem says that, for rank $K=1$, our original strategy
for constructing a moduli space of holomorphic vector bundles
works perfectly: we really do have
\begin{equation}
  \cA^{\bar\partial} / \fG_\C = \cA^h \kq \fG = \Jac C.
\end{equation}


\subsection{Good properties of \texorpdfstring{$\cN_{K,d}(C)$}{N(K,d)(C)}}

We have already seen that when $K=1$, $\cN_{K,0}(C) = \Jac C$ is a compact
\kahler torus. The behavior is almost as good
for general $K$ and $d$:

\begin{cor}[Compactness of $\cN_{K,d}(C)$] \label{thm:Ns-is-compact}
$\cN_{K,d}(C)$ is compact.
\end{cor}
\begin{pf} This follows directly from the result of
\autoref{exc:connections-vs-representations-general}
since a representation of a finite extension of $\pi_1(C)$ into
$U(K)$ is determined by a finite collection of matrices in $U(K)$,
and $U(K)$ is compact.
\end{pf}

\begin{exercise} \label{exc:coprime-einstein-is-irreducible}
Show that if $(d,K)=1$ then $\cN_{K,d}(C) = \cN_{K,d}^s(C)$.
\end{exercise}

\begin{cor}[$\cN_{K,d}(C)$ is nice when $(d,K)$ = 1]
When $(d,K) = 1$, $\cN_{K,d}(C)$ is a compact
\kahler manifold.
\end{cor}
\begin{pf} This is just the combination of \autoref{thm:N-is-kahler},
\autoref{thm:Ns-is-compact}, and
\autoref{exc:coprime-einstein-is-irreducible}.
\end{pf}

What does $\cN_{K,d}(C)$ look like concretely, when $K>1$? Here is a
preliminary observation:

\begin{prop}[Tensorization with line bundle gives an isometry] \label{prop:tensor-line-is-isometry}
Suppose $\cL$ is a holomorphic line bundle on $C$, of degree $d'$.
Then the map $E \to E \otimes \cL$ gives a holomorphic
isometry of \kahler manifolds
\begin{equation}
\cN^s_{K,d}(C) \simarrow \cN^s_{K,d+Kd'}(C).
\end{equation}
\end{prop}
\begin{pf}
By \autoref{lem:einstein-connections-on-line-bundles} we can choose
a metric inducing an Einstein connection $D_\cL$ on $\cL$. Now
suppose given an Einstein connection $D$ in $E$. Then the connection
$D' = D \otimes 1 + 1 \otimes D_\cL$ in $E' = E \otimes \cL$ has curvature
\begin{equation} \label{eq:additivity-of-curvature}
 F_{D'} = F_D + F_{D_\cL} \bid
\end{equation}
(note in writing this equation we used
the fact that $\End(E') \simeq \End(E)$).
Thus $D'$ is also Einstein. This gives the desired map.
\end{pf}

As a consequence of \autoref{prop:tensor-line-is-isometry}, one can say
loosely that $\cN_{K,d}^s(C)$ ``depends on $d$ only modulo $K$''
(although one does not quite get a \ti{canonical} isomorphism.)
Moreover, tensorization by degree \ti{zero} bundles keeps us within
the same moduli space, i.e. $\cN_{K,d}^s(C)$ has an action of $\Jac(C)$ by isometries.
So crudely speaking, $\cN_{K,d}^s(C)$ has $g$ complex directions in which
it looks like the compact complex torus $\Jac(C)$, while the other
$(g-1)(K^2-1)$ directions are more interesting.

\begin{exercise} Verify \eqref{eq:additivity-of-curvature}.
\end{exercise}

\begin{exercise} Verify that the map in
\autoref{prop:tensor-line-is-isometry} is a holomorphic
isometry of \kahler manifolds.
\end{exercise}




\subsection{Stable vector bundles}

It still remains to explain what $\cN_{K,d}(C)$ and $\cN_{K,d}^s(C)$ precisely
mean in terms of our original aim of studying holomorphic vector bundles.
For $K > 1$ the situation is a bit different than for $K=1$:
not every holomorphic vector bundle admits an Einstein connection,
so not every holomorphic vector bundle will correspond to a point of
$\cN_{K,d}(C)$.
In this section we introduce the class of bundles which do.

\begin{defn}[Slope of a vector bundle] The \ti{slope} of a holomorphic vector bundle $E$ over $C$ is
\begin{equation}
  \mu(E) = \frac{\deg E}{\rank E}.
\end{equation}
\end{defn}

\begin{defn}[Stable holomorphic vector bundle] \label{def:stable-hol-vb} 
A holomorphic vector bundle $E$ over $C$ is called:
\begin{itemize}
\item \ti{stable} if, for every holomorphic subbundle $E' \subset E$,
we have $\mu(E') < \mu(E)$,
\item \ti{polystable} if $E$ is a direct sum of stable bundles
of the same slope,
\item \ti{semistable} if, for every holomorphic subbundle
$E' \subset E$, we have $\mu(E') \le \mu(E)$.
\end{itemize}
\end{defn}

We have inclusions
\begin{equation}
   \{ \text{stable} \} \subset \{ \text{polystable} \} \subset \{ \text{semistable} \}.
\end{equation}
In favorable cases this hierarchy collapses:
\begin{exercise} \label{exc:coprime-semistable-is-stable}
Show that if $(K,d) = 1$ then every semistable bundle of rank $K$
and degree $d$ is stable.
\end{exercise}

\begin{example}[Stability for bundles over $\C\PP^1$]
Grothendieck's lemma says that all holomorphic vector
bundles over $\C\PP^1$ are direct sums of line bundles,
$E = \bigoplus_{i=1}^K \cO(n_i)$, and moreover that
two such sums are isomorphic only if they include the
same $n_i$.
The slope of such a bundle is the average of the $n_i$,
\begin{equation}
\mu(E) = \frac{\sum n_i}{K}.
\end{equation}
Thus $E$ is unstable unless
all $n_i$ are equal; if all $n_i$ are equal it is
polystable; it is stable only if $K=1$.
\end{example}

\begin{example}[Instability of $\cO(-1) \oplus \cO(1)$]
What does it mean to say that the bundle $\cO(-1) \oplus \cO(1)$
is unstable? One way to think of it is to consider a certain
$1$-parameter family of vector bundles $E_t$, obtained
as \ti{extensions}
\begin{equation}
  0 \to \cO(-1) \to E_t \to \cO(1) \to 0,
\end{equation}
parameterized by classes $t \in H^1(\cO(-2)) \simeq \C$.
Concretely what this means is that we take the bundle
$\cO(-1) \oplus \cO(1)$ and modify its transition function
on the overlap between north-pole and south-pole patches
to
\begin{equation}
  \begin{pmatrix} z^{-1} & t \\ 0 & z \end{pmatrix}.
\end{equation}
For $t \neq 0$ we have $E_t \simeq \cO(0) \oplus \cO(0)$
while for $t = 0$ instead $E_t \simeq \cO(1) \oplus \cO(-1)$.
Thus we have the unstable bundle
$\cO(1) \oplus \cO(-1)$
precisely at $t = 0$, which under the
slightest perturbation ``decays'' to the semistable one
$\cO(0) \oplus \cO(0)$.

The existence of this family
means that if we naively try to construct a moduli space of \ti{all} holomorphic bundles
over $\C\PP^1$ up to equivalence, without imposing any stability condition,
then any open set around the unstable
bundle $\cO(1) \oplus \cO(-1)$ necessarily contains $\cO(0) \oplus \cO(0)$,
i.e. the space would have to be non-Hausdorff.
\end{example}

\begin{exercise}
Check that indeed for $t \neq 0$ we have $E_t \simeq \cO(0) \oplus \cO(0)$.
Hint: use the fact that the transition matrix can be factorized into
one piece polynomial in $z$ and one piece polynomial in $z^{-1}$
(``Birkhoff factorization''),
\begin{equation}
   \begin{pmatrix} z^{-1} & t \\ 0 & z \end{pmatrix} = \begin{pmatrix} 0 & 1 \\ 1 & t^{-1}z \end{pmatrix} \begin{pmatrix} -t^{-1} & 0 \\ z^{-1} & t \end{pmatrix}.
\end{equation}
\end{exercise}

\begin{lem}[Saturation of subsheaves of bundles over curves]
If $E$ is a holomorphic vector bundle and $S \subset E$ a subsheaf,
then there exists a subbundle $F \subset E$
with $\rank F = \rank S$
and $\deg F \ge \deg S$.
\end{lem}
\begin{pf} $F$ is the ``saturation'' of $S$, defined as the kernel of the
projection $E \to (E/S)/T$ where $T$ is the torsion subsheaf of $E/S$;
then $E/F$ is torsion-free, which means $F$ is a subbundle
as desired.
\end{pf}

\begin{cor}[Alternative characterization of stability]
In \autoref{def:stable-hol-vb} we may replace ``subbundle of $E$'' by ``subsheaf $S \subset E$
with $\rank S < \rank E$.''
\end{cor}

\begin{prop}[Stable bundles are simple] If $E$ and $E'$ are both stable
holomorphic vector bundles with the same rank and degree,
then $\Hom(E,E')$ is 1-dimensional if $E \simeq E'$,
and trivial otherwise.
\end{prop}
\begin{pf} \cite{MR98b:14010}
If $E \not \simeq E'$ and $\Hom(E,E')$ is nontrivial, \ti{or}
$\dim \Hom(E,E') > 1$, then there exists some $\varphi: E \to E'$
such that $\varphi \neq 0$ and $\varphi$ is not an isomorphism.
Since $\varphi \neq 0$ we must have $\rank \ker \varphi < \rank E$.
Similarly, since $\varphi$ is not an isomorphism,
we must have $\rank \im \varphi < \rank E'$ (else $\det \varphi$ would be a nonzero map
$\det E \to \det E'$, which would have to be an isomorphism
since $\deg E = \deg E'$.)
But we have $\deg \ker \varphi + \deg \im \varphi = \deg E$
and $\rank \ker \varphi + \rank \im \varphi = \rank E$
from which it follows that either $\mu(\ker \varphi) \ge \mu(E)$ or $\mu(\im \varphi) \ge \mu(E) = \mu(E')$.
This contradicts the stability of $E$ and $E'$.
\end{pf}

Finally we remark on one fine point.
As we will see below, the objects appearing in $\cA^h \kq \fG$
are stable or at least polystable bundles,
not general semistable ones. On the other hand, the moduli space
we are constructing is often described as the moduli space of
semistable vector bundles.
To explain the reason for this apparent difference we first state:

\begin{prop}[Existence of Jordan-H\"older filtration]
If $(E, \bar\partial)$ is any holomorphic vector bundle,
there exists a filtration by holomorphic subbundles,
\begin{equation}
 0 = E_0 \subset E_1 \subset \cdots \subset E_k = E,
\end{equation}
such that all $\mu(E_i) = \mu(E)$ and
each quotient $E_i / E_{i-1}$ is stable.
The filtration need not be unique, but the induced
bundle
\begin{equation}
  \gr E = \bigoplus_i E_i / E_{i-1}
\end{equation}
is uniquely determined up to equivalence.
\end{prop}

% \begin{pf} First we must show that $E$
% has \ti{some} holomorphic line subbundle. This follows from
% Serre's theorem: there exists a line bundle $H$ such that
% $E \otimes H$ is generated by global sections; in particular
% a global section exists, i.e. there is a map of line
% bundles $H^{*} \to E$. The saturation of the image
% gives the desired holomorphic line subbundle of $E$.

% Now let $E_1$ be a maximal stable subbundle of $E$, then let $E_2$ be
% a maximal stable subbundle of $E / E_1$, and so on.
% To see that $\gr E$ is uniquely determined, suppose given two
% such filtrations $E_i$ and $E'_i$. \fixme{...}
% \end{pf}

If $E$ is stable then the Jordan-H\"older filtration has
just one step, and $\gr E = E$. More generally we have:

\begin{prop}[Associated graded to a semistable bundle is polystable]
If $E$ is semistable, then $\gr E$ is polystable.
\end{prop}

\begin{defn}[$S$-equivalence] If $E$ and $E'$ are semistable
holomorphic vector bundles over $C$, we say $E$ and $E'$ are
\ti{$S$-equivalent} if and only if $\gr E$ and $\gr E'$ are
equivalent.
\end{defn}

Thus in each $S$-equivalence class there is a unique polystable
representative up to ordinary equivalence.
It follows that the set of semistable bundles
up to $S$-equivalence is the same as the set of polystable bundles
up to ordinary equivalence.


\subsection{Gauge-theoretic meaning of stability}

Now we are ready to deal with the question of whether indeed
\begin{equation}
  \cA^{\bar\partial} / \fG_\C = \cA^h \kq \fG.
\end{equation}
\autoref{thm:narasimhan-seshadri} below says that this will be true
after deleting unstable bundles from $\cA^{\bar\partial}$.
We need a preliminary:

\begin{thm}[Weak Uhlenbeck compactness] \label{thm:uhlenbeck-weak}
Suppose that $\{D_i\} \in \cA^h_1$ is a sequence of $L^2_1$ unitary
connections on $C$, with $\norm{F(D_i)}$ bounded. Then after passing
to a subsequence, there exist $g_i \in \fG_2$ such that $D_i^{g_i}$
converge weakly.
\end{thm}

Morally this should be understood as analogous to the compactness
\autoref{thm:Ns-is-compact} for flat connections: we are saying that
even if we allow some bounded amount of curvature, we still get a
kind of weak compactness when we divide out by gauge transformations.


Now we are ready for the main theorem about moduli of bundles:

\begin{thm}[Narasimhan-Seshadri theorem]  \label{thm:narasimhan-seshadri}
\cite{MR32:1725}
We have:
\begin{itemize}
\item For any $[D] \in \cN^s_{K,d}(C)$ the $(0,1)$ part $\bar\partial_D$
induces the structure of \ti{stable} holomorphic vector bundle on $E$.
Conversely, any stable holomorphic structure
on $E$ is equivalent to $\bar\partial_D$ for a unique $[D] \in \cN^s_{K,d}(C)$.
\item For any $[D] \in \cN_{K,d}(C)$ the $(0,1)$ part $\bar\partial_D$
induces the structure of \ti{polystable} holomorphic vector bundle on $E$.
Conversely, any polystable holomorphic structure
on $E$ is equivalent to $\bar\partial_D$ for a unique $[D] \in \cN_{K,d}(C)$.
\end{itemize}
\end{thm}

\begin{pf} The proof we follow here is given in \cite{MR710055}.
We only give a sketch.
Moreover, we just discuss the case $d=0$ --- the other cases are
very similar but involve more ugly notation.

First suppose $[D] \in \cN^s_{K,d}(C)$. Thus $D$
is an irreducible flat connection. Suppose that $E' \subset E$ is some
subbundle preserved by $\bar\partial_D$; we want to show that $\deg E' < 0$.
This is an instance of the general principle that ``curvature decreases
in holomorphic subbundles.''
Let $E''$ be the orthocomplement of $E'$; then $D$ splits as
\begin{equation} \label{eq:connection-split}
  D = \begin{pmatrix} D_{E'} & - \beta^\dagger \\ \beta & D_{E''} \end{pmatrix}
\end{equation}
where $\beta \in \Omega^{1,0} \otimes \Hom(E',E'')$ (the $(0,1)$ component
of $\beta$ vanishes because $E'$ is preserved by $\bar\partial_D$).
Then we compute
\begin{equation} \label{eq:extension-curvature}
  F_D = \begin{pmatrix} F_{D_{E'}} - \beta^\dagger \wedge \beta & - D_{\Hom(E'',E')} \beta^\dagger \\ D_{\Hom(E',E'')} \beta & F_{D_{E''}} - \beta \wedge \beta^\dagger \end{pmatrix} = 0.
\end{equation}
First look at the upper left corner: it says that
\begin{equation}
  F_{D_{E'}} = \beta^\dagger \wedge \beta,
\end{equation}
and thus
\begin{equation}
 \deg E' = \frac{\I}{2 \pi} \int_C \Tr F_{D_{E'}} = \frac{\I}{2 \pi} \int_C \Tr \beta^\dagger \wedge \beta.
\end{equation}
Now, $\I \Tr (\beta^\dagger \wedge \beta)$ is a seminegative form,
so we get $\deg E' \le 0$, with equality only if $\beta = 0$.

If $D$ is irreducible, then
we must have $\beta \neq 0$; in that case we get $\deg E' < 0$,
so $(E,\bar\partial_D)$ is stable, as desired.
If $D$ is not irreducible, then we may have $\beta = 0$;
but in this case $(E,\bar\partial_D)$ decomposes as direct sum
of two holomorphic bundles, each of degree $0$, each carrying a
flat unitary connection. By induction on the rank we may assume
that these two are polystable; thus
$(E,\bar\partial_D)$ is polystable, as desired.

Conversely suppose we have some $D$ such that $\bar\partial_D$
induces a stable holomorphic structure. Now we want to find a
\ti{flat} connection which induces the same holomorphic structure,
i.e. is in the same $\fG_\C$-orbit. Call this orbit $\cO$.
The moral idea is to consider the ``Yang-Mills functional''
given by the $L^2$ norm of $F_D$,
\begin{equation}
 \norm{F_D}^2 = \int_C F_D \wedge \star F_D.
\end{equation}
For technical convenience, instead of the $L^2$ norm, we
use a functional $J$
(which has the same minima as $\norm{F}$):
\begin{equation}
  J(F_D)^2 = \int_C \left[\nu\left(\frac{\star F_D}{2 \pi \I}\right)\right]^2
\end{equation}
where we use the norm on matrices given by
$\nu(M) = \Tr \sqrt{M^*M} = \sum \abs{\lambda_i}$.

Suppose we work formally for a moment, avoiding questions of
smoothness etc.
And suppose that $\cO$ contains a minimum of $J$, corresponding
to a unitary connection; abusing notation we call this connection $D$.
Then we consider an infinitesimal gauge transformation by
a \ti{self-adjoint} element
$Z \in \Lie \fG_\C = \Omega^0(\End E)$, i.e. $Z = Z^\dagger$ ---
i.e. transform by $e^{tZ}$ and work to first order in $t$.
Then the leading change of $\star F_D$ is given by $\I t D^* D Z$
(because $D$ changes by $t \bar\partial_D Z - t \partial_D Z$,
so $F_D$ changes by $t (\partial_D \bar\partial_D - \bar\partial_D \partial_D) Z = \star D^* D Z$). \fixme{check sign}
Thus if we choose $Z$ obeying
\begin{equation} \label{eq:gauge-laplace}
  \I D^* D Z = -\star F_D
\end{equation}
a gauge transformation by $e^{t Z}$ for small $t$
will reduce $J(F_D)$, unless
already $F_D = 0$. Elliptic theory shows that we can indeed
find a $Z$ obeying \eqref{eq:gauge-laplace}.
Thus, to get the desired $F_D = 0$,
all we need to do is show that a
minimum of $J$ is actually attained in $\cO$.

The idea is to construct a
sequence of connections $D_n$ for which
$J(F_{D_n})$ approaches its infimum.
Using the Uhlenbeck compactness
theorem \autoref{thm:uhlenbeck-weak} we can make gauge transformations
such that some subsequence becomes \ti{convergent}
(in the weak $L^2_1$ sense), to
some limiting connection $D_*$. If
$D_* \in \cO$ then we are done.

So what if $D_* \not\in \cO$? Then we want to derive
a contradiction. There
is no holomorphic isomorphism $(E,\bar\partial_D) \to (E,\bar\partial_{D_*})$.
Still, we can show that at least there is a
holomorphic map
\begin{equation}
  \gamma: (E,\bar\partial_D) \to (E,\bar\partial_{D_*}).
\end{equation}
This uses the fact that holomorphically $(E,\bar\partial_D) \simeq (E,\bar\partial_{D_n})$ --- in other words, the operator
$\bar\partial_{D^*_n} \otimes \bar\partial_D$
on $\Hom(E,E)$ has a nontrivial kernel. Some elliptic estimates
show that this kernel cannot disappear in the limit (roughly:
if the lowest eigenvalue of the associated Laplacian is zero
for all $\bar\partial_{D_n}$ then it is also zero for $\bar\partial_{D_*}$),
so $\bar\partial_{D^*_n} \otimes \bar\partial_D$
 also has a nontrivial kernel,
giving the desired $\gamma$.

Now, since $\Hom(E,E)$ has degree zero and $\gamma$ is holomorphic,
it is impossible for $\det \gamma$ to have isolated zeroes: it either
vanishes everywhere or nowhere; but by assumption it does vanish somewhere;
so it must be zero. It follows that the image of $\gamma$ is contained in
some proper holomorphic subbundle $F$ of $(E,\bar\partial_{D_*})$; 
also let $K$ denote a proper holomorphic subbundle
of $(E,\bar\partial_D)$ containing $\ker \gamma$.
Then we have a diagram of vector bundles:
\begin{equation}
\begin{tikzcd}
0 \arrow[r] & K \arrow[r] & E \arrow[r] \arrow[d,"\gamma"] & G \arrow[d,"\rho"] \arrow[r] & 0 \\
0 & H \arrow[l] & E \arrow[l] & F \arrow[l] & 0 \arrow[l]
\end{tikzcd}
\end{equation}
where on the top row we have the holomorphic structure
$\bar\partial_D$ and on the bottom $\bar\partial_{D_*}$;
and $\det \rho$ is generically nonzero.
The existence of $\rho$ then implies
\begin{equation}
  \deg G \le \deg F.
\end{equation}
Moreover, since $(E,\bar\partial_D)$ (the top row) was assumed stable,
we must have $\deg K < 0$, so $\deg G > 0$, and thus $\deg F > 0$.
In particular, this means $(E,\bar\partial_{D_*})$ (the bottom row) is
\ti{unstable}. (That is as we should expect: $D_*$ is
in the closure of the $\fG_\C$-orbit $\cO$, so if it
were stable, it would lead to some non-Hausdorff behavior
in the quotient.)

We now derive a contradiction from this state of affairs.

The bottom row leads to a bound on \ti{all}
connections in the orbit of $(E,\bar\partial_{D^*})$,
as follows.
First, note that because this bundle is \ti{unstable}
we cannot make $J= 0$. The unstable
decomposition gives a precise lower bound,
\begin{equation} \label{eq:J-lower-bound}
  J \ge 2 \deg F,
\end{equation}
as we now show.
We use the shape of the
curvature of a connection in $(E,\bar\partial_{D^*})$
as we used above,
\begin{equation} \label{eq:extension-curvature-again}
  F_D = \begin{pmatrix} F_{D_F} - \beta^\dagger \wedge \beta & - D_{\Hom(H,F)} \beta^\dagger \\ D_{\Hom(F,H)} \beta & F_{D_{H}} - \beta \wedge \beta^\dagger \end{pmatrix},
\end{equation}
and the fact that the matrix norm $\nu$ behaves well:
\begin{equation}
  \nu\left[\begin{pmatrix} A & B \\ C & D \end{pmatrix} \right] \ge \abs{\Tr A} + \abs{\Tr D}.
\end{equation}
Applying this to \eqref{eq:extension-curvature-again} the key point
is that the extra terms involving $\beta$ have the \ti{same sign}
as the curvatures; thus the equation
\begin{equation}
  J(F_D) \ge \int_C \nu\left(\frac{\star F_D}{2 \pi \I}\right)
\end{equation}
gives $J(F_D) \ge \abs{\deg F}+\abs{\deg H} = 2 \deg F$
as desired.

On the other hand the top row of the diagram implies the existence
of a connection in the orbit of $(E,\bar\partial_D)$,
such that
\begin{equation} \label{eq:J-upper-bound}
  J < 2 \deg G.
\end{equation}
For this, one works by induction: so assume that the
result has been proven for all ranks $K'<K$.
(The case $K'=1$ was \autoref{lem:einstein-connections-on-line-bundles}.)
Then the idea is to \ti{use} the existence of Einstein connections on
smaller bundles, and the fact that $(E,\bar\partial_D)$
comes as an extension of $G$ by $K$,
to cook up a connection on the full $(E,\bar\partial_D)$
which does the job. \fixme{...}

Combining \eqref{eq:J-upper-bound} and \eqref{eq:J-lower-bound}
gives a contradiction with the fact
that $D^*$ was the limit of an infimizing sequence.

\end{pf}

\begin{exercise} Verify the formula \eqref{eq:extension-curvature}.
It is convenient to think of \eqref{eq:connection-split} as shifting
a connection by a $1$-form,
\begin{equation}
  D = \begin{pmatrix} D_{E'} & 0 \\ 0 & D_{E''} \end{pmatrix} + \begin{pmatrix} 0 & - \beta^\dagger \\ \beta & 0 \end{pmatrix}
\end{equation}
and then use the formula for the perturbed
curvature, $F_{D + A} = F_D + DA + A \wedge A$.
\end{exercise}

\begin{exercise} Over $\C\PP^1$, show that $\cO(m) \oplus \cO(m)$
admits a holomorphic subbundle isomorphic to $\cO(n)$ if and only if
$n \le m$.
(This is an illustration of the principle that curvature
decreases in holomorphic subbundles, but it is instructive to
do it directly in the holomorphic language without using connections.)
\end{exercise}


\subsection{Bundles with fixed determinant}

\fixme{should say this more systematically}

One way to focus attention on only the interesting directions is to consider
a smaller moduli space, consisting of bundles with ``fixed determinant.''
For this, we fix some line bundle $L$ of degree $d$,
use it to define the moduli space $\cN_{1,d}(C)$, and then fix
an element $\tilde{d} \in \cN_{1,d}(C)$.
If $d=0$ then it would be natural to take
$L$ and $\tilde{d}$ to be trivial.
Then we fix a bundle $E$ together with an isomorphism
$\det E \simeq L$, and construct moduli
spaces $\cS\cN_{K,\tilde d}(C)$ and $\cS\cN^s_{K,\tilde d}(C)$
by repeating all our previous
constructions, now with the extra condition that the connections
$D$ which we consider have $\det D = \tilde{d}$,
and the gauge group is restricted to $g \in U(E)$
such that $\det g$ acts trivially.

As before, we have:
\begin{prop}[Moduli of stable bundles with fixed determinant is \kahler]
$\cS\cN^s_{K,\tilde d}(C)$ is a \kahler manifold, of complex dimension
$(g - 1) (K^2 - 1)$.
\end{prop}

\begin{exercise} In what sense is $\cS\cN_{K,\tilde d}(C)$ ``independent''
of the choice of $\tilde d$?
\end{exercise}

\begin{exercise} State the analogue of the Narasimhan-Seshadri theorem
for $\cS\cN^s_{K,\tilde d}$.
\end{exercise}


\begin{example}[Bundles of rank $2$ with fixed determinant
over a genus $2$ curve] Consider the case where the rank $K=2$ and
$C$ has genus $g = 2$. In this case we have
\begin{equation}
\dim_\C \cS\cN^s_{2,\tilde d}(C) = 3.
\end{equation}
These spaces are described concretely
in the paper \cite{MR0242185}.

It turns out that
$\cS\cN_{2,0}(C)$ can be naturally identified with $\C\PP^3$.
The vague idea is as follows.
Let $P = \cN_{1,1}(C)$ (a torus of complex dimension $2$.)
Suppose given a polystable rank $2$ holomorphic bundle $E$ on $C$, with
$\det E$ holomorphically trivial.
We consider the set $\Theta_E \subset P$ consisting of all degree
$1$ line bundles $L$ such that $E \otimes L$ has nontrivial holomorphic
sections. This subset turns out to be the zero locus of a holomorphic
section $s_E$ of
a certain canonically defined line bundle $\cL \to P$.
$s_E$ is determined up to overall rescaling by $E$, and
$s_E$ determines $E$ up to equivalence; thus
$\cS\cN_{2,0}(C)$ gets identified with the projectivization
of the vector space of sections of $\cL$.

(Warning: it is a bit of an accident that $\cS\cN_{2,0}(C)$
has the structure of complex manifold even though $0$ and $2$
are not relatively prime; this doesn't happen in most
examples. Also, as far as I know,
the \kahler structure on the open subset $\cS\cN^s_{2,0}(C)$
does not extend smoothly over the whole $\C\PP^3$, so you probably
shouldn't think of this as being the standard \kahler structure on
$\C\PP^3$.)

The description of $\cS\cN^s_{2,\tilde d}(C)$ when $\tilde d$ has degree
$1$ is equally concrete but more complicated to state; see \cite{MR0242185}
for that.

\end{example}


\begin{exercise} Suppose
a rank $2$ bundle $E$ over $C$ is given holomorphically as a
nontrivial (i.e. non-split) extension
\begin{equation}
0 \to L^* \to E \to L \to 0
\end{equation}
where $L$ has degree $1$.
Show that $E$ is semistable and $\det E$ is holomorphically trivial.
\end{exercise}


\section{Higgs bundles}

Finally we are ready to treat the moduli space of Higgs bundles.
The fundamental reference for this subject is \cite{MR89a:32021};
strictly speaking that paper treats only the case of rank $2$ bundles
with fixed determinant, but most of the fundamental issues
and constructions appear already there.

As before we fix a compact Riemann surface $C$, with a
\kahler metric of total volume $1$, and two integers
$K \ge 2$ and $d$.
We are going to define a moduli space $\cM_{K,d}(C)$ which can be
studied, and thought of, in several different ways.


\subsection{Basic definitions}

\begin{defn}[Higgs bundle] \label{def:higgs-bundle}
A \ti{Higgs bundle} of rank $K$ over $C$
is a tuple $(E, \bar\partial_E, \varphi)$
where $(E,\bar\partial_E)$ is a holomorphic vector bundle
of rank $K$ over $C$, and
\begin{equation}
\varphi \in H^0(C, \End E \otimes K_C).
\end{equation}
$\varphi$ is called the \ti{Higgs field}.
\end{defn}

Thus relative to a local holomorphic trivialization of $(E,\bar\partial_E)$
and local coordinate on $C$, $\varphi$ would
be written as a matrix of holomorphic $1$-forms: something like
\begin{equation}
  \varphi = \begin{pmatrix} f_1 & f_2 \\ f_3 & f_4 \end{pmatrix} \de z,
\end{equation}
where all $f_i$ are holomorphic functions of $z$.

\begin{defn}[Sub-Higgs bundle] If $(E, \bar\partial_E, \varphi)$
is a Higgs bundle over $C$, a \ti{sub-Higgs bundle} thereof
is a subbundle $E' \subset E$ which is preserved by $\bar\partial_E$
and has
\begin{equation}
  \varphi(E') \subset E' \otimes K_C.
\end{equation}
\end{defn}


\subsection{Moduli space as holomorphic symplectic quotient}

Now suppose we want to construct a moduli space parameterizing Higgs
bundles modulo equivalence --- perhaps with some stability condition,
yet to be described. To get some crude idea of what will happen,
let us imagine that we take all stable vector bundles
and then equip them with arbitrary Higgs fields: in other words
we take our ``moduli space'' to be a vector bundle over
$\cN^s_{K,d}(C)$, with fiber $H^0(C, \End E \otimes K_C)$.

\insfig{higgs-bundles-16}{1.0}

What structure does it carry?

Fix a point $D \in \cN^s_{K,d}(C)$.
The space of Higgs fields on the holomorphic bundle $(E, \bar\partial_D)$
is the same as the space of harmonic forms
$\varphi = \Phi_z \in \cH^{1,0}_D(\End E)$.
On the other hand, the tangent space to $\cN^s_{K,d}(C)$ at $D$, considered
as a complex vector space, is the space
of harmonic forms $\dot{A}_{\bar z} \in \cH^{0,1}_D(\End E)$.
The two are dual via the pairing
\begin{equation}
  (\dot{A}_{\bar z}, \Phi_z) \mapsto \int_C \Tr (\dot{A}_{\bar z} \wedge \Phi_z).
\end{equation}
Thus the moduli space we obtain in this way is simply $T^* \cN_{K,d}(C)$.
In particular this is a \ti{holomorphic symplectic} manifold.

There is another way of viewing this space which will be enlightening.
We recall that, ignoring questions of stability, $\cN_{K,d}$ just
consists of all holomorphic structures on $E$, up to equivalence,
\begin{equation}
	\cN_{K,d}(C) = \cA^{\bar\partial} / \fG_\C.
\end{equation}
This suggests
(following the theme of \autoref{exc:cotangent-symplectic-quotients}) that we might profitably view $T^* \cN_{K,d}(C)$
as a holomorphic symplectic quotient,
\begin{equation}
	T^* \cN_{K,d}(C) = (T^* \cA^{\bar\partial}) \kq \fG_\C.
\end{equation}
Let us see how this works.

As before, we fix a smooth bundle $E$ over $C$,
of degree $d$. Now we define a ``doubled'' version of the space of $\bar\partial$-operators
on $E$,
\begin{equation}
  \cA^\C_1 = \cA^{\bar\partial} \times \Omega^{1,0}(\End E).
\end{equation}
$\cA^\C_1$ is a complex affine space over
$\Omega^{0,1}(\End E) \oplus \Omega^{1,0}(\End E)$.
We have
\begin{equation}
  \cA^\C_1 = T^* \cA^{\bar\partial}
\end{equation}
and
\begin{equation}
  T \cA^\C_1 = \Omega^{0,1}(\End E) \oplus \Omega^{1,0}(\End E).
\end{equation}
The space $\cA^\C_1$ carries an obvious complex structure (since $T\cA^\C_1$
is naturally a complex vector space).
It also carries a natural holomorphic symplectic form:
\begin{equation} \label{eq:Omega-1-AC}
  \Omega_1((\dot{A}_{1{\bar z}}, \dot\Phi_{1z}),(\dot{A}_{2\bar{z}}, \dot\Phi_{2z})) = 2 \I \int_C \Tr (\dot{A}_{1{\bar z}} \wedge \dot\Phi_{2z} - \dot{A}_{2\bar{z}} \wedge \dot\Phi_{1z}).
\end{equation}
We denote points of $\cA^\C_1$ as $(\bar\partial_E, \varphi) \in \cA^\C_1$.
As with $\cA^{\bar\partial}$, $\cA^\C_1$ has a natural action
of $\fG_\C$, by
\begin{equation}
  (\bar\partial_E,\varphi) \mapsto (\bar\partial_E^g = g \bar\partial_E g^{-1}, \varphi^g = g \varphi g^{-1}).
\end{equation}
Now we want to take the holomorphic symplectic quotient by this action.
So first we need to know the moment map:

\begin{prop}[Moment map for $\fG_\C$-action on $\cA^\C_1$] \label{prop:complex-moment-map-higgs}
The $\fG_\C$-action on $\cA^\C_1$ has a complex moment map
with respect to $\Omega_1$,
\begin{equation}
  M_1 = 2 \I \bar\partial_E \varphi.
\end{equation}
More precisely, this means: given $Z \in \Lie \fG_\C = \Omega^0(\End E)$
we have
\begin{equation} \label{eq:M1-gauge}
  M_{1,Z}(\bar\partial_E,\varphi) = 2 \I \int_C \Tr(Z \bar\partial_E \varphi).
\end{equation}
\end{prop}

\begin{pf} This follows the pattern of proof of \autoref{prop:unitary-connections-moment-map}.
Each $Z \in \Omega^0(\End E)$ generates a vector field on $\cA_1^\C$,
\begin{equation}
  \rho(Z) = (- \bar\partial_E Z, [Z,\varphi]),
\end{equation}
and for
$(\dot A_{\bar z},\dot\Phi_z) \in \Omega^{0,1}(\End E) \times \Omega^{1,0}(\End E) = T\cA_1^\C$,
we compute by differentiating \eqref{eq:M1-gauge}
\begin{equation}
  \de M_{1,Z} (\dot A_{\bar z},\dot\Phi_z) = 2 \I \int_C \Tr( Z [\dot A_{\bar z},\varphi] + Z \bar\partial_E \dot\Phi_z).
\end{equation}
Now we can check directly that $M_1$ is indeed a moment map, using \eqref{eq:Omega-1-AC}:
\begin{align}
  \Omega_1(\rho(Z), (\dot A_{\bar z},\dot\Phi_z)) &= 2 \I \int_C \Tr(- \bar\partial_E Z \wedge \dot\Phi_z - \dot A_{\bar z} \wedge [Z,\varphi]) \\
  &= 2 \I \int_C \Tr(Z \bar\partial_E \dot\Phi_z + Z[\dot A_{\bar z},\varphi]) \\
  &= \de M_{1,Z}(\dot A_{\bar z},\dot\Phi_z)
\end{align}
as desired.
\end{pf}

So, the zero set of the moment map is simply
\begin{equation}
	M_1^{-1}(0) = \{ (\bar\partial_E, \varphi ) \in \cA^\C_1: \bar\partial_E \varphi = 0 \}.
\end{equation}
This means that
the holomorphic symplectic quotient
\begin{equation}
 \cA^\C_1 \kq \fG_\C = M_1^{-1}(0) / \fG_\C
\end{equation}
consists of equivalence classes of holomorphic bundles equipped
with \ti{holomorphic} Higgs fields, just as we wanted.
This is encouraging. On the other hand, by itself, it doesn't
give us anything really new about the space.


\subsection{Moduli space as \hk quotient}

As we have noted, though, a holomorphic symplectic quotient $X \kq G_\C$
often has another interpretation: if the space $X$ is
actually \hk, then we can try to identify $X \kq G_\C = X \hkq G$,
and thus get a \hk structure on the quotient.
Let us try to do that here.

As we did before, we introduce a Hermitian metric $h$ on the
bundle $E$.
Then let $\cA^H$ denote the space
of pairs $(D,\Phi)$ where $D$ is a \ti{unitary} connection on $(E,h)$
and $\Phi \in \Omega^1(\fu(E))$.
$\cA^H$ is naturally an affine space over the real vector space
$\Omega^1(\fu(E)) \oplus \Omega^1(\fu(E))$.
The group $\fG$ of unitary gauge transformations
acts on $\cA^H$ by
\begin{equation}
  (D,\Phi) \mapsto (D^g = g D g^{-1}, \Phi^g = g \Phi g^{-1}).
\end{equation}
We have an isomorphism of real affine spaces
\begin{align}
    \cA^\C_1 &\simarrow \cA^H \\
    (\bar\partial_E,\varphi) & \mapsto (D = \bar\partial_E + \partial_E, \Phi = \varphi - \varphi^\dagger)
\end{align}
where $\bar\partial_E + \partial_E$ denotes the Chern connection.

$\cA^H$ carries the complex form $\Omega_1$ which we break into
components $\Omega_1 = \omega_2 + \I \omega_3$, plus another
real symplectic form $\omega_1$, naturally extending the one \eqref{eq:symplectic-form-A} which
we had on $\cA^h$:
\begin{subequations} \label{eq:symplectic-forms-higgs}
\begin{align}
  \omega_1((\dot A_1, \dot \Phi_1),(\dot A_2, \dot \Phi_2)) &= \int_C \Tr(- \dot A_1 \wedge \dot A_2 + \dot \Phi_1 \wedge \dot \Phi_2), \\
  \omega_2((\dot A_1, \dot \Phi_1),(\dot A_2, \dot \Phi_2)) &= \int_C \Tr(\dot \Phi_1 \wedge \star \dot A_2 - \dot A_1 \wedge \star \dot \Phi_2), \\
  \omega_3((\dot A_1, \dot \Phi_1),(\dot A_2, \dot \Phi_2)) &= \int_C \Tr(\dot\Phi_1 \wedge \dot A_2 + \dot A_1 \wedge \dot \Phi_2).
\end{align}
\end{subequations}
Note that the $\omega_i$ are translation invariant forms on $\cA^H$ and hence
closed.

\begin{exercise} Verify that indeed $\Omega_1 = \omega_2 + \I \omega_3$. (Hint: it is
easiest to compute $\omega_2 + \I \omega_3$ and then compare it to $\Omega_1$.
For example, in the first term you will get $\star \dot{A}_2 + \I \dot{A}_2$ appearing.
Then use the fact that $\dot{A}_2 = \dot{A}_{2z} + \dot{A}_{2\bar{z}}$.)
\end{exercise}

\begin{prop}[\Hk structure on $\cA^H$] The forms
$(\omega_1, \omega_2, \omega_3)$ on $\cA^H$ are the symplectic
forms for a \hk structure $(I_1,I_2,I_3,g)$ on $\cA^H$, with \hk metric
\begin{equation}
  g((\dot A_1, \dot \Phi_1),(\dot A_2, \dot \Phi_2)) = - \int_C \Tr(\dot A_1 \wedge \star \dot A_2 + \dot \Phi_1 \wedge \star \dot \Phi_2)
\end{equation}
The complex structures act by:
\begin{align}
 I_1(\dot A, \dot \Phi) &= (\star \dot A, - \star \dot \Phi), \\
 I_2(\dot A, \dot \Phi) &= (- \dot \Phi, \dot A), \\
 I_3(\dot A, \dot \Phi) &= (- \star \dot\Phi, - \star \dot A).
\end{align}
\end{prop}

\begin{pf} Just compute directly that $I_i^2 = -1$, $I_1 I_2 = I_3$,
and $\omega_i(\cdot, \cdot) = g(I_i \cdot, \cdot)$.
For example, when $i=3$ this amounts to checking that
\begin{equation}
g((-\star \dot \Phi_1, -\star \dot A_1),(\dot A_2, \dot \Phi_2)) = \omega_3((\dot A_1, \dot \Phi_1),(\dot A_2, \dot \Phi_2)).
\end{equation}

\end{pf}

There is a more abstract way of viewing this construction:
\begin{exercise} \label{exc:VVstar-hk} If $(V,I,\omega)$
is a \kahler vector space, show that
$V \oplus V^*$ admits a canonical \hk structure, for which $I_1 = I \oplus I^T$,
$\omega_1 = \omega \oplus -\omega^{-1}$,
and $\Omega_1(v \oplus \alpha, v' \oplus \alpha') = 2\I (\alpha'(v) - \alpha(v'))$.
\end{exercise}

\begin{exercise}
Show that the \hk structure on $\R^4$ from \autoref{exa:R4} arises
from the construction of \autoref{exc:VVstar-hk},
where $V$ is the first $\R^2$ and $V^*$ the second $\R^2$
in $\R^4$, and the duality pairing is $(x_2, x_3) \cdot (x_0, x_1) = x_3 x_0 + x_2 x_1$.
\end{exercise}

\begin{exercise} Show that the \hk structure on $\cA^H$ introduced
above arises from the construction of \autoref{exc:VVstar-hk},
applied to the vector space $V = \Omega^1(\fu(E))$.
\end{exercise}

In order to take a \hk quotient $\cA^H \hkq \fG$ we need
first to have a moment map.
To write it we will use a bit of notation which
is convenient but also confusing, so let's
spell its meaning out. In local real coordinates $(x,y)$ on $C$,
for $\alpha, \beta \in \Omega^1(\End E)$,
we have
\begin{align}
  \alpha \wedge \beta &= (\alpha_x \de x + \alpha_y \de y) \wedge (\beta_x \de x + \beta_y \de y) \\
  &= (\alpha_x \beta_y - \alpha_y \beta_x) \de x \wedge \de y.
\end{align}
Thus if we define (note the tricky sign)
\begin{equation}
  [\alpha,\beta] = \alpha \wedge \beta + \beta \wedge \alpha
\end{equation}
we have
\begin{equation}
  [\alpha,\beta] = ([\alpha_x, \beta_y] - [\alpha_y, \beta_x]) \de x \wedge \de y.
\end{equation}
In particular,
\begin{align}
  \Phi \wedge \Phi = \half [\Phi, \Phi] = [\Phi_x, \Phi_y] \de x \wedge \de y,
\end{align}
and recalling $\Phi = \varphi - \varphi^\dagger$,
\begin{align}
  \Phi \wedge \Phi &= - [\varphi_z, \varphi^\dagger_{\bar z}] \de z \wedge \de \bar{z} \\
  &= - [\varphi, \varphi^\dagger].
\end{align}

Now we can write the moment map:

\begin{prop}[\Hk moment map for $\fG$ action on $\cA^H$]
The $\fG$ action on $\cA^H$ admits a \hk moment map $\vec\mu$, given by:
\begin{align}
  \mu_2 + \I \mu_3 &= 2 \I \bar\partial_D \varphi \\
  \mu_1 &= -F_D + \Phi \wedge \Phi - 2 \pi \I \frac{d}{K} \bid \omega_C.
\end{align}
\end{prop}

\begin{pf} We have already computed the holomorphic moment map
$M_1 = \mu_2 + \I \mu_3$, in \autoref{prop:complex-moment-map-higgs}.
All that remains is to check the formula for $\mu_1$.
% First note that for matrix-valued $1$-forms $\Phi_1, \Phi_2$ we have
% $\Phi_1 \wedge \Phi_2 = (\Phi_{1x} \Phi_{2y} - \Phi_{1y} \Phi_{2x}) \de x \wedge \de y$
We have
\begin{equation}
  \de \mu_{1,Z}(\dot A, \dot \Phi) = \int_C \Tr Z\left(- D \dot{A} + [\dot\Phi,\Phi] \right)
\end{equation}
% (using the fact that $[\Phi,\dot \Phi] = [\dot \Phi,\Phi]$, which we
% can check by writing both out in local coordinates and getting
% $\Phi_x \dot\Phi_y - $)
and
\begin{equation}
  \rho(Z) = (-DZ, [Z,\Phi])
\end{equation}
giving
\begin{align}
  \omega_1(\rho(Z), (\dot A, \dot \Phi)) &= - \int_C \Tr(- D Z \wedge \dot A - [Z,\Phi] \wedge \dot \Phi) \\
  &= - \int_C \Tr(Z D\dot A - Z[\dot \Phi, \Phi]) \\
  &= \de \mu_{1,Z}(\dot A, \dot \Phi)
\end{align}
as desired.
(Note that $\mu_1$ comes as a sum of two pieces, one involving $D$ and
one involving $\Phi$. This happens because the gauge group acts
separately on the two and the symplectic form $\omega_1$ is a sum
of one piece involving $D$ and one involving $\Phi$. Moreover, if
we look only at the part involving $D$, then our computations
just reduce to those in \autoref{prop:unitary-connections-moment-map}.)
\end{pf}

\begin{exercise} The statement that the $\fG$ action on $\cA^H$ admits a moment map
implies in particular that the forms $\omega_i \in \Omega^2(\cA^H)$ are $\fG$-invariant.
Verify this invariance directly from the formulas defining $\omega_i$.
\end{exercise}

It is occasionally useful to write $\vec\mu$ in a more symmetric fashion,
without combining $\mu_2$ and $\mu_3$ into $\mu_2 + \I \mu_3$; for that
purpose the next exercise is helpful:

\begin{exercise} Show that
\begin{equation}
  \mu_2 = -D \star \Phi, \qquad \mu_3 = D \Phi.
\end{equation}
\end{exercise}

The vanishing of the \hk moment map, $\vec\mu = 0$, gives \ti{Hitchin's equations} \cite{MR89a:32021}:
\begin{subequations} \label{eq:hitchin-eq}
\begin{align}
\bar\partial_D \varphi &= 0, \\
F_D + [\varphi,\varphi^\dagger] &= -2 \pi \I \frac{d}{K} \bid \omega_C.
\end{align}
\end{subequations}
Solutions of these equations are important enough that we give them a name:
\begin{defn}[Harmonic pair]
A \ti{harmonic pair} on $E$ is a pair $(D,\varphi) \in \cA^H$
obeying Hitchin's equations \eqref{eq:hitchin-eq}.
\end{defn}

If $\varphi = 0$ then a harmonic pair $(D,\varphi)$ reduces to an
Einstein connection.

Thus the moduli space we are after, $\cA^H \hkq \fG = \vec\mu^{-1}(0) / \fG$,
is the space of harmonic pairs on $E$ modulo gauge equivalence.
As before, to study this \hk quotient,
we need to understand the extent to which
$\fG$ acts freely:

\begin{defn}[Irreducible Higgs pairs] A pair $(D,\varphi) \in \cA^H$
is called \ti{irreducible} if there exist no subbundles $E' \subset E$
which are preserved by both $D$ and $\varphi$. Let $\cA^{H,s} \subset \cA^H$
be the set of irreducible Higgs pairs.
\end{defn}

In parallel to \autoref{prop:gauge-group-almost-free-on-irreducible},
we have:
\begin{prop}[Gauge group acts almost freely on irreducible Higgs pairs]
If $g \in \fG$ and $(D,\varphi) \in \cA^{H,s}$, then
$(D^g,\varphi^g) = (D,\varphi)$
if and only if $g$ acts on $E$ by multiplication by a constant scalar.
\end{prop}
\begin{pf} This is essentially the same as the proof of
\autoref{prop:gauge-group-almost-free-on-irreducible}.
\end{pf}

Now finally we define:
\begin{defn}[Moduli space of harmonic pairs]
\begin{equation}
  \cM_{K,d}(C) = \cA^H \hkq \fG, \qquad \cM^s_{K,d}(C) = \cA^{H,s} \hkq \fG.
\end{equation}
\end{defn}

As we did with $\cN^s_{K,d}(C)$, we
first discuss the formal picture. The tangent space to
$\cM_{K,d}^s(C)$ at a given harmonic pair $(D,\varphi)$
should formally be the joint kernel of the
three linearized moment maps $\de \mu_i$, modulo the space spanned
by infinitesimal gauge transformations.
That is, we consider cohomology of the complex
\begin{equation}
  0 \to \Omega^0(\fu(E)) \to (\Omega^{1}(\fu(E)))^2 \to (\Omega^2(\fu(E)))^3 \to 0
\end{equation}
where the first arrow is
\begin{equation}
 Z \mapsto \rho(Z) = (\dot A = -D Z, \dot \Phi = [Z,\Phi])
\end{equation}
and the second is
\begin{equation}
(\dot A, \dot \Phi) \mapsto (D \dot{A} + [\Phi,\dot\Phi], -D \star \dot\Phi - [\dot A, \star\Phi], D \dot\Phi + [\dot A, \Phi]).
\end{equation}
As before, this is indeed a complex, when $(D,\varphi)$ is a harmonic
pair. Also as before, the \hk quotient construction dictates that
we should interpret the quotient by $\im \rho$
by taking the orthocomplement, \fixme{double-check signs and factors here!}
\begin{equation}
  (\im \rho)^\perp = \{D \star \dot{A} - [\star \Phi, \dot\Phi] = 0\} \subset \Omega^1(\fu(E))^{\oplus 2}.
\end{equation}
So altogether the tangent space we are after is the kernel of
the operator
\begin{align}
\hat{D}: \Omega^1(\fu(E))^{\oplus 2} &\to \Omega^2(\fu(E))^{\oplus 4} \\
(\dot A, \dot \Phi) &\mapsto \begin{pmatrix} D \dot{A} + [\Phi,\dot\Phi] \\ -D \star \dot\Phi - [\star \Phi, \dot A] \\ D \dot\Phi + [\Phi, \dot A] \\ D \star \dot{A} - [\star \Phi, \dot \Phi] \end{pmatrix}
\end{align}
Note that $\hat{D}$ is \ti{elliptic}, just as before:
the principal symbol is $2K^2$ copies of $\de \oplus \de^*$.
Thus, as before, elliptic theory in the sense of \autoref{sec:ellipticity}
says that when we
consider the extension $\hat{D}_k$ on the Banach spaces of $L^2_k$
Higgs pairs, $\hat{D}_k$ has a finite-dimensional
kernel, and that kernel consists of smooth sections.

Again as before, we have:
\begin{lem}[Almost-vanishing for the doubled gauge complex] If $(D,\varphi) \in \cA^s$, then $\coker \hat{D}$ is $4$-dimensional,
spanned by multiples of the identity in each summand
of $\Omega^2(\fu(E))^{\oplus 4}$.
\end{lem}

\begin{pf}
\fixme{...}
\end{pf}

\begin{thm}[$\cM^s_{K,d}(C)$ is \hk] $\cM^s_{K,d}(C)$ is a \hk manifold.
\end{thm}

\begin{pf}
\fixme{...}
\end{pf}

This already has the remarkable consequence that the metric
on $\cM^s_{K,d}(C)$ is Ricci-flat.

\begin{prop}[Dimension of $\cM^s_{K,d}(C)$] The quaternionic dimension
of $\cM_{K,d}^s(C)$ is $(g-1)K^2 + 1$.
\end{prop}
\begin{pf}
\fixme{...}
\end{pf}

\subsection{The twistor family, formally}

We have been studying the \hk space $\cA^H$, which in its complex
structure $I_1$ is identified with the space $\cA^\C_1$
of pairs $(\bar\partial_E, \varphi)$. Recall that modulo
questions of stability we have
\begin{equation}
  \cA^H \hkq \fG = \cA^\C_1 \kq \fG_\C,
\end{equation}
and the RHS at least formally
deserves the name ``moduli space of Higgs bundles.''

Note as usual that the complex description is simpler than the
unitary one --- to construct examples of Higgs bundles, we do not
have to solve the complicated PDE \eqref{eq:hitchin-eq}!

Now, since $\cA^H$ is \hk, it has plenty of other complex structures
$I_\zeta$. We may ask: do those too have simple descriptions?
Let us begin with structure $I_2$. Since $I_2$ acts by
$(\dot A, \dot \Phi) \mapsto (-\dot \Phi, \dot A)$
we see that the combination $\dot A + \I \dot \Phi$
is holomorphic.
Said otherwise, $\cA^\C_2$ is the space of all
(generally \ti{complex}, i.e. non-unitary)
connections in $E$, which we split into their unitary and self-adjoint parts
by writing
\begin{equation}
  \nabla_2 = D + \I \Phi.
\end{equation}
The action of $\fG$ on $\cA^\C_2$ takes
$\nabla_2 \to \nabla_2^g = g \nabla_2 g^{-1}$, i.e. it acts by
the standard action of gauge transformations on connections.
This action thus complexifies to the standard action of $\fG_\C$ by
\ti{complex} gauge transformations on $\nabla_2$.
(We emphasize that this is \ti{not} the same as the action
of $\fG_\C$ on $\cA^\C_1$
which we considered above. Indeed, a real group action on a \hk space
complexifies differently in each complex structure.)

The holomorphic moment
map for this action is
\begin{equation}
  M_2 = \mu_3 + \I \mu_1 = D \Phi + \I \left(-F_D + \Phi \wedge \Phi - 2 \pi \I \frac{d}{K} \bid \omega_C\right).
\end{equation}
This funny-looking combination has a nice interpretation:
the curvature of $\nabla_2$ is
\begin{equation}
  F_{\nabla_2} = F_D + \I D\Phi - \Phi \wedge \Phi,
\end{equation}
so the condition $M_2 = 0$ says that
\begin{equation}
  F_{\nabla_2} = - 2\pi \I \frac{d}{K} \bid \omega_C.
\end{equation}
When $d=0$ this says that $\nabla_2$ is a complex \ti{flat}
connection. More generally, $\nabla_2$ is a complex Einstein connection.

Summing up: modulo questions of stability, we have in complex
structure $I_2$
\begin{equation}
  \cA^H \hkq \fG = \cA_2^\C \kq \fG_\C,
\end{equation}
and the RHS deserves the name ``moduli space of complex Einstein connections.''
Thus we have the remarkable situation that the single \hk space
$\cM_{K,d}(C)$ has two very diffrent interpretations:
in one complex structure it is a moduli space of Higgs bundles,
in another it is a moduli space of complex Einstein connections.

What about structure $I_3$? In this structure we have a very similar
story, except that now the holomorphic combination is
$\dot A - \I \star \dot \Phi$, so the complex connection we consider is
\begin{equation}
  \nabla_3 = D + \I \star \Phi.
\end{equation}

\begin{exercise}
Check that the vanishing of the moment map $M_3 = \mu_1 + \I \mu_2$
implies that $\nabla_3$ is a complex Einstein connection.
\end{exercise}

In fact this is the tip of a bigger iceberg:
for any $\zeta \in \C^\times$ we can consider the connection
\begin{equation} \label{eq:nabla-zeta}
  \nabla_\zeta = \zeta^{-1} \varphi + D + \zeta \varphi^\dagger
\end{equation}

\begin{exercise}
Check that the full Hitchin equations \eqref{eq:hitchin-eq}
imply that $\nabla_\zeta$ is a complex Einstein connection,
for any $\zeta \in \C^\times$.
\end{exercise}

\begin{exercise}
Check that (again ignoring stability) we have,
in complex structure $I_\zeta$,
\begin{equation}
  \cA^H \hkq \fG = \cA_\zeta^\C \kq \fG_\C.
\end{equation}
\end{exercise}

So, ignoring stability, it seems that $\cM_{K,d}(C)$ can be identified with
a moduli space of complex Einstein connections
\ti{in many different ways}: indeed each
complex structure $I_\zeta$ gives such an identification.


\subsection{The case of Higgs line bundles}

\begin{example}[Moduli of degree zero Higgs line bundles]
Now let us see how this works in the concrete example $K=1$.

In this case things are particularly simple: $\End(E)$ is trivial,
so the Higgs field $\varphi \in \Omega^{1,0}(C)$,
and the brackets in the Hitchin equations \eqref{eq:hitchin-eq}
drop out, giving two decoupled equations:
\begin{subequations}
\begin{align}
  \bar\partial \varphi &= 0, \\
  F_D &= - 2\pi \I \frac{d}{K} \bid \omega_C.
\end{align}
\end{subequations}
Thus $\vec\mu^{-1}(0)$ just consists of pairs $(D,\varphi)$
where $D$ is an Einstein connection in
the line bundle $E$ and $\varphi$ is a holomorphic $1$-form on $C$.

Moreover the action of $\fG$ on $\varphi$ is trivial.
Thus, after taking the quotient by $\fG$ we just get
\begin{equation}
  \cM_{1,d}(C) = \cN_{1,d}(C) \times H^{1,0}(C).
\end{equation}
We can view this as a trivial holomorphic vector bundle over $\cN_{1,d}(C)$ whose
fiber is $H^{1,0}(C)$. Moreover this trivial bundle has another name:
\begin{equation}
  \cM_{1,d}(C) = T^* \cN_{1,d}(C).
\end{equation}

We have already analyzed $\cN_{1,d}(C)$ at some length: it is a compact
\kahler torus, which we described in various ways
in \autoref{sec:jacobians}.
What we have found here is that the cotangent bundle
to this torus is canonically \hk, and arises as the
simplest example of a moduli space of Higgs bundles.
\end{example}

\begin{example}[Moduli of degree zero Higgs line bundles over a torus]
When $C$ is a torus, and $d = 0$, all this becomes even
more concrete. Extending our description of $\Jac C$
from \autoref{exa:metric-on-jac-C-genus-one}, a general $(D,\Phi) \in \cM_{1,0}(C)$ is gauge equivalent to
\begin{align}
  D &= \de + \I \theta_A \de x + \I \theta_B \de y = \de + (2 \im \tau)^{-1} (\bar\alpha \de z - \alpha \de \bar{z}), \\
  \Phi &= a \de z - \bar{a} \de \bar{z},
\end{align}
where
\begin{equation}
  \alpha = \theta_B - \tau \theta_A.
\end{equation}
The coordinates $(\theta_A, \theta_B, \alpha)$ identify $\cM_{1,0}(C)$
with $U(1)^2 \times \C$.

This looks a lot like the situation of \autoref{exa:R2T2}: we are
considering a translation invariant \hk metric on $T^2 \times \R^2$.
In fact, it is \ti{exactly} the situation of \autoref{exa:R2T2}.
To see this, we can compute directly from \eqref{eq:symplectic-forms-higgs} and
\eqref{eq:Omega-1-AC}:
\begin{align}
  \omega_1 &= \de \theta_A \wedge \de \theta_B + 2 \I (\im \tau) \de a \wedge \de \bar{a}, \label{eq:symplectic-higgs-torus} \\
  \Omega_1 &= 2 \de \alpha \wedge \de a. \label{eq:holsymp-higgs-torus}
\end{align}
This indeed matches with \autoref{exa:R2T2}, when we identify
our coordinates $\theta_{A,B}$ with those in \eqref{eq:theta-R2T2},
and identify the functions
\begin{equation}
  Z_A = a, \qquad Z_B = \tau a,
\end{equation}
with the $Z_{A,B}$ in \eqref{eq:Z-R2T2}.

Now, we already studied the whole family of complex
structures $I_\zeta$ in \autoref{exa:R2T2}: for any
$\zeta \in \C^\times$, we have an identification
\begin{equation}
  (\cM_{1,0}(C), I_\zeta) \simeq \C^\times \times \C^\times
\end{equation}
given by the explicit functions
\begin{equation}
  \cX_{A,B} = \exp \left( \zeta^{-1} Z_{A,B} + \I \theta_{A,B} + \zeta \bar{Z}_{A,B} \right).
\end{equation}
These formulas have a simple interpretation.
$Z_{A,B}$ are the integrals of $\varphi = a \de z$
over the cycles $A,B$; similarly $\bar Z_{A,B}$ are
the integrals of $\varphi^\dagger$.
Thus, if we consider the connection $\nabla_\zeta$ given by
\eqref{eq:nabla-zeta}, its holonomy around the cycles
$A,B$ is $\cX_{A,B}$.

\end{example}

\begin{exercise} Verify \eqref{eq:symplectic-higgs-torus} and
\eqref{eq:holsymp-higgs-torus}.
\end{exercise}

% So everything hangs together: there are no issues of stability
% and we have canonically
% \begin{equation}
%   (\cM_{1,0}(C), I_\zeta) \simeq H^1(C, \C^\times)
% \end{equation}


\subsection{Stability for Higgs bundles and flat connections}

\begin{defn}[Stable Higgs bundle] A Higgs bundle $(E, \bar\partial_E, \varphi)$ over $C$ is called:
\begin{itemize}
\item \ti{stable} if, for every sub-Higgs bundle $E' \subset E$,
we have $\mu(E') < \mu(E)$,
\item \ti{polystable} if $E$ is a direct sum of stable Higgs bundles
of the same slope,
\item \ti{semistable} if, for every every $\varphi$-invariant
holomorphic subbundle
$E' \subset E$, we have $\mu(E') \le \mu(E)$.
\end{itemize}
\end{defn}
Note that the slope $\mu$ is defined just as it was for a holomorphic
vector bundle; the only role of the Higgs field is to restrict
the allowed subbundles.

There are a few Higgs bundles which we can describe particularly
concretely:

\begin{example}[Zero Higgs field] For any holomorphic vector
bundle $(E,\bar\partial)$ we obtain a trivial example of a Higgs bundle
by taking $(E,\bar\partial,\varphi=0)$. It is a stable Higgs bundle
if and only if $(E,\bar\partial)$ is stable.
\end{example}

\begin{example}[Higgs line bundles] If $K=1$ then a Higgs bundle
just means a holomorphic line bundle plus a holomorphic 1-form,
$\varphi \in H^0(K_C)$. This is always stable.
\end{example}

\begin{example}[``Hitchin section'' for $GL(2)$] \label{exa:hitchin-section-K2}
Fix a line bundle
$\cL$ on $C$.
Then consider the holomorphic vector
bundle
\begin{equation}
  E = \cL \otimes K_C \oplus \cL.
\end{equation}
For any $(\phi_1, \phi_2) \in H^0(K_C) \oplus H^0(K_C^2)$,
we can equip $E$ with the Higgs field
\begin{equation}
  \varphi = \begin{pmatrix} \phi_1 & \phi_2 \\ 1 & \phi_1 \end{pmatrix} \in \begin{pmatrix} \Hom(\cL \otimes K_C,\cL \otimes K_C) \otimes K_C & \Hom(\cL,\cL \otimes K_C) \otimes K_C \\ \Hom(\cL \otimes K_C,\cL) \otimes K_C & \Hom(\cL,\cL) \otimes K_C \end{pmatrix} = \begin{pmatrix} K_C & K_C^2 \\ \cO & K_C \end{pmatrix}
\end{equation}
and thus obtain a Higgs bundle.
\end{example}

\begin{exercise}
Show that the Higgs bundles in \autoref{exa:hitchin-section-K2} are stable
(\ti{despite} the fact that the underlying
vector bundle $E$ is unstable),
for any $(\phi_1,\phi_2)$,
as long as $C$ has genus $g \ge 2$.
\end{exercise}

For the next example we need a little bit of setup:

\begin{defn}[Spin structure] \label{defn:spin-structure} A \ti{spin structure} on $C$
is a holomorphic line bundle $\cL$ equipped with an isomorphism
$\cL^2 \simeq K_C$.
\end{defn}

\begin{exercise} Show that the set of spin structures on $C$ (up to
the natural notion of equivalence) is a torsor for $H^1(C,\Z/2\Z)$.
So in particular, there are $2^{2g}$ inequivalent
spin structures on a genus $g$ surface.
\end{exercise}

\begin{exercise} Show that
\autoref{defn:spin-structure} is equivalent
to your favorite definition of spin structure, if you have one.
\end{exercise}

\begin{example}[``Hitchin section'' for $SL(2)$] \label{exa:hitchin-section-SL2}
Fix a spin structure
$\cL$ on $C$.
Then consider the holomorphic vector
bundle
\begin{equation}
  E = \cL \oplus \cL^{-1}.
\end{equation}
For any $\phi_2 \in H^0(K_C^2)$,
we can equip $E$ with the Higgs field
\begin{equation}
  \varphi = \begin{pmatrix} 0 & \phi_2 \\ 1 & 0 \end{pmatrix} \in \begin{pmatrix} \Hom(\cL,\cL) \otimes K_C & \Hom(\cL^{-1},\cL) \otimes K_C \\ \Hom(\cL,\cL^{-1}) \otimes K_C & \Hom(\cL^{-1},\cL^{-1}) \otimes K_C \end{pmatrix} = \begin{pmatrix} K_C & K_C^2 \\ \cO & K_C \end{pmatrix}
\end{equation}
and thus obtain a Higgs bundle.
\end{example}



\begin{defn}[Reductive complex connections] A connection $D$ in $E$
is \ti{reductive} if, whenever $E' \subset E$ is $D$-invariant,
there is a decomposition $E = E' \oplus E''$ where $E''$ is
also $D$-invariant.
\end{defn}

(So ``reductive'' is the complex-connection analogue of ``polystable,''
in the same way as ``irreducible'' is the analogue of ``stable.''
Note that the phenomenon of non-reductivity
is peculiar to complex connections: for
unitary ones we could always take $E''$ to be the orthocomplement
of $E'$.)

\begin{exercise}
Suppse $\rho: \pi_1(C) \to GL(K,\C)$ is a representation for which all
$\rho(\wp)$ are upper-triangular matrices, at least one
of which is not diagonal.
Show that $\rho$ corresponds to a flat complex connection
which is not reductive.
\end{exercise}

\subsection{Gauge-theoretic meaning of stability}

Now let us consider the case of general ranks $K>1$. We would like
to compare $\cA^H \hkq \fG$ to $\cA_\zeta^\C \kq \fG_\C$.
The problem we face is familiar: for each complex structure $I_\zeta$
we have a complex moment map $M$ and a real moment map $\mu_\zeta$;
after restricting to the locus $M^{-1}(0)$,
we need to understand the intersection
between the $\fG_\C$ orbits and the locus $\mu_\zeta^{-1}(0)$.
This amounts to proving an analogue of \autoref{thm:narasimhan-seshadri}
in this doubled context. More precisely we need two such theorems,
one for $\zeta = 0$ and one for $\zeta \neq 0$:
these are \autoref{thm:polystable-higgs-bundles-harmonic}
and \autoref{thm:reductive-connection-harmonic} below.

\begin{thm}[Polystable Higgs bundles admit harmonic connections] \label{thm:polystable-higgs-bundles-harmonic}
We have:
\begin{itemize}
\item For any $[(D,\Phi)] \in \cM^s_{K,d}(C)$ the pair
$(\bar\partial_D,\varphi)$
induces the structure of \ti{stable} Higgs bundle on $E$.
Conversely, any stable Higgs bundle structure
on $E$ is equivalent to $(\bar\partial_D,\varphi)$ for a unique $[(D,\Phi)] \in \cM^s_{K,d}(C)$.
\item For any $[(D,\Phi)] \in \cM_{K,d}(C)$ the pair
$(\bar\partial_D,\varphi)$
induces the structure of \ti{polystable} Higgs bundle on $E$.
Conversely, any polystable Higgs bundle structure
on $E$ is equivalent to $(\bar\partial_D,\varphi)$ for a unique $[(D,\Phi)] \in \cM_{K,d}(C)$.
\end{itemize}
\end{thm}

\begin{pf} This is proven by analytic means, broadly similar to those
 in the proof of \autoref{thm:narasimhan-seshadri}. I will not
 try to treat it here. The case of $K=2$
 can be found in \cite{MR89a:32021}; for general $K$ see \cite{MR944577}.
\end{pf}

\begin{example}[Uniformization theorem via Higgs bundle] Fix a spin
structure $\cL$ on $C$. We consider the special case of
\autoref{exa:hitchin-section-SL2} with $\phi_2 = 0$:
\begin{equation}
  E = \cL \oplus \cL^{-1}, \qquad \varphi = \begin{pmatrix} 0 & 0 \\ 1 &0 \end{pmatrix}.
\end{equation}
According to \autoref{thm:polystable-higgs-bundles-harmonic}
there exists a harmonic pair in the $\fG_\C$-orbit of this
Higgs bundle, or equivalently, a Hermitian metric $h$ on $E$ such that
\begin{equation} \label{eq:hitchin-eq-redux}
  F_{D_h} + [\varphi, \varphi^{\dagger_h}] = 0.
\end{equation}
One can show \fixme{...} that
this metric is actually diagonal with respect to the decomposition of $E$:
we can write it
\begin{equation}
  h = \begin{pmatrix} g^{-\half} & 0 \\ 0 & g^\half \end{pmatrix}
\end{equation}
where $g$ is a metric on $TC$. Then in a local coordinate system,
\eqref{eq:hitchin-eq-redux} becomes
\begin{equation}
  -\half \bar\partial_{\bar z} \partial_z \log g_{z \bar{z}} + g_{z \bar{z}} = 0.
\end{equation}
This equation says that the metric $g$ has constant curvature
$-4$. So \autoref{thm:polystable-higgs-bundles-harmonic} applied to this
Higgs bundle implies the uniformization theorem.

Let us explore this example a bit further. The harmonic pair
$(D,\Phi)$ induces a flat connection
\begin{equation}
  \nabla = D + \I \Phi
\end{equation}
\fixme{...}

\end{example}


\begin{thm}[Reductive connections can be made harmonic] \label{thm:reductive-connection-harmonic}
Fix some $\zeta \in \C^\times$.
\begin{itemize}
\item For any $[(D,\Phi)] \in \cM^s_{K,d}(C)$ the complex Einstein
connection $\nabla = \zeta^{-1} \varphi + D + \zeta \varphi^\dagger$
is irreducible.
Conversely, any irreducible complex Einstein connection
$\nabla$ on $E$ arises
as $\nabla = \zeta^{-1} \varphi + D + \zeta \varphi^\dagger$
for a unique $[(D,\Phi)] \in \cM^s_{K,d}(C)$.
\item For any $[(D,\Phi)] \in \cM_{K,d}(C)$ the complex Einstein
connection $\nabla = \zeta^{-1} \varphi + D + \zeta \varphi^\dagger$
is reductive.
Conversely, any reductive complex Einstein connection
$\nabla$ on $E$ arises
as $\nabla = \zeta^{-1} \varphi + D + \zeta \varphi^\dagger$
for a unique $[(D,\Phi)] \in \cM_{K,d}(C)$.
\end{itemize}
\end{thm}

\begin{pf} This is also an analytic problem: see \cite{MR887285} for
the case $K=2$ and \cite{MR965220} more generally.
(More precisely, they prove it for $\zeta = 1$, but the extension
to $\zeta \in \C^\times$ should be straightforward.)
\end{pf}

\fixme{summarize the situation!}



\subsection{The Hitchin fibration}

\begin{defn}[Hitchin base] The \ti{Hitchin base} is the
complex vector space
\begin{equation}
  \cB = \cB_K(C) = \bigoplus_{i=1}^K H^0(C, K_C^{\otimes i}).
\end{equation}
\end{defn}

\begin{defn}[Hitchin fibration] The \ti{Hitchin fibration} is
the map
\begin{equation}
  \rho: \cM_{K,d}(C) \to \cB_K(C)
\end{equation}
defined as follows. Given $([D,\varphi]) \in \cM$
we consider the characteristic polynomial
\begin{equation}
  \det (\lambda - \varphi) = \lambda^K + \sum_{i=1}^K \phi_i \lambda^{K-i}.
\end{equation}
Then
\begin{equation}
  \rho([(D,\varphi)]) = (\phi_1, \phi_2, \dots, \phi_K) \in \cB.
\end{equation}
\end{defn}
\begin{defn}[Spectral curve] Given a point $\vec\phi \in \cB$
we define $\Sigma_{\vec\phi}$ to be the curve
\begin{equation} \label{eq:spectral-curve}
  \Sigma_{\vec\phi} = \{ \lambda^K + \sum_{i=1}^K \phi_i \lambda^{K-i} = 0 \} \subset T^* C.
\end{equation}
\end{defn}

\insfig{higgs-bundles-24}{0.8}

Abusing notation we also write
\begin{equation}
  \Sigma_{\varphi} = \Sigma_{\rho([D,\varphi])}.
\end{equation}
Then informally $\Sigma_\varphi \subset T^* C$ is a $K$-sheeted covering of $C$,
whose sheets over $z \in C$ are the $K$ eigenvalues $\lambda_i$
of $\varphi(z)$.

\begin{prop}[Hitchin fibration is $I_1$-holomorphic] The Hitchin fibration $\rho$
is holomorphic as a map $(\cM, I_1) \to \cB$.
\end{prop}

\begin{pf} \fixme{...}
\end{pf}

\subsection{The smooth locus}

There is a large domain inside of $\cB$ where the Hitchin
fibration is ``nice''. To describe it we consider the \ti{discriminant}
of the equation \eqref{eq:spectral-curve}.
This is a polynomial $\Delta_{\vec\phi}$ in the $\phi_i$,
with the property
\begin{equation} \label{eq:discriminant}
  \Delta = \prod_{i > j} (\lambda_i - \lambda_j)^2
\end{equation}
where $\lambda_i$ are the roots of \eqref{eq:spectral-curve}.
For example, if $K=2$
then \eqref{eq:spectral-curve} becomes
$\lambda^2 + \phi_1 \lambda + \phi_2 = 0$, which has discriminant
\begin{equation} \label{eq:discriminant-K2}
  \Delta_{\vec\phi} = \phi_1^2 - 4 \phi_2.
\end{equation}
Globally over $C$, \eqref{eq:discriminant-K2}
is a section of $K_C^{\otimes 2}$.
For general $K$, \eqref{eq:discriminant} implies that
$\Delta_{\vec\phi}$ is a section of $K_C^{\otimes K(K-1)}$.
The zeroes of $\Delta_{\vec\phi}$ are the places on $C$ where the
sheets $\lambda_i$ collide, i.e. they are the places where
the curve $\Sigma_{\vec\phi}$ is \ti{ramified} as a cover of $C$.

Let us explore a bit more closely what happens near the ramification
points.
The simplest behavior occurs at a \ti{simple} zero of $\Delta_{\vec\phi}$.
Indeed at such a zero the local behavior of \eqref{eq:spectral-curve}
is like that of the
equation $y^2 = z$, which has
two solutions $y = \pm \sqrt{z}$, colliding at the ramification point
$y=z=0$; note that the curve $y^2 = z$ is \ti{smooth} even at this point.
This motivates the following definition:

\begin{defn}[Smooth locus and discriminant locus]
Let $\Delta_{\vec\phi} \in H^0(C, K_C^{\otimes K(K-1)})$ denote the discriminant of the
equation \eqref{eq:spectral-curve}.
The \ti{smooth locus} $\cB' \subset \cB$ consists of all $\vec\phi$
for which $\Delta_{\vec\phi}$ has only simple zeroes.
The \ti{discriminant locus} is the complement of the smooth locus.
\end{defn}

\begin{exercise} Show that, if $\vec\phi \in \cB'$,
$\Sigma_{\vec\phi}$ is a smooth curve, which is a branched $K$-fold
cover of $C$, and all branch points have ramification index $2$.
\end{exercise}

% \begin{prop}[$\cM$ is a fiberwise compactification of $T^* \cN$]
% $\cM_{K,d}^s(C)$ is the fiberwise compactification of $T^* \cN_{K,d}^s(C)$
% with respect to the Hitchin fibration.
% \end{prop}

\begin{prop}[Generic spectral curves have $2K(K-1)(g-1)$ branch points
and genus $1 + K^2(g-1)$] \label{prop:generic-spectral-numerics}
If $\vec\phi \in \cB'$ then the covering $\Sigma_{\vec\phi} \to C$ has $n_b = 2K(K-1)(g-1)$ branch points
and has genus $1 + K^2(g-1)$.
\end{prop}
\begin{pf} To count the number of branch points,
use the fact that $\deg K_C = - \chi(C) = 2g-2$
(Gauss-Bonnet theorem)
and the discriminant $\Delta_{\vec\phi}$ is a holomorphic section of
$K_C^{K(K-1)}$, with only simple zeroes.

To get the genus, use the Riemann-Hurwitz formula which says
\begin{equation}
  \chi(\Sigma_{\vec \phi}) = K \chi(C) - n_b = K^2 \chi(C).
\end{equation}
\end{pf}

\begin{example}[Simplest spectral curves]
The simplest nontrivial case is the case $K=2$, $g=2$. In this case
\autoref{prop:generic-spectral-numerics} says the generic spectral curves have
genus $5$. Thus even in this simple case we are dealing with a somewhat
complicated family of curves.
\end{example}

\begin{prop}[Generic fibers of the Hitchin fibration are shifted Jacobians] \label{prop:hitchin-fibers-are-jacobians}
If $\vec\phi \in \cB'$, then
the fiber $\rho^{-1}(\vec\phi) \subset \cM_{K,d}(C)$
is the compact torus $\cN_{1,d'}(\Sigma_{\vec\phi})$
where
\begin{equation}
	d' = d - K(K-1)(g-1).
\end{equation}
This identification is holomorphic in structure $I_1$.
\end{prop}

\begin{pf} First we construct a map
\begin{equation}
  \pi^{-1}(\vec\phi) \to \cN_{1,d'}(\Sigma_{\vec\phi}).
\end{equation}
So, suppose given a Higgs bundle structure
$(\bar\partial_E,\varphi) \in \pi^{-1}(\vec\phi)$.
Then the spectral
curve $\Sigma_{\vec\phi}$ is given by the characteristic polynomial
of $\varphi$. Away from the branch locus
 $\pi^{-1}(\Delta_\varphi^{-1}(0)) \subset \Sigma_{\vec\phi}$, we can
define a holomorphic line bundle $\cL$ over $\Sigma_{\vec\phi}$ by
\begin{equation}
 \cL_\lambda = \ker(\varphi - \lambda) \subset \pi^* E.
\end{equation}
More simply put:
$\Sigma_{\vec\phi}$ consists of the \ti{eigenvalues} of $\varphi$,
and it carries a line bundle $\cL$ consisting of the \ti{eigenspaces}.

The tricky point is to extend
$\cL$ to a line bundle over the whole $\Sigma_{\vec\phi}$
including the branch locus.
If we are algebraically minded we can consider the
\ti{sheaf} $\ker(\varphi-\lambda)$ and verify directly that it is
locally free of rank $1$, thus it is the sheaf of sections of a
holomorphic line bundle. I will describe the same thing in a more
analytic language. For notational simplicity I consider the special case
where $K=2$. Then around a branch point
we can always find a local coordinate and gauge in which
\begin{equation}
   \varphi = \left[f(z) \bid + \begin{pmatrix} 0 & 1 \\ z & 0 \end{pmatrix}\right] \de z.
\end{equation}
Then $\Sigma_{\vec\phi}$ is locally
given by $\{y^2 = z\}$ (where $y$ is a local coordinate on $T^*C$, $\lambda = (y+f(z)) \, \de z$). $z = 0$ is a branch point.
The line bundle $\cL$ away from $y=0$ can be written as
\begin{equation}
  \cL_y = \left\langle   \begin{pmatrix} 1 \\ y  \end{pmatrix}
\right\rangle  \subset E_{y^2}
\end{equation}
and thus it extends just fine over the point $y=0$.

Finally we want to compute the degree of $\cL$.
For this we could use the Grothendieck-Riemann-Roch theorem,
but it will be useful to get it in a more hands-on way.
So, fix some connection $D$ in $E$.
By projection on the two eigenspaces, $D$ induces a new
connection $D^\parallel$ in $E$, defined away from the branch points.
Equivalently we can view $D^\parallel$ as a connection in $\cL$,
again away from the branch points. We have
\begin{equation}
   \Tr F_{D^\parallel} = \Tr F_D.
\end{equation}
It follows that
\begin{equation} \label{eq:degree-integrals-equal}
  \int_{\Sigma'} F_{D^\parallel} = \int_C \Tr F_D,
\end{equation}
where $\Sigma'$ is $\Sigma$ with the branch points deleted.
However, $D^\parallel$ does not extend
over the branch points, so we \ti{cannot} conclude
from \eqref{eq:degree-integrals-equal} that
$\deg E = \deg \cL$.

Let us see how to repair this difficulty.
For simplicity suppose that
$D$ is trivial in a neighborhood of each branch point,
in our local gauge above. Then the projected connection
has
\begin{equation}
 D^\parallel_y \begin{pmatrix} 1 \\ y \end{pmatrix} = \begin{pmatrix} 0 \\ 1 \end{pmatrix}^\parallel = \begin{pmatrix} 0 \\ 1 \end{pmatrix} + \frac{1}{2y} \begin{pmatrix} 1 \\ -y \end{pmatrix} = \frac{1}{2y} \begin{pmatrix} 1 \\ y \end{pmatrix}
\end{equation}
Thus, relative to the local trivialization of $\cL$ by the
vector $\begin{pmatrix} 1 \\ y \end{pmatrix}$, $D_y^\parallel$
is given by $\de + \frac{1}{2} \frac{\de y}{y}$.
In particular, its holonomy around the branch point $y=0$
is $-1$.
By modifying $D^\parallel$ in a small disc around $y=0$
we we obtain a connection which does extend over $y = 0$
and has $\int F = \half \oint \frac{\de y}{y} = \pi \I$ in that disc.
Make this modification at all of the $2K(K-1)(g-1)$ branch points,
to get a new connection $D'$ in $\cL$;
then \eqref{eq:degree-integrals-equal} is replaced by
\begin{equation}
\int_{\Sigma} F_{D'} = \int_C \Tr F_D + \pi \I K(K-1)(g-1)
\end{equation}
which gives the desired formula for $d'$.

The inverse map
\begin{equation}
\cN_{1,d'}(\Sigma_{\vec\phi}) \to \pi^{-1}(\vec\phi)
\end{equation}
is similar: given the line bundle $\cL$
over $\Sigma_{\vec\phi}$ we construct a Higgs bundle
away from the branch locus by pushforward, and construct
directly its extension over the branch locus.
\end{pf}

\begin{exercise} Verify the assertion above, that when $K=2$
and $\vec\phi \in \cB'$, around a branch point we can
always find a local coordinate and gauge in which
\begin{equation}
 \varphi = \left[f(z) \bid + \begin{pmatrix} 0 & 1 \\ z & 0 \end{pmatrix}\right] \de z.
\end{equation}
\end{exercise}

\begin{exercise} Extend the proof of \autoref{prop:hitchin-fibers-are-jacobians} to general $K$.
\end{exercise}


\subsection{The other fibers}

We have just explained that the generic fiber $\rho^{-1}(\vec\phi)$
of the Hitchin fibration $\rho$ is a compact complex torus,
the Jacobian of a smooth spectral curve $\Sigma_{\vec\phi}$.
The complex structures of these fibers
vary as the complex structure of $\Sigma_{\vec\phi}$ varies.

It remains to
understand the fibers lying over the discriminant locus.
These fibers are generally \ti{not} compact complex tori.
When $\Sigma_{\vec\phi}$ is reduced and connected,
$\rho^{-1}(\vec\phi)$ is the
\ti{compactified Jacobian} of $\Sigma_{\vec\phi}$;
see the Appendix of \cite{Melo2012} for a useful summary and
more precise statement.

The next two statements give at least a little information about
the general fibers: they are compact and nonempty.

\begin{prop}[Hitchin fibration is proper] The Hitchin fibration
is proper.
\end{prop}

\begin{pf}
This is proven in \cite{MR89a:32021} for $K=2$,
and in \cite{Wentworth2014} for general $K$,
by gauge-theoretic methods (using Uhlenbeck compactness).
Also see \cite{MR1085642} for a more algebraic
method.
% Suppose we have a sequence $(D_n, \Phi_n)$ of harmonic pairs,
% whose image in $\cB$ is bounded.
% Then using \eqref{eq:hitchin-eq} we show
% the $L^2$ norm of $F$ is also bounded, so that we can use
% \autoref{thm:uhlenbeck-weak} to get a subsequence where $D_n$ is
% convergent. Then if the $\Phi_n$ lie in a compact subset of $\cB$...
\end{pf}

\begin{prop}[Hitchin fibration is surjective] The Hitchin fibration
is surjective.
\end{prop}
\begin{pf}
To prove this it is sufficient to exhibit one point in each fiber.
For $K=2$, the Higgs bundles given in \autoref{exa:hitchin-section-K2}
will do the job.
For larger $K$ there is a similar construction \fixme{...}
\end{pf}

\subsection{The nilpotent cone}

The most interesting fiber is the
one over $0 \in \cB$:

\begin{defn}[Nilpotent cone] The \ti{nilpotent cone} is the fiber
$\rho^{-1}(0) \subset \cM_{K,d}(C)$.
\end{defn}

The nilpotent cone in particular contains $\cN_{K,d}(C)$ (polystable
bundles with zero Higgs field), but it contains more.

\begin{prop}[$\cM_{K,d}(C)$ deformation retracts to the nilpotent cone]
When $(K,d) = 1$ the nilpotent cone is a deformation
retract of $\cM_{K,d}(C)$.
\end{prop}

\begin{pf} \fixme{Hausel thesis} Consider the function $\mu: \cM_{K,d}(C) \to \R$ given by
\begin{equation} \label{eq:morse-function}
  \mu(D,\Phi) = \half \int_C \Tr (\Phi \wedge \star \Phi).
\end{equation}
$\mu$ is a proper
map \fixme{why?} with finitely many critical points
and an absolute minimum at $0$.
Moreover we have
\begin{align}
  \de \mu(\dot A, \dot \Phi) &= \int_C \Tr (\dot\Phi \wedge \star \Phi) \\
  &= \omega_1(X,(\dot A, \dot \Phi))
\end{align}
where $X$ is the vector field
\begin{equation}
  X = (\dot A = 0, \dot \Phi = -\star \Phi).
\end{equation}
Thus $\mu$ is a moment map generating (with respect to $\omega_1$)
an action of $U(1)$ on $\cM_{K,d}(C)$,
\begin{equation}
  (D,\varphi) \to (D,e^{\I \vartheta} \varphi).
\end{equation}
This action complexifies to an action of $\C^\times$, holomorphic
in structure $I_1$,
\begin{equation} \label{eq:dilation-action}
  (D,\varphi) \to (D,\lambda \varphi).
\end{equation}
The $\R^\times$ part of this action is the gradient flow of $\mu$.

The nilpotent cone can be characterized as the set of points
for which this $\C^\times$ action has limits both as $\lambda \to 0$
and as $\lambda \to \infty$.
Then results of Kirwan \fixme{...} give the desired retraction.

\end{pf}

\begin{exercise} Suppose $(X,\omega,I)$
is a \kahler manifold, with a function $\mu: X \to \R$
generating a vector field $Z$. Show that $IZ$ is the (Riemannian) gradient
of $\mu$.
\end{exercise}

\begin{exercise} Prove that the nilpotent cone is the set of points
for which the $\C^\times$ action \eqref{eq:dilation-action} has
limits both as $\lambda \to 0$
and as $\lambda \to \infty$.
\end{exercise}

\begin{exercise} Compute the function $\mu$ on $\cM_{1,d}(C)$
explicitly when $C$ is a torus, and describe its gradient flow.
\end{exercise}

But the nilpotent cone is also an incredibly singular
fiber from our point of view.
We will restrict our attention mainly to the ``boring'' smooth torus
fibers over $\cB'$.


\subsection{More formalities}

We can think of $\cM_{K,d}^s(C)$ as a kind of partial compactification
of $T^* \cN_{K,d}^s(C)$:
\begin{prop} $T^* \cN_{K,d}^s(C)$ is an open dense subset of
$\cM_{K,d}^s(C)$.
\end{prop}
\begin{pf} \fixme{...}
\end{pf}

Given the surjectivity of the Hitchin fibration
it is evidently hopeless to ask for either
$\cM^s_{K,d}(C)$ or $\cM_{K,d}(C)$ to be compact.
A partial substitute is provided by the next two facts:

\begin{exercise} Show that for
$(K,d) = 1$ there are no strictly polystable Higgs bundles, i.e.
\begin{equation}
 \cM_{K,d}(C) = \cM_{K,d}^s(C).
\end{equation}
\end{exercise}

\begin{prop}[Completeness of \hk metric on $\cM_{K,d}^s(C)$ when $(K,d)=1$] When $(K,d) = 1$ the \hk metric on $\cM_{K,d}^s(C)$ is complete.
\end{prop}
\begin{pf} A proof for $K=2$ can be found in \cite{MR89a:32021}.
\fixme{more generally?}
\end{pf}

\subsection{The integrable system}

\begin{prop}[$\cM$ is a complex integrable system]
The fibers of the Hitchin fibration over $\cB'$ have dimension equal to that
of the base $\cB$, and are Lagrangian with respect to $\Omega_1$.
\end{prop}

\begin{pf} The fiber over $\vec\phi \in \cB'$ is the Jacobian of the
smooth spectral curve $\Sigma_{\vec\phi}$, and thus its dimension
is the genus of $\Sigma_{\vec\phi}$, which we computed in
\autoref{prop:generic-spectral-numerics} as
\begin{equation}
  g_{\Sigma} = 1 + K^2(g-1).
\end{equation}
This is half the dimension of $\cM_{K,d}(C)$.
Since the fiber dimension and base dimension add to the full dimension,
we get that the two are equal.

Next how do we see that the fibers are Lagrangian?
Fix some $n$ with $1 \le n \le K$ and some
$\alpha \in \Omega^{0,1}(C,K^{-n+1})$, and consider the function
\begin{equation} \label{eq:f-alpha}
  f_\alpha = \int_C \alpha \Tr(\varphi^n)
\end{equation}
Then we have
\begin{align}
 \de f_\alpha(\dot A, \dot \Phi) &= \int_C \alpha \Tr(\dot\varphi \varphi^{n-1}) = 2 \I \int_C \Tr\left(\dot\varphi \cdot -\frac{\I}{2} \alpha \varphi^{n-1} \right) \\
 &= \Omega_1\left((\dot{A}_{\bar z} = -\frac{\I}{2} \alpha \varphi^{n-1}, \dot\varphi = 0),(\dot A, \dot \Phi)\right)
\end{align}
Said otherwise, up to $\fG_\C$ action we have
\begin{equation}
  \Omega_1^{-1} (\de f_\alpha) = \left(\dot{A}_{\bar z} = -\frac{\I}{2} \alpha \varphi^{n-1}, \dot\varphi = 0\right).
\end{equation}
In particular, the vector fields $v_\alpha = \Omega_1^{-1}(\de f_\alpha)$
obtained in this way are all tangent to the fiber (since they all have
$\dot\varphi = 0$) and all have $\Omega_1(v_\alpha, v_\beta) = 0$ (for
the same reason).

Finally note that the $\de f_\alpha$ span $T^* \cB$: indeed
\eqref{eq:f-alpha} is a nondegenerate pairing between $H^0(C,K^n)$ and
$\cH^{0,1}(K^{-n+1})$, so choosing enough
$\alpha$'s, the $f_\alpha$ give a global coordinate system on
$\cB$. Using this and the nondegeneracy of $\Omega_1$
we get dually that the $v_\alpha$ span the tangent space to the
fiber. Thus we conclude that $\Omega_1 = 0$ when restricted to the fiber, as
desired.
\end{pf}

\begin{exercise} Use the Riemann-Roch formula and Kodaira vanishing
to verify directly that the complex dimension of $\cB$ is $K^2(g-1)+1$.
% (We could also compute directly the dimension of $\cB$ as a check:
% it is $\sum_{i=1}^K h^0(K_C^{\otimes i}) = \sum_{i=1}^K (g-1)(2i-1)+\delta_{i,1} = K^2(g-1)+1$ as desired.)
\end{exercise}


\section{Metric formulas}

In this section we will
describe the proposal of \cite{Gaiotto:2008cd,Gaiotto:2009hg,Gaiotto2012}, which is aimed at describing the
\hk metric on $\cM_{K,d}(C)$ in a concrete way.


\subsection{The semiflat picture}

We first describe a certain simple, explicit \hk metric, which is expected
to be very close to the true \hk metric ``near the ends'' of
$\cM_{K,d}(C)$, i.e. when we go out along a generic path to $\infty$.

Over the smooth locus $\cB'$ we have a local system of lattices
$$\Gamma_{\vec \phi} = H_1(\Sigma_{\vec \phi},\Z)$$
with a canonical function
$$ Z: \Gamma \to \C $$
given by
$$ Z_\gamma = \oint_\gamma \lambda $$
(with $\lambda$ the tautological $1$-form on $T^* C$)
and equipped with the intersection pairing
$$ \IP{\cdot,\cdot}: \Gamma \times \Gamma \to \Z. $$
By Poincare duality this pairing induces an isomorphism
$\Gamma \simarrow \Gamma^*$. Thus we also get a dual pairing
$$ \DIP{\cdot,\cdot}: \Gamma^* \times \Gamma^* \to \Z. $$

Writing $\Gamma^*_\C = \Gamma^* \otimes_\Z \C$,
the dual pairing induces a \ti{symmetric} pairing
$$ \DIP{\cdot \wedge \cdot}: \Omega^1(\Gamma^*_\C) \times \Omega^1(\Gamma^*_\C) \to \Omega^2(\Gamma^*_\C). $$

Let $\cM' = \rho^{-1}(\cB') \subset \cM$.
We want to write coordinate formulas for the \hk metric over $\cM'$.
There is an awkward point: the smooth torus fibers are
not canonically trivialized, because of the
degree $d' = d - K(K-1)(g-1) \neq 0$. In particular it is not immediately obvious
how to identify nearby torus fibers, which we certainly need to do if
we want to erect a coordinate system.

We know how to deal with this problem
in certain special cases. One particularly
interesting case is
\begin{equation}
d = -K(g-1) = \half \chi(C).
\end{equation}
So now we specialize to that case.
% Said otherwise, this is the case where $E \otimes K_C^{1/2}$
% has degree $0$.
Then $d' = -K^2(g-1) = \half \chi(\Sigma)$. This is not $0$ but it is
``almost as good,'' in the following sense.
Suppose we choose a spin structure
$K_{\Sigma_{\vec\phi}}^{1/2}$ on some $\Sigma_{\vec \phi}$.
This also induces
spin structures on nearby $\Sigma_{\vec \phi}$,
with $\vec\phi$ lying in a contractible neighborhood $U \subset \cB'$.
By tensoring with $K_{\Sigma_{\vec \phi}}^{1/2}$ we can identify
the torus fibers over $U$
with $\Jac \Sigma_{\vec \phi} = \Hom(H_1(\Sigma_{\vec \phi},\Z),U(1))$.
Thus we have evaluation maps
$$ \theta_\gamma: \rho^{-1}(U) \to \R / 2 \pi \Z. $$
These are angular coordinates on the torus fibers.

Fortunately, the dependence on the choice of spin structure is mild:

\begin{exercise} Verify that changing the choice of spin structure
on $\Sigma_{\vec \phi}$
shifts the coordinate functions $\theta_\gamma$ by constants (indeed integer
multiples of $\pi$.)
\end{exercise}

In particular, despite this ambiguity,
the 1-form $\de \theta \in \Omega^1(\Gamma^*_\R)$
is canonically and globally defined.

% where $\alpha_\gamma \in \cH^1(\Sigma_{\vec\phi})$
% is dual to the cycle $\gamma$,
% i.e.
% \begin{equation}
%   \oint_{\mu} \alpha_\gamma = \IP{\mu,\gamma}.
% \end{equation}
% \end{exercise}

To construct our approximate \hk metric on $\cM_{K,d}(C)$ we need some
warmups.

\begin{prop}[Positivity of semiflat $2$-forms] \label{prop:polarization}
The $2$-form $\DIP{\de \theta \wedge \de \theta}$ is a positive
form on each torus fiber $\rho^{-1}(\vec\phi)$, $\vec\phi \in \cB'$.
The $2$-form $-\DIP{\de Z \wedge \de \bar{Z}}$ is positive on
$\cB'$.
\end{prop}
\begin{pf} \fixme{...}
\end{pf}

\begin{prop}[``Griffiths transversality'' for spectral curves] \label{prop:transversality}
The 1-form $\de Z \in \Omega^1(\Gamma^*_\C)$ obeys
\begin{equation}
  \DIP{\de Z \wedge \de Z} = 0.
\end{equation}
\end{prop}

\begin{pf} A tangent vector $v$ to $\cB$
induces a holomorphic section $s_v$ of the
normal bundle $N(\Sigma_{\vec \phi})$. The variation
$$\de Z_\gamma(v) = \oint_\gamma \iota_{s_v} \Omega$$
where $\Omega = \de \lambda$ is the holomorphic symplectic
form on $T^* C$.

Now there is the ``Riemann bilinear identity'' for closed $1$-forms
on $\Sigma_{\vec \phi}$, which says that wedge product in de Rham cohomology
is dual to intersection in homology, i.e.
$$ \DIP{\alpha,\beta} = \int_{\Sigma_{\vec\phi}} \alpha \wedge \beta
$$
where on the left we view $\alpha, \beta$ as elements
in $\Gamma^*_\C$ by integration.

In our case what we have shown above is that $\de Z \in \Gamma^*_\C$ corresponds
to the $1$-form $\iota_{s_v}\Omega$.
Thus we get
$$ \DIP{\de Z(v), \de Z(v')} = \int_{\Sigma_{\vec\phi}} \iota_{s_v} \Omega \wedge \iota_{s_{v'}} \Omega$$
which vanishes for degree reasons.
\end{pf}

\begin{exercise} Interpret \autoref{prop:transversality}
as saying that $Z$ locally embeds $\cB$ as a complex Lagrangian submanifold
of a complex symplectic vector space.
\end{exercise}

Now we are ready to define an approximate version of the \hk
metric on $\cM_{K,d}(C)$. Still working on the patch $U$,
let $\Gamma_U$ denote the lattice of global sections of $\Gamma$
over $U$; then for $\gamma \in \Gamma_U$ introduce a function
\begin{equation}
	\cX_\gamma^\sf: \rho^{-1}(U) \times \C^\times \to \C^\times
\end{equation}
by
\begin{equation} \label{eq:X-sf}
	\cX_\gamma^\sf(\zeta) = \exp \left(\zeta^{-1} Z_\gamma + \I \theta_\gamma + \zeta \bar{Z}_\gamma \right).
\end{equation}
Also introduce a complex $2$-form
\begin{equation} \label{eq:omegazeta-sf}
	  \Omega^\sf(\zeta) = \I \DIP{\de \log \cX(\zeta), \de \log \cX(\zeta)}.
\end{equation}
While the functions $\cX_\gamma^\sf$ depended on the patch $U$,
the form $\Omega^\sf(\zeta)$ does not: it is global on $\cM'$
(though it does not have any reason to extend to the singular fibers!)

Now we are in a situation very close to that of \autoref{exa:semiflat-1d-general},
with the difference that $\Gamma$ now has rank $2n$ instead of $2$,
and we have introduced an additional global ``twisting'' from the
local choices of spin structures.

\begin{prop}[Semiflat \hk metric on $\cM'$ exists] There exists a \hk
metric on $\cM'$ for which the holomorphic symplectic form is
$\Omega^\sf(\zeta)$.
\end{prop}

\begin{pf}
Expanding $\Omega^\sf(\zeta)$ directly from \eqref{eq:omegazeta-sf} gives
\begin{multline}
  \Omega(\zeta) = \\ \I \zeta^{-2} \DIP{\de Z \wedge \de Z} - \zeta^{-1} \DIP{\de Z \wedge \de \theta} + \I \DIP{\de Z \wedge \de \bar{Z}} - \I \DIP{\de \theta \wedge \de \theta} - \zeta \DIP{\de \bar{Z} \wedge \de \theta} + \I \zeta^2 \DIP{\de \bar{Z} \wedge \de \bar{Z}}.
\end{multline}
Fortunately, \autoref{prop:transversality} says that the terms
at order $\zeta^2$ and $\zeta^{-2}$ vanish, so that we get
\begin{equation}
  \Omega(\zeta) = - \zeta^{-1} \DIP{\de Z\wedge \de \theta} + \I \DIP{\de Z\wedge \de \bar{Z}} - \I \DIP{\de \theta\wedge \de \theta} - \zeta \DIP{\de \bar{Z} \wedge \de \theta},
\end{equation}
which using \eqref{eq:hol-symp-family} gives the candidate symplectic forms
\begin{equation}
  \Omega_1 = -2 \DIP{\de Z \wedge \de \theta}, \qquad \omega_1 = - \DIP{\de Z \wedge \de \bar{Z}} + \DIP{\de \theta \wedge \de \theta}.
\end{equation}
Then the same arguments as in \autoref{exc:semiflat-1d-hk}
show that these forms actually come from a \hk structure.
\end{pf}

A useful way of thinking of the $\cX_\gamma$ is that they are the components
of a single map
\begin{equation}
   \cX: U \times \C^\times \to T_U = \Hom(\Gamma_U, \C^\times)
\end{equation}
In other words: suppose we fix a point $(D,\Phi) \in \cM_{K,d}(C)$.
We know that $(D,\Phi)$ corresponds to a family of flat $GL(K,\C)$-connections
in the bundle $E \otimes K_C^{1/2}$. Now we are assigning to it
instead a family of flat $\C^\times$-connections
$\cX(\zeta)$ over a spectral curve $\Sigma_{\vec\phi}$.

Indeed there is a natural candidate way of doing this.
The Higgs bundle $(\bar\partial_E,\varphi)$ has a corresponding
spectral line bundle $\cL$ over $\Sigma_{\vec\phi}$, as
in \autoref{prop:hitchin-fibers-are-jacobians}. We consider
the line bundle $(\cL \otimes K^{1/2}_{\Sigma_{\vec\phi}}, \lambda)$
as a Higgs bundle. Then it has a corresponding family of flat
$\C^\times$-connections over $\Sigma_{\vec\phi}$. This is $\cX^\sf$.

\begin{exercise} Check that $\cX^\sf$ is indeed obtained by the above
procedure.
\end{exercise}

However, the functions $\cX_\gamma^\sf$ are \ti{not} generally holomorphic
on $(\cM_{K,d}(C), I_\zeta)$.
This corresponds to saying that the
passage from the flat $GL(K,\C)$-connections
$\nabla(\zeta)$ over $C$ to the flat $GL(1,\C)$-connections
$\cX^\sf(\zeta)$ over $\Sigma$ is not a holomorphic map
between moduli spaces of flat connections.
Our next aim is to improve the functions
$\cX_\gamma^\sf$ to true holomorphic Darboux
coordinates $\cX_\gamma$.


\subsection{Metric comparison}

One of the main claims of \cite{Gaiotto:2008cd} is that
the actual metric $g$ on $\cM_{K,d}(C)$ differs
from the semiflat metric $g^\sf$ by a correction term
which is ``small on the smooth locus.'' A crude version of the
estimate is to say that along any path $p(t) \in \cM$
parameterized by $t \in \R_+$, with
$\rho(p(t)) = t \vec\phi$, we should have
\begin{equation} \label{eq:metric-estimate}
  g = g^\sf + O(\e^{-2 t M({\vec\phi})})
\end{equation}
where
\begin{equation}
  M({\vec\phi}) = \min\{\abs{Z_\gamma}: \gamma \in \Gamma_{\vec\phi} \}.
\end{equation}

One approach to proving this kind of formula
is to make a careful study of the asymptotic
behavior of the corresponding harmonic pairs $(D,\Phi)$.
See \cite{Mazzeo2014} for this.



\subsection{Twistorial construction, first steps}

Here we follow an approach closer to the philosophy of
\cite{Gaiotto:2008cd}. The idea is to produce holomorphic functions
$\cX_\gamma(\zeta)$ on $\cM_{K,d}(C)$ which are Darboux coordinates for
$\Omega(\zeta)$ and which are also exponentially close
to the simple functions $\cX_\gamma^\sf(\zeta)$
of \eqref{eq:X-sf}. If we could do this completely rigorously
it would establish the desired metric estimate
\eqref{eq:metric-estimate}, as well as various sharper
statements.
Along the way we will discover various
extra interesting bits of structure.

\fixme{motivation for this picture from Stokes phenomena of
irregular ODE}


A key lemma motivating our constructions is:

\begin{lem}[Uniqueness of solutions to Riemann-Hilbert problems] \label{lem:rh-uniqueness}
Suppose $G$ is a complex Lie group, equipped with two antiholomorphic
involutions $R$ and $\rho$, with fixed loci $G_R, G_\rho \subset G$,
and $G_R \cap G_\rho = \{1\}$.
Fix a countable collection of rays $L = \{\ell_\mu\}_{\mu \in \Lambda}$
running from $0$ to $\infty$ in $\C^\times$,
and corresponding elements $S_\mu \in G$.
Also fix a holomorphic map $\cX^\sf: \C^\times \to G$,
obeying the ``reality'' condition
\begin{equation} \label{eq:Xsf-reality}
  \cX^\sf(-1/\bar\zeta) = \rho \cX^\sf(\zeta).
\end{equation}
Then there exists at most one map
$$ \cX: \C^\times \to G $$
with the properties:
\begin{itemize}
\item As $\zeta \to 0$ or $\zeta \to \infty$, $\cX(\zeta) \cX^\sf(\zeta)^{-1}$ has a finite limit lying in $G_R$.
(In other words, near $\zeta = 0$ we have $\cX(\zeta) = F(\zeta) \cX^\sf(\zeta)$, where $F(0) \in G_R$, and similarly near $\zeta = \infty$.)
\item $\cX$ obeys the ``reality'' condition
\begin{equation} \label{eq:X-reality}
  \cX(-1/\bar\zeta) = \rho \cX(\zeta).
\end{equation}
\item On the ray $\ell_\mu$, the limits of $\cX$ from both sides
exist, and are related by
\begin{equation}
  \cX^+_\mu = \cX^-_\mu S_\mu.
\end{equation}
\end{itemize}

\end{lem}

\begin{pf} Suppose $\cX$ and $\cX'$ obey all of these conditions.
Then we consider the composite
\begin{equation}
  Y: \C^\times \to G, \qquad Y(\zeta) = \cX'(\zeta)\cX(\zeta)^{-1}.
\end{equation}
The jumps $S_\mu$ cancel out in $Y$, so $Y$ is continuous
everywhere, and analytic away from the collection of rays $\ell_\mu$.
It follows using Morera's theorem that $Y$ is analytic
everywhere in $\C^\times$. \fixme{even if the $\ell_\mu$ are dense?}
Moreover our asymptotic condition says $Y$ is finite
and $G_R$-valued in the limits
$\zeta \to 0$ or $\zeta \to \infty$; but then the Riemann removable
singularity theorem says that $Y$ is analytic on the whole
$\C\PP^1$, and then Liouville's theorem says
$Y(\zeta)$ is a $\zeta$-independent element of $G_R$. Finally
the reality condition \eqref{eq:X-reality} implies $Y$
also belongs to $G_\rho$. So we conclude that $Y = 1$.
\end{pf}

\begin{example}[Riemann-Hilbert problems for $G = GL(N)$]
\fixme{...} \fixme{cite Dubrovin, Cecotti-Vafa}
\end{example}

Before applying this to our situation we
need one technical bit of preparation:
\begin{defn}[Quadratic refinement of mod 2 pairing] Suppose given a lattice $\Gamma$
with a bilinear pairing $\varepsilon: \Gamma \times \Gamma \to \Z / 2 \Z$. A \ti{quadratic refinement}
of $\varepsilon$ is a map $\sigma: \Gamma \to \Z / 2\Z$ such that
\begin{equation}
	\sigma(\gamma + \gamma') = \sigma(\gamma) \sigma(\gamma') \varepsilon(\gamma,\gamma').
\end{equation}
\end{defn}

\begin{prop}[Spin structures on $\Sigma$ are quadratic refinements on $H_1(\Sigma,\Z)$]
Suppose $\Sigma$ is any compact surface.
There is a canonical bijection between equivalence classes of
spin structures on $\Sigma$ and quadratic refinements of the pairing
$\varepsilon(\gamma,\gamma') = (-1)^{\IP{\gamma,\gamma'}}$ on $H_1(\Sigma,\Z)$.
\end{prop}
\begin{pf}
This is proven in \cite{MR588283}. (The construction is completely
topological.) \fixme{briefly explain it here?}
\end{pf}

We would like to apply \autoref{lem:rh-uniqueness} in the following
situation. Fix a point $\vec\phi \in \cB$ and a spin structure
on $\Sigma_{\vec\phi}$. Then we have
a lattice $\Gamma = \Gamma_{\vec\phi}$ with:
\begin{itemize}
	\item a skew pairing $\IP{\cdot,\cdot}: \Gamma \times \Gamma \to \Z$,
	\item a homomorphism $Z: \Gamma \to \C$,
  \item a quadratic refinement $\sigma$ of the
  pairing $\varepsilon(\gamma,\gamma') = (-1)^{\IP{\gamma,\gamma'}}$ on $\Gamma$.
\end{itemize}

Let $T$ be the torus
\begin{equation}
  T = \Hom(\Gamma, \C^\times),
\end{equation}
and $G$ the group of birational automorphisms of $T$.
(One awkward point is that I do not know whether $G$ can be thought
of as an infinite-dimensional complex Lie group in any
reasonable sense; thus it is not clear
whether \autoref{lem:rh-uniqueness} can really be applied.
Let us proceed optimistically nonetheless!)

Let $R$ be conjugation by the map $T \to T$ given by
$z \mapsto \bar{z}$ on $\C^\times$, and similarly
$\rho$ be conjugation by the map
$T \to T$ given by $z \mapsto \bar{z}^{-1}$ on $\C^\times$.
Define
\begin{equation}
\cX^\sf: \C^\times \to G
\end{equation}
by
\begin{equation}
\cX^\sf(\zeta) = \exp(\zeta^{-1} Z + \zeta \bar{Z}) \in T \subset G.
\end{equation}

\begin{exercise} Check that $\cX^\sf$ obeys the reality condition
\eqref{eq:Xsf-reality}.
\end{exercise}

Finally, for each $\mu \in \Gamma$ primitive, let
$$\ell_\mu = \{ \zeta: Z_\mu / \zeta \in \R_- \} \subset \C^\times. $$
Assume for a moment that the $\ell_\mu$
are all distinct.
In this case, we are going to define one more bit of data:
\begin{itemize}
  \item a map (not homomorphism) $DT: \Gamma \to \Z$.
\end{itemize}
Then we will let $S_\mu \in G$ be the birational map
\begin{equation} \label{eq:ks-jump}
  X_\gamma \to X_\gamma \prod_{n \ge 1} (1 - \sigma(n\mu) X_{n\mu})^{n \IP{\gamma,\mu} DT(n\mu)}.
\end{equation}
(In the case we consider below, this product is actually finite,
so we do not have to worry about issues of convergence.)

\begin{exercise} Show that $S_\mu$ is a birational symplectomorphism,
with respect to the natural symplectic structure on $T$ induced by
the bilinear form $\IP{\cdot,\cdot}$ on $\Gamma$.
\end{exercise}

We should also remark that the name $DT$ is meant to
evoke ``Donaldson-Thomas,'' and indeed the invariants
appearing here are expected to be
examples of generalized Donaldson-Thomas invariants.
In this context the maps \eqref{eq:ks-jump} appeared
in the very important paper \cite{ks1}, and understanding
their appearance was one of the original motivations
for the picture of $\cM$ we are describing here.



\subsection{Trajectories of quadratic differentials}

The definition of $DT$ is easiest to understand in the
case $K=2$, so let us consider that case first.
The construction we will describe is closely related to one
which appeared in the physics literature, first in \cite{Klemm:1996bj}.
It was later described in \cite{Gaiotto:2009hg} where the application
to the Hitchin system appeared.
% Also, the invariants
% we define here really \ti{are} generalized Donaldson-Thomas
% invariants; this is shown in \cite{bridgelandsmith}.

Fix a point $\vec\phi = (\phi_1, \phi_2) \in \cB'$.
Most of what we say in this section is about the discriminant
\begin{equation}
\Delta = \phi_1^2	- 4 \phi_2.
\end{equation}
$\Delta$ is a holomorphic quadratic differential on $C$.

Recall that the two sheets of $\Sigma_{\vec\phi}$ are given by
(locally, in any domain where we can choose a single-valued $\sqrt{\Delta}$)
\begin{equation}
	\lambda_{\pm} = \half (-\phi_1 \pm \sqrt{\Delta})
\end{equation}
and in particular their difference is
\begin{equation}
	\lambda_+ - \lambda_- = \sqrt{\Delta}.
\end{equation}

\begin{defn}[$\vartheta$-trajectories of a quadratic differential]
A \ti{$\vartheta$-trajectory} of $\Delta$ is a connected
real $1$-manifold $p$ on $C$
such that $e^{- \I \vartheta} \sqrt \Delta$ (with either choice of sign
for $\sqrt{\Delta}$) is a
\ti{real} and nowhere vanishing form on $p$.
Call a $\vartheta$-trajectory \ti{maximal} if
it is not properly contained in any other.
\end{defn}

Because of the sign ambiguity of $\sqrt{\Delta}$, there is no canonical
way of orienting $\vartheta$-trajectories. However, once we pass to the
double cover, we do get an orientation:

\begin{defn}[Orientation of lifted $\vartheta$-trajectories]
Given a $\vartheta$-trajectory $p$, its lift $\tilde{p} = \pi^{-1}(p)$
to $\Sigma_{\vec\phi}$ is canonically oriented. Indeed,
the two sheets of $\Sigma_{\vec\phi}$
correspond canonically to the two choices of $\sqrt{\Delta}$.
Thus we can orient $\tilde{p}$ by the condition that
in the positive direction, $e^{-\I \vartheta} \sqrt{\Delta}$
is positive.
\end{defn}

Note that changing $\vartheta \to \vartheta+\pi$ preserves
the notion of $\vartheta$-trajectory but reverses the
orientation of the lifts.

\insfig{higgs-bundles-17}{0.8}


Let $C' = \{z: \Delta(z) \neq 0\} \subset C$.

\begin{prop}[$\vartheta$-trajectories give a foliation] The
$\vartheta$-trajectories are the leaves of a foliation of $C'$.
\end{prop}
\begin{pf} Around any $z_0 \in C'$ we consider a local coordinate
$w$ given by $w(z) = \int^z_{z_0} \sqrt{\Delta}$. Then
we have $\Delta = \de w^2$. Thus in the coordinate $w$,
$\vartheta$-trajectories are just straight segments
of inclination angle $\vartheta$.
\end{pf}

\begin{prop}[Local singularities of the foliation by $\vartheta$-trajectories] Around each zero of $\Delta$, the foliation
by $\vartheta$-trajectories has a three-pronged singularity,
as shown below.
\insfig{higgs-bundles-18}{0.8}

\end{prop}
\begin{pf} In a neighborhood of a zero of $\Delta$, we may choose a
local coordinate such that $\Delta = z\,\de z^2$, using our assumption that
all zeroes of $\Delta$ are simple.
% (Perhaps this is not really necessary: we could
% just make a linear change of coordinate, to arrange that the first-order term in the Taylor
% expansion of $\Delta$ is $z \, \de z^2$, and then take a small enough disc that
% we can neglect the deviation. But since we can get $z \, \de z^2$
% on the nose, we might as well.)

Then in any simply connected domain away from $z=0$ we have
$w = \int \sqrt{\Delta} = \frac23 z^{\frac32}$. In particular,
each of the three domains
\begin{equation}
\frac23 (\vartheta + n\pi) < \arg z < \frac23 (\vartheta + (n+1)\pi),	\qquad n=0,1,2,
\end{equation}
is mapped by $w$ to a half-plane,
whose boundary is the line through $0$ of inclination $\vartheta$.
This gives the picture shown.
\end{pf}

\begin{exercise} Show that in a neighborhood of a zero of $\Delta$, we may choose a
local coordinate $z$ such that $\Delta = z\,\de z^2$.
\end{exercise}

\begin{exercise} Suppose we consider a quadratic differential $\Delta$
which is allowed to have higher-order zeroes. What is the behavior of
the foliation by $\vartheta$-trajectories around such a zero?
\end{exercise}

Thus in the foliation by $\vartheta$-trajectories, there are finitely
many special leaves, namely those which are asymptotic in one or
both directions to zeroes of $\Delta$.

\begin{defn}[Forward and backward asymptotics of trajectories]
Given a maximal $\vartheta$-trajectory $p$ with a chosen orientation,
we say $p$ is \ti{forward asymptotic} (resp. \ti{backward asymptotic}) to $z$ if, choosing any oriented parameterization of $p$,
we have $\lim_{t \to \infty} p(t) = z$ (resp. $\lim_{t \to -\infty} p(t) = z$).
\end{defn}

\begin{defn}[Critical trajectories] A maximal $\vartheta$-trajectory
is called \ti{critical} if it admits an orientation for which
it is backward asymptotic to a zero of $\Delta$.
The \ti{$\vartheta$-critical graph} is the union of the critical trajectories and the
zeroes of $\Delta$.
\end{defn}

Critical trajectories which are also \ti{forward} asymptotic
to zeroes of $\Delta$ are particularly special:

\begin{defn}[Saddle connections]
A \ti{$\vartheta$-saddle connection} is a maximal
$\vartheta$-trajectory $p$
such that $\bar p \setminus p$ consists of two points of $C$.
\end{defn}

\insfig{higgs-bundles-19}{0.8}

\begin{defn}[Charge of a saddle connection]
If $p$ is a saddle connection, then the closure of $\tilde p$
is an oriented loop on $\Sigma_{\vec \phi}$; the \ti{charge of $p$}
is the class of this loop in $\Gamma_{\vec\phi} = H_1(\Sigma_{\vec\phi},\Z)$.
\end{defn}

\insfig{higgs-bundles-20}{0.8}

There is one other way in which a trajectory can have finite length:

\begin{defn}[Closed loops]
A \ti{$\vartheta$-closed loop} is a maximal $\vartheta$-trajectory $p$
such that the closure of $p$ has the topology of $S^1$.
\end{defn}
This includes the possibility that $p$ begins and ends
at the same branch point.

\begin{defn}[Charge of a closed loop]
If $p$ is a closed loop, then $\tilde p$ is the union of two
oriented loops on $\Sigma$; the \ti{charge} of $\tilde p$
is the class of this union in $\Gamma_{\vec\phi} = H_1(\Sigma_{\vec\phi},\Z)$.
\end{defn}

\insfig{higgs-bundles-21}{0.8}

\begin{defn}[Finite $\vartheta$-trajectories] A
\ti{finite $\vartheta$-trajectory} is a $\vartheta$-saddle connection or
$\vartheta$-closed loop.
\end{defn}

As we will now show, the existence of a finite $\vartheta$-trajectory is a
non-generic phenomenon: for ``most'' angles $\vartheta$ they
do not occur.

\begin{lem}[Phase constraint for finite trajectories]
If a $\vartheta$-finite trajectory exists with charge
$\gamma$, then $e^{- \I \vartheta} Z_\gamma \in \R_+$.
\end{lem}

\begin{pf}
Choose a $\sqrt{\Delta}$ over $p$, and orient $p$
so that $e^{-\I \vartheta} \sqrt{\Delta}$ is positive.
Then
\begin{equation}
Z_\gamma = \int_{\tilde p} \lambda = \int_p \lambda_+ - \lambda_- = \int_p \sqrt{\Delta}
\end{equation}
so
\begin{equation}
	e^{-\I \vartheta} Z_\gamma = \int_p e^{\I \vartheta} \sqrt{\Delta} > 0
\end{equation}
as desired.
\end{pf}

In particular, finite $\vartheta$-trajectories can only
occur at countably many phases $\vartheta$.

\begin{prop}[Landscape of finite $\vartheta$-trajectories]
Fix $\vartheta$ and $\vec\phi \in \cB'$. Then
the set of finite $\vartheta$-trajectories is described as follows.
There are finitely many
subsets of $C$ homeomorphic to open annuli (``ring domains''),
foliated by $\vartheta$-closed loops.
Each boundary of a ring domain can be a $\vartheta$-closed loop
or a union of $\vartheta$-saddle connections.
In addition there can be finitely many $\vartheta$-saddle connections elsewhere on
$C$.
\end{prop}

\insfig{higgs-bundles-22}{0.8}

\begin{pf} This is proven in \cite{MR743423}.
\end{pf}

\begin{defn}[DT invariants]
Fix $\vec\phi \in \cB'$ and $\gamma \in \Gamma_{\vec \phi}$.
$DT(\gamma) \in \Z$ is a count of finite $\vartheta$-trajectories
(of $\Delta$), where $\vartheta = \arg Z_\gamma$:
\begin{equation}
  DT(\gamma) = (\# \text{ $\vartheta$-saddle connections of charge $\gamma$}) - 2 (\# \text{ $\vartheta$-ring domains of charge $\gamma$}).
\end{equation}
\end{defn}

\begin{exercise} Show that $DT(\gamma) = DT(-\gamma)$.
\end{exercise}

Note that $DT$ is \ti{not} a locally constant function of $\gamma$.
Indeed, as we deform $\vec\phi$, saddle connections
and/or ring domains may appear or disappear; this is
the \ti{wall-crossing} phenomenon. We will have more to say
about this shortly.


\subsection{Complexifying}


In what follows it will be technically useful to
complexify.
Let $\cZ$ denote the twistor space of $\cM^s_{K,d}(C)$,
and let $\cM_\C$ be the space of \ti{complex} holomorphic
sections of $\cZ \to \C\PP^1$. $\cM_\C$ has an antiholomorphic
involution with $\cM$ as fixed locus.
(I emphasize that the complex structure on $\cM_\C$ is yet another
one, not related to any of the $I_\zeta$ we already have on $\cM$!)

\begin{prop}[Complex twistor lines for $\cM^s_{K,d}(C)$]
$\cM_\C$ contains as a connected component the set of tuples $(D,\varphi,\bar\varphi)$,
where $D$ is a complex connection in $E$,
$\varphi \in \Omega^{1,0}(\End E)$, $\bar\varphi \in \Omega^{0,1}(\End E)$, obeying
\begin{subequations} \label{eq:hitchin-doubled}
\begin{align}
\bar\partial_D \varphi &= 0, \\
\partial_D \bar\varphi &= 0, \\
F_D + [\varphi,\bar\varphi] &=  -2 \pi \I \frac{d}{K} \bid \omega_C,
\end{align}
\end{subequations}
modulo the gauge group $\fG_\C = \Aut E$.
\end{prop}
\begin{pf} Given such a tuple we can write a formula parallel
to \eqref{eq:nabla-zeta}:
\begin{equation} \label{eq:nabla-zeta-complex}
   \nabla(\zeta) = \zeta^{-1} \varphi + D + \zeta \bar\varphi.
\end{equation}
The conditions \eqref{eq:hitchin-doubled} imply
as usual that $\nabla(\zeta)$ is a complex
Einstein connection for all $\zeta \in \C^\times$.
Since $\pi^{-1}(\C^\times) \subset \cZ$ is isomorphic
to $\C^\times \times \cM^{Ein}_{K,d}(C)$, this gives a section
over $\C^\times \subset \C\PP^1$. Moreover this section extends
over $\zeta = 0$ and $\zeta = \infty$ since its behavior in these
limits is just like that of the real twistor lines, which we already
know extend.

Conversely, given a complex twistor line of the above form we need to show that
it has a neighborhood consisting only of lines of the above form. \fixme{infinitesimal
calculation using normal bundle}
\end{pf}

\begin{example}[Complex twistor lines for $\cM_{1,0}(C)$] Suppose $E$ is
a degree $0$ line bundle over $C$. Then given any
$\varphi \in \Omega^{1,0}(\End E)$, $\bar\varphi \in \Omega^{0,1}(\End E)$
we can find \fixme{...}
\end{example}

\begin{defn}[Complexified Hitchin fibration]
By restricting to the fibers over $0$ and $\infty$,
each point of $\cM_\C$ gives a Higgs bundle and an
anti-Higgs bundle. Thus we obtain a doubled Hitchin
fibration,
\begin{equation}
\rho_\C: \cM_\C \to \cB \times \bar{\cB}.
\end{equation}
\end{defn}

\begin{prop}[Diagonal fibers of complexified Hitchin fibration] \label{prop:diagonal-fibers-of-complex-hitchin-fibration}
Suppose $\vec\phi \in \cB'$ and $d' = 0$. Then $\rho_\C^{-1}(\vec\phi, \overline{\vec\phi})$ has a
connected component which is $\Hom(H_1(\Sigma_{\vec\phi}),\C^\times)$. \fixme{I hope!}
\begin{pf}
% A point of $\rho_\C^{-1}(\vec\phi, \overline{\vec\phi})$
% gives two line bundles $\cL$, $\cL'$ over the
% same spectral curve $\Sigma_{\vec\phi}$,
% with $\cL$ holomorphic and $\cL'$ antiholomorphic.
\fixme{...}
\end{pf}
\end{prop}


\subsection{The punctured case}

Now for each $\vec\phi \in \cB'$ we are going to construct
a map
\begin{equation}
\cX_{\vec\phi}: \C^\times \to G_{\vec\phi}
\end{equation}
where $G_{\vec\phi}$ is the group of birational automorphisms
of the torus $T_{\vec\phi}$.
By \autoref{prop:diagonal-fibers-of-complex-hitchin-fibration},
this is equivalent to giving a collection of functions
$\cX_\gamma: \C^\times \to \C^\times$
on the diagonal part of the complexified Hitchin fibration,
obeying $\cX_{\gamma} \cX_{\gamma'} = \cX_{\gamma + \gamma'}$.
We want to find $\cX$ such that it obeys the conditions
of \autoref{lem:rh-uniqueness},
and at the same time, gives a holomorphic
Darboux coordinate system on $\cM$.

The punctured case is technically much simpler and closer to
being rigorously understood, so let's start there.

So, now let $C$ denote a surface with \ti{punctures}, such that
$\chi(C) < 0$. Let $\bar{C}$ be the original unpunctured surface,
and $z_1, \dots, z_n \in \bar{C}$ the punctures.
Also fix additional ``residue data'' around the punctures:
for each puncture $z_\ell$ give
a semisimple conjugacy class $m_\ell \in gl(K,\C)$
and $m_\ell^\R \in \fu(K)$.

Our constructions of moduli spaces can be extended to this
punctured setting: the relevant moduli spaces involve
$(D,\Phi)$ which are allowed to have first-order poles
at the punctures, with residues controlled by $m^\R$ and $m$.
For example, the connection form representing $D$ near
a puncture is like
\begin{equation}
  D = \de + A, \qquad A = \I m^\R \de \theta + \text{ regular}
\end{equation}
with $\theta$ the polar angle, and similarly
\begin{equation}
  \varphi = m \frac{\de z}{z} + \text{ regular}
\end{equation}
We get spaces $\cN_{K,d,m^\R}(C)$, $\cM_{K,d,m^\R,m}(C)$.
They have essentially all the same properties as
their unpunctured cousins. \fixme{expand this a lot!}

Now let us assume that all eigenvalues of each $m_\ell$
are distinct, and also assume again that we are in the
case $K=2$. Then we have the following:

\begin{prop}[Good behavior of $\vartheta$-trajectories
on punctured surfaces] Suppose $\vec\phi \in \cB'$
and $e^{-\I \vartheta} Z_\gamma$ is real,
(in particular no eigenvalue of $e^{-\I \vartheta} m^\C_\ell$ is real).
Then:
\begin{itemize}
\item Every $\vartheta$-trajectory is forward asymptotic to a puncture,
\item The complement of the $\vartheta$-critical graph
has finitely many connected components
$C_i$; each $C_i$ is foliated by $\vartheta$-trajectories all of which are homotopic, and all of which are forward and backward asymptotic to punctures.
\end{itemize}
\end{prop}

\insfig{higgs-bundles-23}{1.1}

\begin{proof}
\fixme{...}
\end{proof}

\fixme{WKB triangulation}

\fixme{small flat sections}

\fixme{definition of cross ratios}

\fixme{jumps of cross ratios when saddle connection appears}

\fixme{interpretation of cross ratios as abelianization}

Now how do we see that these cross ratios $\cX_\gamma$
have the asymptotic behavior we want as $\zeta \to 0, \infty$?

\begin{prop}[WKB evolution along trajectories]
Fix $K=2$.
Suppose given a point of $\cM_\C$, corresponding to a family
of flat connections $\nabla(\zeta)$ as
in \eqref{eq:nabla-zeta-complex}. Suppose that $p$ is
a closed segment contained in a $\vartheta$-trajectory.
Choose a $\sqrt{\Delta}$ over $p$,
and sections $e_\pm$ of $E$ with $\varphi e_\pm = \lambda_\pm e_\pm$.
Let $\Psi_p(\zeta)$ denote the parallel transport of $\nabla(\zeta)$
from the beginning of $p$ to the end.
Then, if we define the ``WKB remainder'' by
\begin{equation}
  r(\zeta) = \exp \left(-\zeta^{-1} \int_p \lambda_+\right) \Psi_p(\zeta) e_+,
\end{equation}
we have
\begin{equation}
  \lim_{\zeta \to 0} r(\zeta) = c e_+
\end{equation}
for some $c \in \C^\times$.
\end{prop}

What this lemma says is that the
``leading part'' of the propagation of $\nabla(\zeta)$ is
given by the exponential growth one would naively expect.

\subsection{Estimating \texorpdfstring{$\cX$}{X}}

For the purpose of computing metric estimates,
we now want to see that $\cX$ becomes very close to $\cX^\sf$
when we go out to infinity in $\cB'$.
For this the essential point is the uniqueness
in \autoref{lem:rh-uniqueness}.

\fixme{integral equations}
\fixme{like Ooguri-Vafa!}

\printbibliography

\end{document}